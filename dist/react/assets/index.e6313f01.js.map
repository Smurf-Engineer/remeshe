{"version":3,"file":"index.e6313f01.js","sources":["../../../projects/react-demos/src/todo-mvc/uuid.ts","../../../projects/react-demos/src/todo-mvc/todoRepo.ts","../../../projects/react-demos/src/todo-mvc/todo.ts","../../../projects/react-demos/src/todo-mvc/hooks.ts","../../../projects/react-demos/src/todo-mvc/TodoItem.tsx","../../../projects/react-demos/src/todo-mvc/TodoList.tsx","../../../projects/react-demos/src/todo-mvc/index.tsx"],"sourcesContent":["export const uuid = () =>\r\n  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n    var r = (Math.random() * 16) | 0,\r\n      v = c == 'x' ? r : (r & 0x3) | 0x8\r\n    return v.toString(16)\r\n  })\r\n","import { Remesh } from 'remesh'\r\nimport localforage from 'localforage'\r\nimport type { Todo } from './todo'\r\n\r\ntype TodoRepo = {\r\n  getTodoList: () => Promise<Todo[]>\r\n  addTodo: (todo: Todo) => void\r\n  removeTodoByIds: (ids: Todo['id'][]) => void\r\n  updateTodo: (updateTodo: Todo) => void\r\n  toggleCompletedByIds: (ids: Todo['id'][], completed: boolean) => void\r\n}\r\n\r\nconst storageKey = 'todo-mvc-data'\r\nconst getTodoList = () => {\r\n  return localforage.getItem<Todo[]>(storageKey).then((value) => value ?? [])\r\n}\r\n\r\nexport const TodoRepoExtern = Remesh.extern<TodoRepo>({\r\n  name: 'TodoRepoExtern',\r\n  default: {\r\n    async getTodoList() {\r\n      return getTodoList()\r\n    },\r\n    async addTodo(todo: Todo) {\r\n      let data = await getTodoList()\r\n      await localforage.setItem(storageKey, data.concat(todo))\r\n    },\r\n    async removeTodoByIds(ids) {\r\n      let data = await getTodoList()\r\n      await localforage.setItem(\r\n        storageKey,\r\n        data.filter((item) => !ids.includes(item.id)),\r\n      )\r\n    },\r\n    async updateTodo(updateTodo) {\r\n      let data = await getTodoList()\r\n      await localforage.setItem(\r\n        storageKey,\r\n        data.map((todo) => (todo.id === updateTodo.id ? { ...todo, ...updateTodo } : todo)),\r\n      )\r\n    },\r\n\r\n    async toggleCompletedByIds(ids, completed) {\r\n      let data = await getTodoList()\r\n      await localforage.setItem(\r\n        storageKey,\r\n        data.map((todo) => (ids.includes(todo.id) ? { ...todo, completed } : todo)),\r\n      )\r\n    },\r\n  },\r\n})\r\n","import { Remesh } from 'remesh'\r\nimport { from, map, merge, tap } from 'rxjs'\r\nimport { uuid } from './uuid'\r\nimport { TodoRepoExtern } from './todoRepo'\r\n\r\nexport type Todo = {\r\n  id: string\r\n  name: string\r\n  completed: boolean\r\n}\r\n\r\nexport const TodoDomain = Remesh.domain({\r\n  name: 'TodoDomain',\r\n  impl: (domain) => {\r\n    const repo = domain.getExtern(TodoRepoExtern)\r\n\r\n    const TodoListState = domain.state<Todo[]>({\r\n      name: 'TodoList',\r\n      default: [],\r\n    })\r\n\r\n    const TodoListQuery = domain.query({\r\n      name: 'TodoListQuery',\r\n      impl({ get }, status?: 'completed' | 'active') {\r\n        const todoList = get(TodoListState())\r\n        if (status === 'active') {\r\n          return todoList.filter((todo) => !todo.completed)\r\n        } else if (status === 'completed') {\r\n          return todoList.filter((todo) => todo.completed)\r\n        } else {\r\n          return todoList\r\n        }\r\n      },\r\n    })\r\n\r\n    const HasCompletedQuery = domain.query({\r\n      name: 'HasCompletedQuery',\r\n      impl({ get }) {\r\n        return get(TodoListQuery('completed')).length > 0\r\n      },\r\n    })\r\n\r\n    const ActiveTodoCountQuery = domain.query({\r\n      name: 'ActiveTodoCountQuery',\r\n      impl({ get }) {\r\n        return get(TodoListQuery('active')).length\r\n      },\r\n    })\r\n\r\n    const AllCompletedQuery = domain.query({\r\n      name: 'AllCompletedQuery',\r\n      impl({ get }) {\r\n        return get(ActiveTodoCountQuery()) === 0 && get(TodoListQuery()).length > 0\r\n      },\r\n    })\r\n\r\n    const TodoAddedEvent = domain.event<Todo>({\r\n      name: 'addTodoEvent',\r\n    })\r\n\r\n    const setTodoList = domain.command({\r\n      name: 'setTodoList',\r\n      impl(_, todoList: Todo[]) {\r\n        return TodoListState().new(todoList)\r\n      },\r\n    })\r\n\r\n    const AddTodoFailedEvent = domain.event<string>({\r\n      name: 'AddTodoFailedEvent',\r\n    })\r\n\r\n    const addTodo = domain.command({\r\n      name: 'addTodo',\r\n      impl({ get }, todoName: string) {\r\n        if (todoName.trim() === '') {\r\n          return [AddTodoFailedEvent('Cannot be empty, please enter the TODO name')]\r\n        }\r\n\r\n        const todoList = get(TodoListState())\r\n        const newTodo = {\r\n          id: uuid(),\r\n          name: todoName,\r\n          completed: false,\r\n        }\r\n\r\n        return [TodoListState().new([newTodo, ...todoList]), TodoAddedEvent(newTodo)]\r\n      },\r\n    })\r\n\r\n    const removeTodoEvent = domain.event<Todo['id'][]>({\r\n      name: 'removeTodoEvent',\r\n    })\r\n\r\n    const removeTodo = domain.command({\r\n      name: 'removeTodo',\r\n      impl({ get }, id: Todo['id']) {\r\n        const todoList = get(TodoListState())\r\n        const newTodoList = todoList.filter((todo) => todo.id !== id)\r\n\r\n        return [TodoListState().new(newTodoList), removeTodoEvent([id])]\r\n      },\r\n    })\r\n\r\n    const TodoUpdatedEvent = domain.event<Todo>({\r\n      name: 'TodoUpdatedEvent',\r\n    })\r\n\r\n    const updateTodo = domain.command({\r\n      name: 'updateTodo',\r\n      impl({ get }, payload: { id: Todo['id'] } & Partial<Todo>) {\r\n        const todoList = get(TodoListState())\r\n\r\n        if (payload.name && payload.name.trim() === '') {\r\n          return removeTodo(payload.id)\r\n        }\r\n\r\n        const newTodoList = todoList.map((todo) => {\r\n          if (todo.id === payload.id) {\r\n            return {\r\n              ...todo,\r\n              ...payload,\r\n              id: todo.id,\r\n            }\r\n          } else {\r\n            return todo\r\n          }\r\n        })\r\n\r\n        const targetTodo = newTodoList.find((todo) => todo.id === payload.id)\r\n\r\n        if (!targetTodo) {\r\n          return null\r\n        }\r\n\r\n        return [TodoListState().new(newTodoList), TodoUpdatedEvent(targetTodo)]\r\n      },\r\n    })\r\n\r\n    const TodoCompletedChangedEvent = domain.event<{ ids: Todo['id'][]; completed: boolean }>({\r\n      name: 'TodoCompletedChangedEvent',\r\n    })\r\n\r\n    const toggleTodoCompleted = domain.command({\r\n      name: 'toggleTodoCompleted',\r\n      impl({ get }, targetTodoId: Todo['id']) {\r\n        const todoList = get(TodoListState())\r\n\r\n        const newTodoList = todoList.map((todo) => {\r\n          if (todo.id === targetTodoId) {\r\n            return {\r\n              ...todo,\r\n              completed: !todo.completed,\r\n            }\r\n          }\r\n          return todo\r\n        })\r\n\r\n        const targetTodo = newTodoList.find((todo) => todo.id === targetTodoId)\r\n\r\n        if (!targetTodo) {\r\n          return null\r\n        }\r\n\r\n        const eventData = {\r\n          ids: [targetTodoId],\r\n          completed: targetTodo?.completed,\r\n        }\r\n\r\n        return [TodoListState().new(newTodoList), TodoCompletedChangedEvent(eventData)]\r\n      },\r\n    })\r\n\r\n    const toggleAllTodoCompleted = domain.command({\r\n      name: 'toggleAllTodoCompleted',\r\n      impl({ get }, completed: boolean) {\r\n        const todoList = get(TodoListState())\r\n\r\n        if (todoList.length === 0) {\r\n          return null\r\n        }\r\n\r\n        const newTodoList = todoList.map((todo) => {\r\n          return { ...todo, completed }\r\n        })\r\n\r\n        return [\r\n          TodoListState().new(newTodoList),\r\n          TodoCompletedChangedEvent({\r\n            ids: newTodoList.map((todo) => todo.id),\r\n            completed,\r\n          }),\r\n        ]\r\n      },\r\n    })\r\n\r\n    const clearCompleted = domain.command({\r\n      name: 'clearCompleted',\r\n      impl({ get }) {\r\n        const todoList = get(TodoListState())\r\n        const newTodoList = todoList.filter((todo) => !todo.completed)\r\n        const removedTodoIdList = todoList.filter((todo) => todo.completed).map((todo) => todo.id)\r\n\r\n        return [TodoListState().new(newTodoList), removeTodoEvent(removedTodoIdList)]\r\n      },\r\n    })\r\n\r\n    domain.command$({\r\n      name: 'fromRepoToState',\r\n      impl() {\r\n        return from(repo.getTodoList()).pipe(map((todos) => setTodoList(todos)))\r\n      },\r\n    })\r\n\r\n    domain.command$({\r\n      name: 'fromStateToRepo',\r\n      impl: ({ fromEvent }) => {\r\n        const addTodo$ = fromEvent(TodoAddedEvent).pipe(tap((todo) => repo.addTodo(todo)))\r\n\r\n        const removeTodo$ = fromEvent(removeTodoEvent).pipe(tap((ids) => repo.removeTodoByIds(ids)))\r\n\r\n        const updateTodo$ = fromEvent(TodoUpdatedEvent).pipe(tap((todo) => repo.updateTodo(todo)))\r\n\r\n        const toggleTodoCompleted$ = fromEvent(TodoCompletedChangedEvent).pipe(\r\n          tap((eventData) => repo.toggleCompletedByIds(eventData.ids, eventData.completed)),\r\n        )\r\n\r\n        return merge(addTodo$, removeTodo$, updateTodo$, toggleTodoCompleted$).pipe(map(() => null))\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        TodoListQuery,\r\n        ActiveTodoCountQuery,\r\n        HasCompletedQuery,\r\n        AllCompletedQuery,\r\n      },\r\n      command: {\r\n        addTodo,\r\n        removeTodo,\r\n        toggleTodoCompleted,\r\n        toggleAllTodoCompleted,\r\n        updateTodo,\r\n        clearCompleted,\r\n      },\r\n      event: { AddTodoFailedEvent },\r\n    }\r\n  },\r\n})\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\r\n\r\nexport function useInputHandler(defaultValue: string) {\r\n  const [value, setValue] = useState(defaultValue)\r\n\r\n  const onChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(event.target.value)\r\n  }, [])\r\n\r\n  return [value, onChange, setValue] as const\r\n}\r\n\r\nexport function useKeyPressHandler(key: string, callback: (event: React.KeyboardEvent<HTMLInputElement>) => void) {\r\n  const callbackRef = useRef(callback)\r\n\r\n  const handleKeyPress = useCallback(\r\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (event.key.toLocaleLowerCase() === key.toLocaleLowerCase()) {\r\n        event.preventDefault()\r\n        callbackRef.current(event)\r\n      }\r\n    },\r\n    [key],\r\n  )\r\n\r\n  useEffect(() => {\r\n    callbackRef.current = callback\r\n  })\r\n\r\n  return handleKeyPress\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { useRemeshDomain } from 'remesh-react'\r\n\r\nimport { Todo, TodoDomain } from './todo'\r\nimport { useInputHandler, useKeyPressHandler } from './hooks'\r\n\r\nexport function TodoItem({ todo }: { todo: Todo }) {\r\n  const domain = useRemeshDomain(TodoDomain())\r\n\r\n  const [editing, setEditing] = useState(false)\r\n\r\n  const ref = useRef<HTMLInputElement>(null)\r\n\r\n  const [todoName, handleTodoNameChange] = useInputHandler(todo.name)\r\n\r\n  const handlePressEnter = useKeyPressHandler('Enter', () => {\r\n    domain.command.updateTodo({ ...todo, name: todoName })\r\n    setEditing(false)\r\n  })\r\n\r\n  const handleEnableEdit = () => {\r\n    setEditing(true)\r\n  }\r\n\r\n  const handleSave = () => {\r\n    domain.command.toggleTodoCompleted(todo.id)\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    domain.command.removeTodo(todo.id)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (editing) {\r\n      ref.current?.focus()\r\n    }\r\n  }, [editing])\r\n\r\n  return (\r\n    <li onDoubleClick={handleEnableEdit} className={`${editing ? 'editing' : ''} ${todo.completed ? 'completed' : ''}`}>\r\n      <div className=\"view\">\r\n        <input type=\"checkbox\" className=\"toggle\" checked={todo.completed} onChange={handleSave} />\r\n        <label>{todo.name}</label>\r\n        <button className=\"destroy\" onClick={handleDelete} />\r\n      </div>\r\n      {editing && (\r\n        <input\r\n          ref={ref}\r\n          className=\"edit\"\r\n          value={todoName}\r\n          onChange={handleTodoNameChange}\r\n          onKeyPress={handlePressEnter}\r\n          onBlur={() => {\r\n            setEditing(false)\r\n          }}\r\n        />\r\n      )}\r\n    </li>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useRemeshDomain, useRemeshEvent, useRemeshQuery } from 'remesh-react'\r\nimport { NavLink, useParams } from 'react-router-dom'\r\n\r\nimport { TodoDomain } from './todo'\r\nimport { useInputHandler, useKeyPressHandler } from './hooks'\r\nimport { TodoItem } from './TodoItem'\r\n\r\ntype FilterType = 'completed' | 'active' | undefined\r\n\r\nexport const TodoList = () => {\r\n  const { filter } = useParams()\r\n\r\n  const domain = useRemeshDomain(TodoDomain())\r\n\r\n  const todoList = useRemeshQuery(domain.query.TodoListQuery(filter as FilterType))\r\n  const activeTodoCount = useRemeshQuery(domain.query.ActiveTodoCountQuery())\r\n  const hasCompleted = useRemeshQuery(domain.query.HasCompletedQuery())\r\n  const allCompleted = useRemeshQuery(domain.query.AllCompletedQuery())\r\n\r\n  const [newTodo, handleTodoNameInput, setNewTodo] = useInputHandler('')\r\n\r\n  const handlePressEnter = useKeyPressHandler('Enter', () => {\r\n    domain.command.addTodo(newTodo)\r\n    setNewTodo('')\r\n  })\r\n\r\n  const handleToggleAll = () => {\r\n    domain.command.toggleAllTodoCompleted(!allCompleted)\r\n  }\r\n\r\n  const handleClearCompleted = () => {\r\n    domain.command.clearCompleted()\r\n  }\r\n  \r\n  useRemeshEvent(domain.event.AddTodoFailedEvent, (message) => {\r\n    alert(message)\r\n  })\r\n\r\n  console.log('render list')\r\n\r\n  return (\r\n    <div className=\"todoapp\">\r\n      <header className=\"header\">\r\n        <h1>todos</h1>\r\n        <input\r\n          className=\"new-todo\"\r\n          placeholder=\"What needs to be done?\"\r\n          value={newTodo}\r\n          onChange={handleTodoNameInput}\r\n          onKeyDown={handlePressEnter}\r\n        />\r\n      </header>\r\n\r\n      <section className=\"main\">\r\n        <input id=\"toggle-all\" type=\"checkbox\" className=\"toggle-all\" checked={allCompleted} onChange={handleToggleAll} />\r\n        <label htmlFor=\"toggle-all\" />\r\n        <ul className=\"todo-list\">\r\n          {todoList.map((todo) => (\r\n            <TodoItem key={todo.id} todo={todo} />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n\r\n      <footer className=\"footer\">\r\n        <span className=\"todo-count\">\r\n          <strong>{activeTodoCount}</strong> items left\r\n        </span>\r\n        <ul className=\"filters\">\r\n          <li>\r\n            <NavLink to=\"/\" className={(navData) => (navData.isActive ? 'selected' : '')}>\r\n              All\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/active\" className={(navData) => (navData.isActive ? 'selected' : '')}>\r\n              Active\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/completed\" className={(navData) => (navData.isActive ? 'selected' : '')}>\r\n              Completed\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n        {hasCompleted && (\r\n          <button className=\"clear-completed\" onClick={handleClearCompleted}>\r\n            Clear completed\r\n          </button>\r\n        )}\r\n      </footer>\r\n    </div>\r\n  )\r\n}\r\n","import React, { StrictMode } from 'react'\r\nimport * as ReactDOMClient from 'react-dom/client'\r\n\r\nimport { Remesh } from 'remesh'\r\nimport { HashRouter, Routes, Route } from 'react-router-dom'\r\n\r\nimport { RemeshRoot } from 'remesh-react'\r\nimport { RemeshReduxDevtools } from 'remesh-redux-devtools'\r\nimport { RemeshLogger } from 'remesh-logger'\r\n\r\nimport { TodoList } from './TodoList'\r\n\r\nconst container = document.getElementById('root')\r\n\r\nif (container) {\r\n  const root = ReactDOMClient.createRoot(container)\r\n  const store = Remesh.store({\r\n    inspectors: [RemeshReduxDevtools(), RemeshLogger({\r\n      include: ['command', 'query', 'event', 'domain', 'command$', 'state'],\r\n    })],\r\n  })\r\n\r\n  root.render(\r\n    <StrictMode>\r\n      <RemeshRoot store={store}>\r\n        <HashRouter basename=\"/\">\r\n          <Routes>\r\n            <Route path=\"/\" element={<TodoList />} />\r\n            <Route path=\"/:filter\" element={<TodoList />} />\r\n          </Routes>\r\n        </HashRouter>\r\n      </RemeshRoot>\r\n    </StrictMode>,\r\n  )\r\n}\r\n"],"names":["useState","useCallback","useRef","useEffect","todo","domain","useRemeshDomain","TodoDomain","editing","setEditing","ref","todoName","handleTodoNameChange","useInputHandler","name","handlePressEnter","useKeyPressHandler","command","updateTodo","handleEnableEdit","handleSave","toggleTodoCompleted","id","handleDelete","removeTodo","current","focus","completed","_jsxs","_jsx","TodoList","filter","useParams","todoList","useRemeshQuery","query","TodoListQuery","activeTodoCount","ActiveTodoCountQuery","hasCompleted","HasCompletedQuery","allCompleted","AllCompletedQuery","newTodo","handleTodoNameInput","setNewTodo","addTodo","handleToggleAll","toggleAllTodoCompleted","handleClearCompleted","clearCompleted","event","AddTodoFailedEvent","message","alert","console","log","map","navData","isActive","container","document","getElementById","root","ReactDOMClient","store","Remesh","inspectors","RemeshReduxDevtools","RemeshLogger","include","render","StrictMode"],"mappings":"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"}