{"version":3,"file":"counter.161e55d8.js","sources":["../../../projects/domains/src/others/counter.ts","../../../projects/react-demos/src/others/counter.tsx"],"sourcesContent":["import { Remesh } from 'remesh'\r\n\r\nexport const CounterDomain = Remesh.domain({\r\n  name: 'CounterDomain',\r\n  impl: (domain) => {\r\n    const CountState = domain.state({\r\n      name: 'CountState',\r\n      default: 0,\r\n    })\r\n\r\n    const CountIncreQuery = domain.query({\r\n      name: 'CountIncreQuery',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return count + 1\r\n      },\r\n    })\r\n\r\n    const CountDecreQuery = domain.query({\r\n      name: 'CountDecreQuery',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return count - 1\r\n      },\r\n    })\r\n\r\n    const CountDoubleQuery = domain.query({\r\n      name: 'CountDoubleQuery',\r\n      impl: ({ get }) => {\r\n        const incredCount = get(CountIncreQuery())\r\n        const decredCount = get(CountDecreQuery())\r\n        return 2 * (incredCount + decredCount)\r\n      },\r\n    })\r\n\r\n    const CountInfoQuery = domain.query({\r\n      name: 'CountInfoQuery',\r\n      impl: ({ get }) => {\r\n        const [incre, decre, double] = [get(CountIncreQuery()), get(CountDecreQuery()), get(CountDoubleQuery())]\r\n        return { incre, decre, double }\r\n      },\r\n    })\r\n\r\n    const IncreCommand = domain.command({\r\n      name: 'IncreCommand',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return CountState().new(count + 1)\r\n      },\r\n    })\r\n\r\n    const DecreCommand = domain.command({\r\n      name: 'DecreCommand',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return CountState().new(count - 1)\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        CountInfoQuery,\r\n      },\r\n      command: {\r\n        IncreCommand,\r\n        DecreCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { CounterDomain } from 'remesh-domains-for-demos/dist/others/counter'\r\n\r\nexport default () => {\r\n  const send = useRemeshSend()\r\n  const counterDomain = useRemeshDomain(CounterDomain())\r\n\r\n  const countInfo = useRemeshQuery(counterDomain.query.CountInfoQuery())\r\n\r\n  return (\r\n    <div>\r\n      <h2>Counter</h2>\r\n      <button onClick={() => send(counterDomain.command.IncreCommand())}>Increment</button>{' '}\r\n      <button onClick={() => send(counterDomain.command.DecreCommand())}>Decrement</button>\r\n      <div>\r\n        <h3>Count Query</h3>\r\n        <pre>{JSON.stringify(countInfo, null, 2)}</pre>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["CounterDomain","Remesh","domain","CountState","CountIncreQuery","get","CountDecreQuery","CountDoubleQuery","incredCount","decredCount","CountInfoQuery","incre","decre","double","IncreCommand","count","DecreCommand","counter","send","useRemeshSend","counterDomain","useRemeshDomain","countInfo","useRemeshQuery","query","_jsx","command","_jsxs","JSON","stringify"],"mappings":"yHAEa,MAAAA,EAAgBC,EAAO,OAAO,CACzC,KAAM,gBACN,KAAOC,GAAW,CACV,MAAAC,EAAaD,EAAO,MAAM,CAC9B,KAAM,aACN,QAAS,CAAA,CACV,EAEKE,EAAkBF,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,IAAAG,KACOA,EAAIF,EAAA,CAAY,EACf,CACjB,CACD,EAEKG,EAAkBJ,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,IAAAG,KACOA,EAAIF,EAAA,CAAY,EACf,CACjB,CACD,EAEKI,EAAmBL,EAAO,MAAM,CACpC,KAAM,mBACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACX,MAAAG,EAAcH,EAAID,EAAA,CAAiB,EACnCK,EAAcJ,EAAIC,EAAA,CAAiB,EACzC,MAAO,IAAKE,EAAcC,EAC5B,CAAA,CACD,EAEKC,EAAiBR,EAAO,MAAM,CAClC,KAAM,iBACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACjB,KAAM,CAACM,EAAOC,EAAOC,CAAM,EAAI,CAACR,EAAID,EAAA,CAAiB,EAAGC,EAAIC,EAAgB,CAAC,EAAGD,EAAIE,EAAA,CAAkB,CAAC,EAChG,MAAA,CAAE,MAAAI,EAAO,MAAAC,EAAO,OAAAC,EACzB,CAAA,CACD,EAEKC,EAAeZ,EAAO,QAAQ,CAClC,KAAM,eACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACX,MAAAU,EAAQV,EAAIF,EAAA,CAAY,EAC9B,OAAOA,EAAW,EAAE,IAAIY,EAAQ,CAAC,CACnC,CAAA,CACD,EAEKC,EAAed,EAAO,QAAQ,CAClC,KAAM,eACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACX,MAAAU,EAAQV,EAAIF,EAAA,CAAY,EAC9B,OAAOA,EAAW,EAAE,IAAIY,EAAQ,CAAC,CACnC,CAAA,CACD,EAEM,MAAA,CACL,MAAO,CACL,eAAAL,CACF,EACA,QAAS,CACP,aAAAI,EACA,aAAAE,CACF,CAAA,CAEJ,CACF,CAAC,ECjED,IAAAC,EAAe,IAAM,CACnB,MAAMC,EAAOC,IACPC,EAAgBC,EAAgBrB,EAAAA,CAAD,EAE/BsB,EAAYC,EAAeH,EAAcI,MAAMd,eAArB,CAAA,EAEhC,SACE,MAAA,CAAA,SACE,CAAAe,EAAA,KAAA,CAAA,SAAA,SAAA,CAAA,EACAA,EAAA,SAAA,CAAQ,QAAS,IAAMP,EAAKE,EAAcM,QAAQZ,cAAvB,EAA3B,SAAA,WAAA,CAFF,EAEwF,IACtFW,EAAA,SAAA,CAAQ,QAAS,IAAMP,EAAKE,EAAcM,QAAQV,cAAvB,EAA3B,SAAA,WAAA,CAAA,EACAW,EAAA,MAAA,CAAA,SACE,CAAAF,EAAA,KAAA,CAAA,SAAA,aAAA,CAAA,EACAA,EAAA,MAAA,CAAA,SAAMG,KAAKC,UAAUP,EAAW,KAAM,CAAhC,CAAA,CAFR,CAAA,CAAA,CAJF,CAAA,CAAA,CADF,CAWD"}