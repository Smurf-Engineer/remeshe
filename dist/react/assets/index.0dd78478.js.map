{"version":3,"file":"index.0dd78478.js","sources":["../../../projects/domains/src/todo-mvc-with-multiple-domains/domain-externs/storage.ts","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/domain-externs-impl/storage.ts","../../../packages/remesh/src/modules/text.ts","../../../projects/domains/src/todo-mvc-with-multiple-domains/domain-modules/sync-storage.ts","../../../projects/domains/src/todo-mvc-with-multiple-domains/domains/TodoInput.ts","../../../projects/domains/src/todo-mvc-with-multiple-domains/utils/uuid.ts","../../../projects/domains/src/todo-mvc-with-multiple-domains/domains/TodoList.ts","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/hooks/useKeyPressHandler.ts","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/components/TodoHeader.tsx","../../../packages/remesh/src/modules/switch.ts","../../../projects/domains/src/todo-mvc-with-multiple-domains/domains/TodoFilter.ts","../../../projects/domains/src/todo-mvc-with-multiple-domains/domains/TodoApp.ts","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/hooks/useInputHandler.ts","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/components/TodoItem.tsx","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/components/TodoList.tsx","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/components/TodoFooter.tsx","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/components/TodoApp.tsx","../../../projects/react-demos/src/todo-mvc-with-multiple-domains/index.tsx"],"sourcesContent":["import { Remesh } from 'remesh'\n\nexport type Storage = {\n  get: <T>(key: string) => Promise<T | null>\n  set: <T>(key: string, value: T) => Promise<void>\n  clear: (key: string) => Promise<void>\n}\n\nexport const Storage = Remesh.extern<Storage>({\n  name: 'StorageExtern',\n  default: {\n    get: () => {\n      throw new Error('Not implemented')\n    },\n    set: () => {\n      throw new Error('Not implemented')\n    },\n    clear: () => {\n      throw new Error('Not implemented')\n    },\n  },\n})\n","import localforage from 'localforage'\nimport { Storage } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domain-externs/storage'\n\nexport const StorageImpl = Storage.impl({\n  get: (key) => {\n    return localforage.getItem(key)\n  },\n  set: async (key, value) => {\n    await localforage.setItem(key, value)\n  },\n  clear: (key) => {\n    return localforage.removeItem(key)\n  },\n})\n","import { Remesh, RemeshDomainContext, Capitalize } from '../index'\n\nexport type TextModuleOptions = {\n  name: Capitalize\n  default?: string\n}\n\nexport const TextModule = (domain: RemeshDomainContext, options: TextModuleOptions) => {\n  const TextState = domain.state({\n    name: `${options.name}.TextState`,\n    default: options.default ?? '',\n  })\n\n  const TextQuery = domain.query({\n    name: `${options.name}.TextQuery`,\n    impl: ({ get }) => get(TextState()),\n  })\n\n  const SetTextCommand = domain.command({\n    name: `${options.name}.SetTextCommand`,\n    impl: ({}, current: string) => {\n      return TextState().new(current)\n    },\n  })\n\n  const ClearTextCommand = domain.command({\n    name: `${options.name}.ClearTextCommand`,\n    impl: ({}) => {\n      return TextState().new('')\n    },\n  })\n\n  const ResetCommand = domain.command({\n    name: `${options.name}.ResetCommand`,\n    impl: ({}) => {\n      return TextState().new(options.default ?? '')\n    },\n  })\n\n  return Remesh.module({\n    query: {\n      TextQuery,\n    },\n    command: {\n      SetTextCommand,\n      ClearTextCommand,\n      ResetCommand,\n    },\n  })\n}\n","import { RemeshDomainContext, RemeshCommandContext, RemeshEvent, RemeshAction } from 'remesh'\n\nimport { map } from 'rxjs/operators'\n\nimport { Storage } from '../domain-externs/storage'\n\nexport type SyncStorageOptions<T, U = T> = {\n  storageKey: string\n  TriggerEvent: RemeshEvent<any, T>\n  get: (event: T) => U\n  set: (ctx: RemeshCommandContext, value: U) => RemeshAction\n}\n\nconst createOptions = <R>(storageKey: string, callback: <T, U>(options: SyncStorageOptions<T, U>) => R) => {\n  return {\n    listenTo: <T>(TriggerEvent: RemeshEvent<any, T>) => {\n      return {\n        get: <U>(get: (event: T) => U) => {\n          return {\n            set: (set: SyncStorageOptions<T, U>['set']) => {\n              return callback({\n                storageKey,\n                TriggerEvent,\n                get: get,\n                set: set,\n              })\n            },\n          }\n        },\n        set: (set: SyncStorageOptions<T, T>['set']) => {\n          return callback({\n            storageKey,\n            TriggerEvent,\n            get: (event: T) => event,\n            set: set,\n          })\n        },\n      }\n    },\n  }\n}\n\nconst createSyncStorage = <T, U = T>(domain: RemeshDomainContext, options: SyncStorageOptions<T, U>) => {\n  const storage = domain.getExtern(Storage)\n\n  domain.effect({\n    name: 'ReadStorageEffect',\n    impl: async (ctx) => {\n      const value = await storage.get<U>(options.storageKey)\n\n      if (value) {\n        return options.set(ctx, value)\n      }\n\n      return null\n    },\n  })\n\n  domain.effect({\n    name: 'WriteStorageEffect',\n    impl: ({ fromEvent }) => {\n      return fromEvent(options.TriggerEvent).pipe(\n        map((value) => {\n          storage.set(options.storageKey, options.get(value))\n          return null\n        }),\n      )\n    },\n  })\n}\n\nexport const syncStorage = (domain: RemeshDomainContext, storageKey: string) => {\n  return createOptions(storageKey, (options) => createSyncStorage(domain, options))\n}\n","import { Remesh } from 'remesh'\nimport { TextModule } from 'remesh/modules/text'\n\nimport { syncStorage } from '../domain-modules/sync-storage'\n\nexport const TODO_INPUT_STORAGE_KEY = 'remesh-example/todo-input'\n\nexport const TodoInputDomain = Remesh.domain({\n  name: 'TodoInputDomain',\n  impl: (domain) => {\n    const todoInputModule = TextModule(domain, {\n      name: 'TodoInput',\n    })\n\n    const TodoInputChangedEvent = domain.event<string>({\n      name: 'TodoInputChangedEvent',\n    })\n\n    const TodoInputQuery = todoInputModule.query.TextQuery\n\n    const SetTodoInputCommand = domain.command({\n      name: 'SetTodoInputCommand',\n      impl: ({}, newTodoInput: string) => {\n        return [todoInputModule.command.SetTextCommand(newTodoInput), TodoInputChangedEvent(newTodoInput)]\n      },\n    })\n\n    const ClearTodoInputCommand = domain.command({\n      name: 'ClearTodoInputCommand',\n      impl: ({ get }) => {\n        return [todoInputModule.command.ClearTextCommand(), TodoInputChangedEvent('')]\n      },\n    })\n\n    syncStorage(domain, TODO_INPUT_STORAGE_KEY)\n      .listenTo(TodoInputChangedEvent)\n      .set(({}, value) => {\n        return SetTodoInputCommand(value)\n      })\n\n    return {\n      query: {\n        TodoInputQuery,\n      },\n      command: {\n        SetTodoInputCommand,\n        ClearTodoInputCommand,\n      },\n      event: {\n        TodoInputChangedEvent,\n      },\n    }\n  },\n})\n","export const uuid = () =>\n  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8\n    return v.toString(16)\n  })\n","import { Remesh } from 'remesh'\nimport { ListModule } from 'remesh/modules/list'\n\nimport { uuid } from '../utils/uuid'\nimport { syncStorage } from '../domain-modules/sync-storage'\nimport { map } from 'rxjs/operators'\n\nexport const TODO_LIST_STORAGE_KEY = 'remesh-example/todo-list'\n\nexport type Todo = {\n  id: string\n  title: string\n  completed: boolean\n}\n\nexport type Todos = Todo[]\n\nexport const getTodoId = (todo: Todo) => todo.id\n\nexport const TodoListDomain = Remesh.domain({\n  name: 'TodoListDomain',\n  impl: (domain) => {\n    const todoListModule = ListModule<Todo>(domain, {\n      name: 'TodoList',\n      key: getTodoId,\n    })\n\n    const TodoListQuery = todoListModule.query.ItemListQuery\n\n    const TodoQuery = todoListModule.query.ItemQuery\n\n    const TodoKeyListQuery = todoListModule.query.KeyListQuery\n\n    const TodoListChangedEvent = domain.event({\n      name: 'TodoListChangedEvent',\n      impl: ({ get }) => {\n        return get(TodoListQuery())\n      },\n    })\n\n    const SetTodoListCommand = domain.command({\n      name: 'SetTodoListCommand',\n      impl: ({}, todos: Todos) => {\n        return [todoListModule.command.SetListCommand(todos), TodoListChangedEvent()]\n      },\n    })\n\n    const FailedToAddTodoEvent = domain.event<{ reason: string }>({\n      name: 'FailedToAddTodoEvent',\n    })\n\n    const TodoItemAddedEvent = domain.event<Todo>({\n      name: 'TodoItemAddedEvent',\n    })\n\n    const AddTodoCommand = domain.command({\n      name: 'AddTodoCommand',\n      impl: ({}, title: string) => {\n        if (title === '') {\n          return FailedToAddTodoEvent({\n            reason: 'Title cannot be empty',\n          })\n        }\n\n        const todo: Todo = {\n          id: uuid(),\n          title: title,\n          completed: false,\n        }\n\n        return [todoListModule.command.AddItemCommand(todo), TodoItemAddedEvent(todo), TodoListChangedEvent()]\n      },\n    })\n\n    const UpdateTodoCommand = domain.command({\n      name: 'UpdateTodoCommand',\n      impl: ({}, todo: Todo) => {\n        if (todo.title === '') {\n          return DeleteTodoCommand(todo.id)\n        }\n\n        return [todoListModule.command.UpdateItemCommand(todo), TodoListChangedEvent()]\n      },\n    })\n\n    const DeleteTodoCommand = domain.command({\n      name: 'DeleteTodoCommand',\n      impl: ({}, id: string) => {\n        return [todoListModule.command.DeleteItemCommand(id), TodoListChangedEvent()]\n      },\n    })\n\n    const ActiveTodoListQuery = domain.query({\n      name: 'ActiveTodoListQuery',\n      impl: ({ get }) => {\n        const todos = get(TodoListQuery())\n        return todos.filter((todo) => !todo.completed)\n      },\n    })\n\n    const CompletedTodoListQuery = domain.query({\n      name: 'CompletedTodoListQuery',\n      impl: ({ get }) => {\n        const todos = get(TodoListQuery())\n        return todos.filter((todo) => todo.completed)\n      },\n    })\n\n    const ActiveTodoCountQuery = domain.query({\n      name: 'ActiveTodoCountQuery',\n      impl: ({ get }) => {\n        const todos = get(ActiveTodoListQuery())\n        return todos.length\n      },\n    })\n\n    const CompletedTodoCountQuery = domain.query({\n      name: 'CompletedTodoCountQuery',\n      impl: ({ get }) => {\n        const todos = get(CompletedTodoListQuery())\n        return todos.length\n      },\n    })\n\n    const IsAllCompletedQuery = domain.query({\n      name: 'IsAllCompletedQuery',\n      impl: ({ get }) => {\n        const todos = get(TodoListQuery())\n\n        if (todos.length === 0) {\n          return false\n        }\n\n        const completedTodoCount = get(CompletedTodoCountQuery())\n\n        return completedTodoCount === todos.length\n      },\n    })\n\n    const ToggleTodoCommand = domain.command({\n      name: 'ToggleTodoCommand',\n      impl: ({ get }, id: Todo['id']) => {\n        const todo = get(TodoQuery(id))\n        const newTodo: Todo = {\n          ...todo,\n          completed: !todo.completed,\n        }\n\n        return UpdateTodoCommand(newTodo)\n      },\n    })\n\n    const ToggleAllCommand = domain.command({\n      name: 'ToggleAllCommand',\n      impl: ({ get }) => {\n        const todoList = get(TodoListQuery())\n\n        if (todoList.length === 0) {\n          return null\n        }\n\n        const activeCount = get(ActiveTodoCountQuery())\n        const completed = activeCount > 0\n        const newTodoList = todoList.map((todo) => ({\n          ...todo,\n          completed,\n        }))\n\n        return SetTodoListCommand(newTodoList)\n      },\n    })\n\n    const ClearAllCompletedCommand = domain.command({\n      name: 'ClearAllCompletedCommand',\n      impl: ({ get }) => {\n        const todoList = get(TodoListQuery())\n\n        if (todoList.length === 0) {\n          return null\n        }\n\n        const newTodoList = todoList.filter((todo) => !todo.completed)\n\n        return SetTodoListCommand(newTodoList)\n      },\n    })\n\n    syncStorage(domain, TODO_LIST_STORAGE_KEY)\n      .listenTo(TodoListChangedEvent)\n      .set(({}, todos) => {\n        return SetTodoListCommand(todos)\n      })\n\n    return {\n      query: {\n        TodoQuery,\n        TodoKeyListQuery,\n        TodoListQuery,\n        ActiveTodoListQuery,\n        CompletedTodoListQuery,\n        ActiveTodoCountQuery,\n        CompletedTodoCountQuery,\n        IsAllCompletedQuery,\n      },\n      command: {\n        SetTodoListCommand,\n        AddTodoCommand,\n        UpdateTodoCommand,\n        DeleteTodoCommand,\n        ToggleTodoCommand,\n        ToggleAllCommand,\n        ClearAllCompletedCommand,\n      },\n      event: {\n        FailedToAddTodoEvent,\n        TodoListChangedEvent,\n        TodoItemAddedEvent,\n      },\n    }\n  },\n})\n","import React from 'react'\n\nexport function useKeyPressHandler(\n  keys: string | string[],\n  callback: (event: React.KeyboardEvent<HTMLInputElement>, key: string) => void,\n) {\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    const keyList = Array.isArray(keys) ? keys : [keys]\n    for (const key of keyList) {\n      if (event.key.toLowerCase() === key.toLowerCase()) {\n        event.preventDefault()\n        callback(event, key)\n      }\n    }\n  }\n\n  return handleKeyPress\n}\n","import React from 'react'\n\nimport { useRemeshDomain, useRemeshEvent, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { TodoInputDomain } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domains/TodoInput'\nimport { TodoListDomain } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domains/TodoList'\n\nimport { useKeyPressHandler } from '../hooks/useKeyPressHandler'\n\nexport const TodoHeader = () => {\n  const send = useRemeshSend()\n  const todoInputDomain = useRemeshDomain(TodoInputDomain())\n  const todoListDomain = useRemeshDomain(TodoListDomain())\n\n  const todoInput = useRemeshQuery(todoInputDomain.query.TodoInputQuery())\n\n  const handleTodoInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    send(todoInputDomain.command.SetTodoInputCommand(event.target.value))\n  }\n\n  const handlePressEnter = useKeyPressHandler('Enter', () => {\n    send(todoListDomain.command.AddTodoCommand(todoInput))\n  })\n\n  useRemeshEvent(todoListDomain.event.FailedToAddTodoEvent, (event) => {\n    alert(event.reason)\n  })\n\n  return (\n    <header className=\"header\">\n      <h1>todos</h1>\n      <input\n        className=\"new-todo\"\n        placeholder=\"What needs to be done?\"\n        value={todoInput}\n        onChange={handleTodoInputChange}\n        onKeyDown={handlePressEnter}\n      />\n    </header>\n  )\n}\n","import { Remesh, RemeshDomainContext, Capitalize } from '../index'\n\nexport type SwitchModuleOptions<T> = {\n  name: Capitalize\n  default: T\n}\n\nexport const SwitchModule = <T>(domain: RemeshDomainContext, options: SwitchModuleOptions<T>) => {\n  const SwitchState = domain.state({\n    name: `${options.name}.SwitchState`,\n    default: options.default,\n  })\n\n  const SwitchQuery = domain.query({\n    name: `${options.name}.SwitchQuery`,\n    impl: ({ get }) => get(SwitchState()),\n  })\n\n  const SwitchCommand = domain.command({\n    name: `${options.name}.SwitchCommand`,\n    impl: ({}, current: T) => {\n      return SwitchState().new(current)\n    },\n  })\n\n  const ResetCommand = domain.command({\n    name: `${options.name}.ResetCommand`,\n    impl: ({}) => {\n      return SwitchState().new(options.default)\n    },\n  })\n\n  return Remesh.module({\n    query: {\n      SwitchQuery,\n    },\n    command: {\n      SwitchCommand,\n      ResetCommand,\n    },\n  })\n}\n","import { Remesh } from 'remesh'\nimport { SwitchModule } from 'remesh/modules/switch'\n\nimport { syncStorage } from '../domain-modules/sync-storage'\n\nexport const TODO_FILTER_STORAGE_KEY = 'remesh-example/todo-filter'\n\nexport type TodoFilter = 'all' | 'active' | 'completed'\n\nexport const getValidTodoFilter = (input: string | undefined): TodoFilter => {\n  if (input === undefined) {\n    return 'all'\n  }\n\n  switch (input) {\n    case 'all':\n    case 'active':\n    case 'completed':\n      return input\n    default:\n      return 'all'\n  }\n}\n\nexport const TodoFilterDomain = Remesh.domain({\n  name: 'TodoFilterDomain',\n  impl: (domain) => {\n    const todoFilterModule = SwitchModule<TodoFilter>(domain, {\n      name: 'TodoFilter',\n      default: 'all',\n    })\n\n    const TodoFilterChangedEvent = domain.event<TodoFilter>({\n      name: 'TodoFilterChangedEvent',\n    })\n\n    const TodoFilterQuery = todoFilterModule.query.SwitchQuery\n\n    const SetFilterCommand = domain.command({\n      name: 'SetFilterCommand',\n      impl: ({}, input: string) => {\n        const filter = getValidTodoFilter(input)\n\n        return [todoFilterModule.command.SwitchCommand(filter), TodoFilterChangedEvent(filter)]\n      },\n    })\n\n    syncStorage(domain, TODO_FILTER_STORAGE_KEY)\n      .listenTo(TodoFilterChangedEvent)\n      .set(({}, value) => {\n        return SetFilterCommand(value)\n      })\n\n    return {\n      query: {\n        TodoFilterQuery,\n      },\n      command: {\n        SetFilterCommand,\n      },\n      event: {\n        TodoFilterChangedEvent,\n      },\n    }\n  },\n})\n","import { Remesh } from 'remesh'\n\nimport { filter, map } from 'rxjs/operators'\n\nimport { TodoInputDomain } from './TodoInput'\nimport { TodoListDomain, getTodoId } from './TodoList'\nimport { TodoFilterDomain } from './TodoFilter'\n\nexport const TodoAppDomain = Remesh.domain({\n  name: 'TodoAppDomain',\n  impl: (domain) => {\n    const todoHeader = domain.getDomain(TodoInputDomain())\n    const todoList = domain.getDomain(TodoListDomain())\n    const todoFooter = domain.getDomain(TodoFilterDomain())\n\n    const FilteredTodoKeyListQuery = domain.query({\n      name: 'FilteredTodoKeyListQuery',\n      impl: ({ get }) => {\n        const filter = get(todoFooter.query.TodoFilterQuery())\n\n        if (filter === 'all') {\n          return get(todoList.query.TodoListQuery()).map(getTodoId)\n        }\n\n        if (filter === 'active') {\n          return get(todoList.query.ActiveTodoListQuery()).map(getTodoId)\n        }\n\n        if (filter === 'completed') {\n          return get(todoList.query.CompletedTodoListQuery()).map(getTodoId)\n        }\n\n        throw new Error(`Unknown filter: ${filter}`)\n      },\n    })\n\n    domain.effect({\n      name: 'ClearTodoInputWhenTodoAddedEffect',\n      impl: ({ fromEvent, get }) => {\n        return fromEvent(todoList.event.TodoItemAddedEvent).pipe(\n          filter((todo) => {\n            const todoInput = get(todoHeader.query.TodoInputQuery())\n            return todoInput === todo.title\n          }),\n          map(() => {\n            return todoHeader.command.ClearTodoInputCommand()\n          }),\n        )\n      },\n    })\n\n    return {\n      query: {\n        FilteredTodoKeyListQuery,\n      },\n    }\n  },\n})\n","import React, { useCallback, useState } from 'react'\n\nexport function useInputHandler(defaultValue: string) {\n  const [value, setValue] = useState(defaultValue)\n\n  const onChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(event.target.value)\n  }, [])\n\n  return [value, onChange, setValue] as const\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { TodoListDomain, Todo } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domains/TodoList'\n\nimport { useKeyPressHandler } from '../hooks/useKeyPressHandler'\nimport { useInputHandler } from '../hooks/useInputHandler'\n\nexport type TodoItemProps = {\n  id: Todo['id']\n}\n\nexport function TodoItem(props: TodoItemProps) {\n  const send = useRemeshSend()\n  const todoListDomain = useRemeshDomain(TodoListDomain())\n\n  const todo = useRemeshQuery(todoListDomain.query.TodoQuery(props.id))\n\n  const [editing, setEditing] = useState(false)\n\n  const [title, handleTitleChange] = useInputHandler(todo.title)\n\n  const save = () => {\n    send(todoListDomain.command.UpdateTodoCommand({ ...todo, title }))\n    setEditing(false)\n  }\n\n  const handlePress = useKeyPressHandler(['Enter', 'Escape'], () => {\n    save()\n  })\n\n  const handleEnableEdit = () => {\n    setEditing(true)\n  }\n\n  const handleSave = () => {\n    send(todoListDomain.command.ToggleTodoCommand(todo.id))\n  }\n\n  const handleDelete = () => {\n    send(todoListDomain.command.DeleteTodoCommand(todo.id))\n  }\n\n  const handleBlur = () => {\n    save()\n  }\n\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  useEffect(() => {\n    if (editing) {\n      inputRef.current?.focus()\n    }\n  }, [editing])\n\n  return (\n    <li className={`${editing && 'editing'} ${todo.completed && 'completed'}`}>\n      <div className=\"view\">\n        <input type=\"checkbox\" className=\"toggle\" checked={todo.completed} onChange={handleSave} />\n        <label onDoubleClick={handleEnableEdit}>{todo.title}</label>\n        <button className=\"destroy\" onClick={handleDelete} />\n      </div>\n      {editing && (\n        <input\n          ref={inputRef}\n          className=\"edit\"\n          value={title}\n          onChange={handleTitleChange}\n          onKeyDown={handlePress}\n          onBlur={handleBlur}\n        />\n      )}\n    </li>\n  )\n}\n","import { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { TodoAppDomain } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domains/TodoApp'\nimport { TodoListDomain } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domains/TodoList'\n\nimport { TodoItem } from './TodoItem'\n\nexport const TodoList = () => {\n  const todoAppDomain = useRemeshDomain(TodoAppDomain())\n  const filteredTodoKeyList = useRemeshQuery(todoAppDomain.query.FilteredTodoKeyListQuery())\n\n  console.log('render list')\n\n  return (\n    <section className=\"main\">\n      <ToggleAllInput />\n      <ul className=\"todo-list\">\n        {filteredTodoKeyList.map((todoId) => (\n          <TodoItem key={todoId} id={todoId} />\n        ))}\n      </ul>\n    </section>\n  )\n}\n\nconst ToggleAllInput = () => {\n  const send = useRemeshSend()\n  const todoListDomain = useRemeshDomain(TodoListDomain())\n  const isAllCompleted = useRemeshQuery(todoListDomain.query.IsAllCompletedQuery())\n\n  const handleToggleAll = () => {\n    send(todoListDomain.command.ToggleAllCommand())\n  }\n  return (\n    <>\n      <input\n        id=\"toggle-all\"\n        type=\"checkbox\"\n        className=\"toggle-all\"\n        checked={isAllCompleted}\n        onChange={handleToggleAll}\n      />\n      <label htmlFor=\"toggle-all\" />\n    </>\n  )\n}\n","import React, { useEffect } from 'react'\nimport { NavLink, useParams } from 'react-router-dom'\n\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { TodoListDomain } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domains/TodoList'\nimport { TodoFilterDomain } from 'remesh-domains-for-demos/dist/todo-mvc-with-multiple-domains/domains/TodoFilter'\n\nexport const TodoFooter = () => {\n  const send = useRemeshSend()\n  const todoListDomain = useRemeshDomain(TodoListDomain())\n  const todoFilterDomain = useRemeshDomain(TodoFilterDomain())\n\n  const todoFilter = useRemeshQuery(todoFilterDomain.query.TodoFilterQuery())\n  const activeTodoCount = useRemeshQuery(todoListDomain.query.ActiveTodoCountQuery())\n  const completedTodoCount = useRemeshQuery(todoListDomain.query.CompletedTodoCountQuery())\n\n  const hasCompleted = completedTodoCount > 0\n\n  const handleClearCompleted = () => {\n    send(todoListDomain.command.ClearAllCompletedCommand())\n  }\n\n  const getClassName = (navData: { isActive: boolean }) => {\n    return navData.isActive ? 'selected' : ''\n  }\n\n  const params = useParams<{ filter: string }>()\n\n  useEffect(() => {\n    const filter = params.filter ?? 'all'\n    if (filter !== todoFilter) {\n      send(todoFilterDomain.command.SetFilterCommand(filter))\n    }\n  }, [params, todoFilter])\n\n  return (\n    <footer className=\"footer\">\n      <span className=\"todo-count\">\n        <strong>{activeTodoCount}</strong> item{activeTodoCount !== 1 && 's'} left\n      </span>\n      <ul className=\"filters\">\n        <li>\n          <NavLink to=\"/\" className={getClassName}>\n            All\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/active\" className={getClassName}>\n            Active\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/completed\" className={getClassName}>\n            Completed\n          </NavLink>\n        </li>\n      </ul>\n      {hasCompleted && (\n        <button className=\"clear-completed\" onClick={handleClearCompleted}>\n          Clear completed\n        </button>\n      )}\n    </footer>\n  )\n}\n","import React from 'react'\n\nimport { TodoHeader } from './TodoHeader'\nimport { TodoList } from './TodoList'\nimport { TodoFooter } from './TodoFooter'\n\nexport const TodoApp = () => {\n  return (\n    <div className=\"todoapp\">\n      <TodoHeader />\n      <TodoList />\n      <TodoFooter />\n    </div>\n  )\n}\n","import React, { StrictMode } from 'react'\nimport * as ReactDOMClient from 'react-dom/client'\n\nimport { HashRouter, Routes, Route } from 'react-router-dom'\n\nimport { Remesh } from 'remesh'\nimport { RemeshRoot } from 'remesh-react'\nimport { RemeshReduxDevtools } from 'remesh-redux-devtools'\nimport { RemeshLogger } from 'remesh-logger'\n\nimport { StorageImpl } from './domain-externs-impl/storage'\nimport { TodoApp } from './components/TodoApp'\n\nconst container = document.getElementById('root')\n\nif (container) {\n  const root = ReactDOMClient.createRoot(container)\n  const store = Remesh.store({\n    externs: [StorageImpl],\n    inspectors: [RemeshReduxDevtools(), RemeshLogger()],\n  })\n\n  root.render(\n    <StrictMode>\n      <RemeshRoot store={store}>\n        <HashRouter basename=\"/\">\n          <Routes>\n            <Route path=\"/\" element={<TodoApp />} />\n            <Route path=\"/:filter\" element={<TodoApp />} />\n          </Routes>\n        </HashRouter>\n      </RemeshRoot>\n    </StrictMode>,\n  )\n\n  // @ts-ignore\n  window.root = root\n}\n"],"names":["TodoHeader","send","useRemeshSend","todoInputDomain","useRemeshDomain","TodoInputDomain","todoListDomain","TodoListDomain","todoInput","useRemeshQuery","query","TodoInputQuery","handleTodoInputChange","event","command","SetTodoInputCommand","target","value","handlePressEnter","useKeyPressHandler","AddTodoCommand","FailedToAddTodoEvent","alert","reason","_jsx","useState","useCallback","props","todo","TodoQuery","id","editing","setEditing","title","handleTitleChange","useInputHandler","save","UpdateTodoCommand","handlePress","handleEnableEdit","handleSave","ToggleTodoCommand","handleDelete","DeleteTodoCommand","handleBlur","inputRef","useRef","useEffect","current","focus","completed","_jsxs","TodoList","todoAppDomain","TodoAppDomain","filteredTodoKeyList","FilteredTodoKeyListQuery","console","log","map","todoId","ToggleAllInput","isAllCompleted","IsAllCompletedQuery","_Fragment","ToggleAllCommand","handleToggleAll","TodoFooter","todoFilterDomain","TodoFilterDomain","todoFilter","TodoFilterQuery","activeTodoCount","ActiveTodoCountQuery","hasCompleted","completedTodoCount","CompletedTodoCountQuery","handleClearCompleted","ClearAllCompletedCommand","getClassName","navData","isActive","params","useParams","filter","SetFilterCommand","TodoApp","container","document","getElementById","root","ReactDOMClient","store","Remesh","externs","StorageImpl","inspectors","RemeshReduxDevtools","RemeshLogger","render","StrictMode","window"],"mappings":"6wBAQa,KAAA,GAAU,EAAO,OAAgB,CAC5C,KAAM,gBACN,QAAS,CACP,IAAK,IAAM,CACH,KAAA,IAAI,OAAM,iBAAiB,CACnC,EACA,IAAK,IAAM,CACH,KAAA,IAAI,OAAM,iBAAiB,CACnC,EACA,MAAO,IAAM,CACL,KAAA,IAAI,OAAM,iBAAiB,CACnC,CACF,CACF,CAAC,EClBY,GAAc,EAAQ,KAAK,CACtC,IAAK,AAAC,GACG,EAAY,QAAQ,CAAG,EAEhC,IAAK,MAAO,EAAK,IAAU,CACnB,KAAA,GAAY,QAAQ,EAAK,CAAK,CACtC,EACA,MAAO,AAAC,GACC,EAAY,WAAW,CAAG,CAErC,CAAC,ECNY,GAAa,CAAC,EAA6B,IAA+B,OAC/E,KAAA,GAAY,EAAO,MAAM,CAC7B,KAAM,GAAG,EAAQ,iBACjB,QAAS,KAAQ,UAAR,OAAmB,EAAA,CAC7B,EAEK,EAAY,EAAO,MAAM,CAC7B,KAAM,GAAG,EAAQ,iBACjB,KAAM,CAAC,CAAE,SAAU,EAAI,GAAW,CAAA,CACnC,EAEK,EAAiB,EAAO,QAAQ,CACpC,KAAM,GAAG,EAAQ,sBACjB,KAAM,CAAC,GAAI,IACF,EAAY,EAAA,IAAI,CAAO,CAChC,CACD,EAEK,EAAmB,EAAO,QAAQ,CACtC,KAAM,GAAG,EAAQ,wBACjB,KAAM,CAAC,KACE,EAAY,EAAA,IAAI,EAAE,CAC3B,CACD,EAEK,EAAe,EAAO,QAAQ,CAClC,KAAM,GAAG,EAAQ,oBACjB,KAAM,CAAC,KAAO,OACZ,MAAO,GAAU,EAAE,IAAI,KAAQ,UAAR,OAAmB,EAAE,CAC9C,CAAA,CACD,EAED,MAAO,GAAO,OAAO,CACnB,MAAO,CACL,WACF,EACA,QAAS,CACP,iBACA,mBACA,cACF,CAAA,CACD,CACH,ECpCM,GAAgB,CAAI,EAAoB,IACrC,EACL,SAAU,AAAI,GACL,EACL,IAAK,AAAI,GACA,EACL,IAAK,AAAC,GACG,EAAS,CACd,aACA,eACA,MACA,KAAA,CACD,CACH,GAGJ,IAAK,AAAC,GACG,EAAS,CACd,aACA,eACA,IAAK,AAAC,GAAa,EACnB,KAAA,CACD,CACH,EAEJ,GAIE,GAAoB,CAAW,EAA6B,IAAsC,CAChG,KAAA,GAAU,EAAO,UAAU,CAAO,EAExC,EAAO,OAAO,CACZ,KAAM,oBACN,KAAM,KAAO,IAAQ,CACnB,KAAM,GAAQ,KAAM,GAAQ,IAAO,EAAQ,UAAU,EAErD,MAAI,GACK,EAAQ,IAAI,EAAK,CAAK,EAGxB,IACT,CAAA,CACD,EAED,EAAO,OAAO,CACZ,KAAM,qBACN,KAAM,CAAC,CAAE,eACA,EAAU,EAAQ,YAAY,EAAE,KACrC,EAAI,AAAC,GACH,GAAQ,IAAI,EAAQ,WAAY,EAAQ,IAAI,CAAK,CAAC,EAC3C,KACR,CACH,CACF,CACD,CACH,EAEa,EAAc,CAAC,EAA6B,IAChD,GAAc,EAAY,AAAC,GAAY,GAAkB,EAAQ,CAAO,CAAC,ECnErE,GAAyB,4BAEzB,EAAkB,EAAO,OAAO,CAC3C,KAAM,kBACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAkB,GAAW,EAAQ,CACzC,KAAM,WAAA,CACP,EAEK,EAAwB,EAAO,MAAc,CACjD,KAAM,uBAAA,CACP,EAEK,EAAiB,EAAgB,MAAM,UAEvC,EAAsB,EAAO,QAAQ,CACzC,KAAM,sBACN,KAAM,CAAC,GAAI,IACF,CAAC,EAAgB,QAAQ,eAAe,CAAY,EAAG,EAAsB,CAAY,CAAC,CACnG,CACD,EAEK,EAAwB,EAAO,QAAQ,CAC3C,KAAM,wBACN,KAAM,CAAC,CAAE,SACA,CAAC,EAAgB,QAAQ,iBAAoB,EAAA,EAAsB,EAAE,CAAC,CAC/E,CACD,EAEW,SAAA,EAAQ,EAAsB,EACvC,SAAS,CAAqB,EAC9B,IAAI,CAAC,GAAI,IACD,EAAoB,CAAK,CACjC,EAEI,CACL,MAAO,CACL,gBACF,EACA,QAAS,CACP,sBACA,uBACF,EACA,MAAO,CACL,uBACF,CAAA,CAEJ,CACF,CAAC,ECrDY,GAAO,IAClB,uCAAuC,QAAQ,QAAS,SAAU,EAAG,CAC/D,GAAA,GAAK,KAAK,OAAW,EAAA,GAAM,EAC7B,EAAI,GAAK,IAAM,EAAK,EAAI,EAAO,EAC1B,MAAA,GAAE,SAAS,EAAE,CACtB,CAAC,ECEU,GAAwB,2BAUxB,EAAY,AAAC,GAAe,EAAK,GAEjC,EAAiB,EAAO,OAAO,CAC1C,KAAM,iBACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAiB,GAAiB,EAAQ,CAC9C,KAAM,WACN,IAAK,CAAA,CACN,EAEK,EAAgB,EAAe,MAAM,cAErC,EAAY,EAAe,MAAM,UAEjC,EAAmB,EAAe,MAAM,aAExC,EAAuB,EAAO,MAAM,CACxC,KAAM,uBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAe,CAC5B,CACD,EAEK,EAAqB,EAAO,QAAQ,CACxC,KAAM,qBACN,KAAM,CAAC,GAAI,IACF,CAAC,EAAe,QAAQ,eAAe,CAAK,EAAG,GAAsB,CAC9E,CACD,EAEK,EAAuB,EAAO,MAA0B,CAC5D,KAAM,sBAAA,CACP,EAEK,EAAqB,EAAO,MAAY,CAC5C,KAAM,oBAAA,CACP,EAEK,EAAiB,EAAO,QAAQ,CACpC,KAAM,iBACN,KAAM,CAAC,GAAI,IAAkB,CAC3B,GAAI,IAAU,GACZ,MAAO,GAAqB,CAC1B,OAAQ,uBAAA,CACT,EAGH,KAAM,GAAa,CACjB,GAAI,GAAK,EACT,QACA,UAAW,EAAA,EAGN,MAAA,CAAC,EAAe,QAAQ,eAAe,CAAI,EAAG,EAAmB,CAAI,EAAG,EAAA,CAAsB,CACvG,CAAA,CACD,EAEK,EAAoB,EAAO,QAAQ,CACvC,KAAM,oBACN,KAAM,CAAC,GAAI,IACL,EAAK,QAAU,GACV,EAAkB,EAAK,EAAE,EAG3B,CAAC,EAAe,QAAQ,kBAAkB,CAAI,EAAG,GAAsB,CAChF,CACD,EAEK,EAAoB,EAAO,QAAQ,CACvC,KAAM,oBACN,KAAM,CAAC,GAAI,IACF,CAAC,EAAe,QAAQ,kBAAkB,CAAE,EAAG,GAAsB,CAC9E,CACD,EAEK,EAAsB,EAAO,MAAM,CACvC,KAAM,sBACN,KAAM,CAAC,CAAE,SAEA,AADO,EAAI,EAAA,CAAe,EACpB,OAAO,AAAC,GAAS,CAAC,EAAK,SAAS,CAC/C,CACD,EAEK,EAAyB,EAAO,MAAM,CAC1C,KAAM,yBACN,KAAM,CAAC,CAAE,SAEA,AADO,EAAI,EAAA,CAAe,EACpB,OAAO,AAAC,GAAS,EAAK,SAAS,CAC9C,CACD,EAEK,EAAuB,EAAO,MAAM,CACxC,KAAM,uBACN,KAAM,CAAC,CAAE,SAEA,AADO,EAAI,EAAA,CAAqB,EAC1B,MACf,CACD,EAEK,EAA0B,EAAO,MAAM,CAC3C,KAAM,0BACN,KAAM,CAAC,CAAE,SAEA,AADO,EAAI,EAAA,CAAwB,EAC7B,MACf,CACD,EAEK,EAAsB,EAAO,MAAM,CACvC,KAAM,sBACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAQ,EAAI,EAAA,CAAe,EAE7B,MAAA,GAAM,SAAW,EACZ,GAKF,AAFoB,EAAI,EAAA,CAAyB,IAE1B,EAAM,MACtC,CAAA,CACD,EAEK,EAAoB,EAAO,QAAQ,CACvC,KAAM,oBACN,KAAM,CAAC,CAAE,OAAO,IAAmB,CACjC,KAAM,GAAO,EAAI,EAAU,CAAE,CAAC,EACxB,EAAgB,OACjB,GADiB,CAEpB,UAAW,CAAC,EAAK,SAAA,GAGnB,MAAO,GAAkB,CAAO,CAClC,CAAA,CACD,EAEK,EAAmB,EAAO,QAAQ,CACtC,KAAM,mBACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAW,EAAI,EAAA,CAAe,EAEhC,GAAA,EAAS,SAAW,EACf,MAAA,MAIT,KAAM,GAAY,AADE,EAAI,EAAA,CAAsB,EACd,EAC1B,EAAc,EAAS,IAAI,AAAC,GAAU,OACvC,GADuC,CAE1C,WACA,EAAA,EAEF,MAAO,GAAmB,CAAW,CACvC,CAAA,CACD,EAEK,EAA2B,EAAO,QAAQ,CAC9C,KAAM,2BACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAW,EAAI,EAAA,CAAe,EAEhC,GAAA,EAAS,SAAW,EACf,MAAA,MAGT,KAAM,GAAc,EAAS,OAAO,AAAC,GAAS,CAAC,EAAK,SAAS,EAE7D,MAAO,GAAmB,CAAW,CACvC,CAAA,CACD,EAEW,SAAA,EAAQ,EAAqB,EACtC,SAAS,CAAoB,EAC7B,IAAI,CAAC,GAAI,IACD,EAAmB,CAAK,CAChC,EAEI,CACL,MAAO,CACL,YACA,mBACA,gBACA,sBACA,yBACA,uBACA,0BACA,qBACF,EACA,QAAS,CACP,qBACA,iBACA,oBACA,oBACA,oBACA,mBACA,0BACF,EACA,MAAO,CACL,uBACA,uBACA,oBACF,CAAA,CAEJ,CACF,CAAC,EC1NM,WACL,EACA,EACA,CAWO,MAVgB,AAAC,IAAiD,CACvE,KAAM,GAAU,MAAM,QAAQ,CAAI,EAAI,EAAO,CAAC,CAAI,EAClD,SAAW,KAAO,GAChB,AAAI,EAAM,IAAI,YAAkB,IAAA,EAAI,eAClC,GAAM,eAAe,EACrB,EAAS,EAAO,CAAG,EAEvB,CAIJ,CCRO,KAAMA,IAAa,IAAM,CACxBC,KAAAA,GAAOC,IACPC,EAAkBC,EAAgBC,EAAAA,CAAD,EACjCC,EAAiBF,EAAgBG,EAAAA,CAAD,EAEhCC,EAAYC,EAAeN,EAAgBO,MAAMC,eAAvB,CAAA,EAE1BC,EAAwB,AAACC,GAA+C,CAC5EZ,EAAKE,EAAgBW,QAAQC,oBAAoBF,EAAMG,OAAOC,KAAzD,CAAD,CAAA,EAGAC,EAAmBC,EAAmB,QAAS,IAAM,CACzDlB,EAAKK,EAAeQ,QAAQM,eAAeZ,CAAtC,CAAD,CAAA,CADqC,EAI5BF,UAAAA,EAAeO,MAAMQ,qBAAuBR,AAAU,GAAA,CACnES,MAAMT,EAAMU,MAAP,CAAA,CADO,IAKZ,SAAA,CAAQ,UAAU,SAChB,SAAA,CAAAC,EAAA,KAAA,CAAA,SAAA,OAAA,CAAA,EACAA,EAAA,QAAA,CACE,UAAU,WACV,YAAY,yBACZ,MAAOhB,EACP,SAAUI,EACV,UAAWM,CAAAA,CAPf,CAAA,CAAA,CADF,CAYD,ECjCY,GAAe,CAAI,EAA6B,IAAoC,CACzF,KAAA,GAAc,EAAO,MAAM,CAC/B,KAAM,GAAG,EAAQ,mBACjB,QAAS,EAAQ,OAAA,CAClB,EAEK,EAAc,EAAO,MAAM,CAC/B,KAAM,GAAG,EAAQ,mBACjB,KAAM,CAAC,CAAE,SAAU,EAAI,GAAa,CAAA,CACrC,EAEK,EAAgB,EAAO,QAAQ,CACnC,KAAM,GAAG,EAAQ,qBACjB,KAAM,CAAC,GAAI,IACF,EAAc,EAAA,IAAI,CAAO,CAClC,CACD,EAEK,EAAe,EAAO,QAAQ,CAClC,KAAM,GAAG,EAAQ,oBACjB,KAAM,CAAC,KACE,EAAY,EAAE,IAAI,EAAQ,OAAO,CAC1C,CACD,EAED,MAAO,GAAO,OAAO,CACnB,MAAO,CACL,aACF,EACA,QAAS,CACP,gBACA,cACF,CAAA,CACD,CACH,ECpCa,GAA0B,6BAI1B,GAAqB,AAAC,GAA0C,CAC3E,GAAI,IAAU,OACL,MAAA,MAGD,OAAA,OACD,UACA,aACA,YACI,MAAA,WAEA,MAAA,MAEb,EAEa,EAAmB,EAAO,OAAO,CAC5C,KAAM,mBACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAmB,GAAyB,EAAQ,CACxD,KAAM,aACN,QAAS,KAAA,CACV,EAEK,EAAyB,EAAO,MAAkB,CACtD,KAAM,wBAAA,CACP,EAEK,EAAkB,EAAiB,MAAM,YAEzC,EAAmB,EAAO,QAAQ,CACtC,KAAM,mBACN,KAAM,CAAC,GAAI,IAAkB,CACrB,KAAA,GAAS,GAAmB,CAAK,EAEhC,MAAA,CAAC,EAAiB,QAAQ,cAAc,CAAM,EAAG,EAAuB,CAAM,CAAC,CACxF,CAAA,CACD,EAEW,SAAA,EAAQ,EAAuB,EACxC,SAAS,CAAsB,EAC/B,IAAI,CAAC,GAAI,IACD,EAAiB,CAAK,CAC9B,EAEI,CACL,MAAO,CACL,iBACF,EACA,QAAS,CACP,kBACF,EACA,MAAO,CACL,wBACF,CAAA,CAEJ,CACF,CAAC,ECzDY,GAAgB,EAAO,OAAO,CACzC,KAAM,gBACN,KAAM,AAAC,GAAW,CAChB,KAAM,GAAa,EAAO,UAAU,EAAiB,CAAA,EAC/C,EAAW,EAAO,UAAU,EAAgB,CAAA,EAC5C,EAAa,EAAO,UAAU,EAAkB,CAAA,EAEhD,EAA2B,EAAO,MAAM,CAC5C,KAAM,2BACN,KAAM,CAAC,CAAE,SAAU,CACjB,KAAM,GAAS,EAAI,EAAW,MAAM,gBAAiB,CAAA,EAErD,GAAI,IAAW,MACb,MAAO,GAAI,EAAS,MAAM,eAAe,EAAE,IAAI,CAAS,EAG1D,GAAI,IAAW,SACb,MAAO,GAAI,EAAS,MAAM,qBAAqB,EAAE,IAAI,CAAS,EAGhE,GAAI,IAAW,YACb,MAAO,GAAI,EAAS,MAAM,wBAAwB,EAAE,IAAI,CAAS,EAG7D,KAAA,IAAI,OAAM,mBAAmB,GAAQ,CAC7C,CAAA,CACD,EAED,SAAO,OAAO,CACZ,KAAM,oCACN,KAAM,CAAC,CAAE,YAAW,SACX,EAAU,EAAS,MAAM,kBAAkB,EAAE,KAClD,GAAO,AAAC,GAEC,AADW,EAAI,EAAW,MAAM,eAAgB,CAAA,IAClC,EAAK,KAC3B,EACD,EAAI,IACK,EAAW,QAAQ,uBAC3B,CACH,CACF,CACD,EAEM,CACL,MAAO,CACL,0BACF,CAAA,CAEJ,CACF,CAAC,ECvDM,YAAyB,EAAsB,CACpD,KAAM,CAAC,EAAO,GAAYO,EAAA,QAAA,SAAS,CAAY,EAEzC,EAAWC,sBAAY,AAAC,GAA+C,CAClE,EAAA,EAAM,OAAO,KAAK,CAC7B,EAAG,CAAE,CAAA,EAEE,MAAA,CAAC,EAAO,EAAU,CAAQ,CACnC,CCEO,YAAkBC,EAAsB,CACvC1B,KAAAA,GAAOC,IACPI,EAAiBF,EAAgBG,EAAAA,CAAD,EAEhCqB,EAAOnB,EAAeH,EAAeI,MAAMmB,UAAUF,EAAMG,EAArC,CAAD,EAErB,CAACC,EAASC,GAAcP,EAAAA,QAAAA,SAAS,EAAD,EAEhC,CAACQ,EAAOC,GAAqBC,GAAgBP,EAAKK,KAAN,EAE5CG,EAAO,IAAM,CACZ9B,EAAAA,EAAeQ,QAAQuB,kBAAkB,OAAKT,GAAL,CAAWK,OAApD,EAAA,CAAD,EACJD,EAAW,EAAD,CAAA,EAGNM,EAAcnB,EAAmB,CAAC,QAAS,QAAV,EAAqB,IAAM,CAC5D,GAAA,CADgC,EAIhCoB,EAAmB,IAAM,CAC7BP,EAAW,EAAD,CAAA,EAGNQ,EAAa,IAAM,CACvBvC,EAAKK,EAAeQ,QAAQ2B,kBAAkBb,EAAKE,EAA9C,CAAD,CAAA,EAGAY,EAAe,IAAM,CACzBzC,EAAKK,EAAeQ,QAAQ6B,kBAAkBf,EAAKE,EAA9C,CAAD,CAAA,EAGAc,EAAa,IAAM,CACnB,GAAA,EAGAC,EAAWC,iBAAyB,IAAnB,EAEvBC,SAAAA,QAAAA,UAAU,IAAM,OACd,AAAIhB,GACFc,MAASG,UAATH,QAAkBI,QACnB,EACA,CAAClB,CAAD,CAJM,IAOP,KAAA,CAAI,UAAY,GAAEA,GAAW,aAAaH,EAAKsB,WAAa,cAC1D,SAAA,CAAAC,EAAA,MAAA,CAAK,UAAU,OACb,SAAA,CAAA3B,EAAA,QAAA,CAAO,KAAK,WAAW,UAAU,SAAS,QAASI,EAAKsB,UAAW,SAAUV,CAAAA,CAA7E,EACAhB,EAAA,QAAA,CAAO,cAAee,EAAtB,SAAyCX,EAAKK,KAAAA,CAA9C,EACAT,EAAA,SAAA,CAAQ,UAAU,UAAU,QAASkB,CAAAA,CAHvC,CAAA,CAAA,CADF,EAMGX,GACCP,EAAA,QAAA,CACE,IAAKqB,EACL,UAAU,OACV,MAAOZ,EACP,SAAUC,EACV,UAAWI,EACX,OAAQM,CAAAA,CAbd,CAAA,CAAA,CADF,CAmBD,CCnEM,KAAMQ,IAAW,IAAM,CACtBC,KAAAA,GAAgBjD,EAAgBkD,GAAAA,CAAD,EAC/BC,EAAsB9C,EAAe4C,EAAc3C,MAAM8C,yBAArB,CAAA,EAE1CC,eAAQC,IAAI,aAAZ,IAGE,UAAA,CAAS,UAAU,OACjB,SAAA,CAAClC,EAAA,GAAD,CAAA,CAAA,IACA,KAAA,CAAI,UAAU,YAAd,SACG+B,EAAoBI,IAAKC,AAAAA,KACvB,GAAD,CAAuB,GAAIA,CAA3B,EAAeA,CAAf,CADD,CAAA,CAHL,CAAA,CAAA,CADF,CAUD,EAEKC,GAAiB,IAAM,CACrB5D,KAAAA,GAAOC,IACPI,EAAiBF,EAAgBG,EAAAA,CAAD,EAChCuD,EAAiBrD,EAAeH,EAAeI,MAAMqD,oBAAtB,CAAA,EAMnC,SAAAC,GAAA,CACE,SAAA,CAAAxC,EAAA,QAAA,CACE,GAAG,aACH,KAAK,WACL,UAAU,aACV,QAASsC,EACT,SAVkB,IAAM,CACvBxD,EAAAA,EAAeQ,QAAQmD,iBAAxB,CAAA,CAAA,CASUC,CALZ,EAOA1C,EAAA,QAAA,CAAO,QAAQ,YAAA,CARjB,CAAA,CAAA,CADF,CAYD,ECrCY2C,GAAa,IAAM,CACxBlE,KAAAA,GAAOC,IACPI,EAAiBF,EAAgBG,EAAAA,CAAD,EAChC6D,EAAmBhE,EAAgBiE,EAAAA,CAAD,EAElCC,EAAa7D,EAAe2D,EAAiB1D,MAAM6D,gBAAxB,CAAA,EAC3BC,EAAkB/D,EAAeH,EAAeI,MAAM+D,qBAAtB,CAAA,EAGhCC,EAAeC,AAFMlE,EAAeH,EAAeI,MAAMkE,wBAAtB,CAAA,EAEC,EAEpCC,EAAuB,IAAM,CAC5BvE,EAAAA,EAAeQ,QAAQgE,yBAAxB,CAAA,CAAA,EAGAC,EAAe,AAACC,GACbA,EAAQC,SAAW,WAAa,GAGnCC,EAASC,KAEfpC,SAAAA,QAAAA,UAAU,IAAM,OACRqC,KAAAA,GAASF,KAAOE,SAAPF,OAAiB,MAC5BE,AAAAA,IAAWd,GACbrE,EAAKmE,EAAiBtD,QAAQuE,iBAAiBD,CAA1C,CAAD,CACL,EACA,CAACF,EAAQZ,CAAT,CALM,IAQP,SAAA,CAAQ,UAAU,SAChB,SAAA,CAAAnB,EAAA,OAAA,CAAM,UAAU,aACd,SAAA,CAAA3B,EAAA,SAAA,CAASgD,SAAAA,CAAT,CAAA,EAAwCA,QAAAA,IAAoB,GAAK,IADnE,OAAA,CAAA,CAAA,EAGArB,EAAA,KAAA,CAAI,UAAU,UACZ,SAAA,CAAA3B,EAAA,KAAA,CAAA,WACG,EAAD,CAAS,GAAG,IAAI,UAAWuD,EAA3B,SAAA,KAAA,CAAA,CAAA,CADF,EAKAvD,EAAA,KAAA,CAAA,WACG,EAAD,CAAS,GAAG,UAAU,UAAWuD,EAAjC,SAAA,QAAA,CAAA,CAAA,CADF,EAKAvD,EAAA,KAAA,CAAA,WACG,EAAD,CAAS,GAAG,aAAa,UAAWuD,EAApC,SAAA,WAAA,CAAA,CAAA,CAZJ,CAAA,CAAA,CAJF,EAqBGL,GACClD,EAAA,SAAA,CAAQ,UAAU,kBAAkB,QAASqD,EAA7C,SAAA,iBAAA,CAtBJ,CAAA,CAAA,CADF,CA6BD,EC3DYS,EAAU,MAEnB,MAAA,CAAK,UAAU,UACb,SAAA,CAAA9D,EAAC,GAAD,CAAA,CAAA,EACAA,EAAC,GAFH,CAAA,CAAA,EAGEA,EAAC,GAHH,CAAA,CAAA,CAAA,CAAA,CADF,ECMI+D,EAAYC,SAASC,eAAe,MAAxB,EAElB,GAAIF,EAAW,CACPG,KAAAA,GAAOC,GAA0BJ,CAA1B,EACPK,EAAQC,EAAOD,MAAM,CACzBE,QAAS,CAACC,EAAD,EACTC,WAAY,CAACC,KAAuBC,IAAxB,CAAA,CAFA,EAKTC,EAAAA,SACFC,qBAAD,CAAA,WACG,GAAD,CAAY,QAAZ,WACG,GAAD,CAAY,SAAS,IAArB,WACG,GAAD,CAAA,SAAA,CACE5E,EAAC,EAAD,CAAO,KAAK,IAAI,QAASA,EAAC,EAAD,EAAA,CAAA,CAD3B,EAEEA,EAAC,EAAD,CAAO,KAAK,WAAW,QAASA,EAAC,EAAD,EAAA,CAAA,CAFlC,CAAA,CAAA,CAAA,CAAA,CADF,CAAA,CADF,CADF,CAAA,CADF,EAcA6E,OAAOX,KAAOA,CACf"}