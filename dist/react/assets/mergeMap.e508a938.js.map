{"version":3,"file":"mergeMap.e508a938.js","sources":["../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js","../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"],"sourcesContent":["import { innerFrom } from '../observable/innerFrom';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n        if (isComplete && !buffer.length && !active) {\n            subscriber.complete();\n        }\n    };\n    var outerNext = function (value) { return (active < concurrent ? doInnerSub(value) : buffer.push(value)); };\n    var doInnerSub = function (value) {\n        expand && subscriber.next(value);\n        active++;\n        var innerComplete = false;\n        innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function (innerValue) {\n            onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n            if (expand) {\n                outerNext(innerValue);\n            }\n            else {\n                subscriber.next(innerValue);\n            }\n        }, function () {\n            innerComplete = true;\n        }, undefined, function () {\n            if (innerComplete) {\n                try {\n                    active--;\n                    var _loop_1 = function () {\n                        var bufferedValue = buffer.shift();\n                        if (innerSubScheduler) {\n                            executeSchedule(subscriber, innerSubScheduler, function () { return doInnerSub(bufferedValue); });\n                        }\n                        else {\n                            doInnerSub(bufferedValue);\n                        }\n                    };\n                    while (buffer.length && active < concurrent) {\n                        _loop_1();\n                    }\n                    checkComplete();\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }\n        }));\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, outerNext, function () {\n        isComplete = true;\n        checkComplete();\n    }));\n    return function () {\n        additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n}\n//# sourceMappingURL=mergeInternals.js.map","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    if (isFunction(resultSelector)) {\n        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });\n}\n//# sourceMappingURL=mergeMap.js.map"],"names":[],"mappings":"8EAGO,WAAwB,EAAQ,EAAY,EAAS,EAAY,EAAc,EAAQ,EAAmB,EAAqB,CAClI,GAAI,GAAS,CAAA,EACT,EAAS,EACT,EAAQ,EACR,EAAa,GACb,EAAgB,UAAY,CAC5B,AAAI,GAAc,CAAC,EAAO,QAAU,CAAC,GACjC,EAAW,SAAQ,CAE/B,EACQ,EAAY,SAAU,EAAO,CAAE,MAAQ,GAAS,EAAa,EAAW,CAAK,EAAI,EAAO,KAAK,CAAK,CAAG,EACrG,EAAa,SAAU,EAAO,CAC9B,GAAU,EAAW,KAAK,CAAK,EAC/B,IACA,GAAI,GAAgB,GACpB,EAAU,EAAQ,EAAO,GAAO,CAAC,EAAE,UAAU,EAAyB,EAAY,SAAU,EAAY,CACpG,GAAiB,MAA2C,EAAa,CAAU,EACnF,AAAI,EACA,EAAU,CAAU,EAGpB,EAAW,KAAK,CAAU,CAE1C,EAAW,UAAY,CACX,EAAgB,EACnB,EAAE,OAAW,UAAY,CACtB,GAAI,EACA,GAAI,CACA,IAUA,OATI,GAAU,UAAY,CACtB,GAAI,GAAgB,EAAO,QAC3B,AAAI,EACA,EAAgB,EAAY,EAAmB,UAAY,CAAE,MAAO,GAAW,CAAa,CAAE,CAAE,EAGhG,EAAW,CAAa,CAEpD,EAC2B,EAAO,QAAU,EAAS,GAC7B,IAEJ,GACH,OACM,EAAP,CACI,EAAW,MAAM,CAAG,CACvB,CAER,CAAA,CAAC,CACV,EACI,SAAO,UAAU,EAAyB,EAAY,EAAW,UAAY,CACzE,EAAa,GACb,GACH,CAAA,CAAC,EACK,UAAY,CACf,GAAwB,MAAkD,GAClF,CACA,CCtDO,WAAkB,EAAS,EAAgB,EAAY,CAE1D,MADI,KAAe,QAAU,GAAa,KACtC,EAAW,CAAc,EAClB,EAAS,SAAU,EAAG,EAAG,CAAE,MAAO,GAAI,SAAU,EAAG,EAAI,CAAE,MAAO,GAAe,EAAG,EAAG,EAAG,CAAE,EAAI,EAAE,EAAU,EAAQ,EAAG,CAAC,CAAC,CAAC,CAAI,EAAE,CAAU,EAE1I,OAAO,IAAmB,UAC/B,GAAa,GAEV,EAAQ,SAAU,EAAQ,EAAY,CAAE,MAAO,GAAe,EAAQ,EAAY,EAAS,CAAU,CAAI,CAAA,EACpH"}