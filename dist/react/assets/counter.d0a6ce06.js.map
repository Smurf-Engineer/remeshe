{"version":3,"file":"counter.d0a6ce06.js","sources":["../../../projects/react-demos/src/others/counter.tsx"],"sourcesContent":["import React from 'react'\n\nimport { Remesh } from 'remesh'\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\n\nconst delay = (ms: number) => new Promise<void>((resolve) => setTimeout(resolve, ms))\n\nconst CounterDomain = Remesh.domain({\n  name: 'counter',\n  impl: (domain) => {\n    const CountState = domain.state({\n      name: 'CountState',\n      default: 0,\n    })\n\n    const CountIncreQuery = domain.query({\n      name: 'CountIncreQuery',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return count + 1\n      },\n    })\n\n    const CountDecreQuery = domain.query({\n      name: 'CountDecreQuery',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return count - 1\n      },\n    })\n\n    const CountDoubleQuery = domain.query({\n      name: 'CountDoubleQuery',\n      impl: ({ get }) => {\n        const incredCount = get(CountIncreQuery())\n        const decredCount = get(CountDecreQuery())\n        return 2 * (incredCount + decredCount)\n      },\n    })\n\n    const countQuery = domain.query({\n      name: 'CountQuery',\n      impl: ({ get }) => {\n        const [incre, decre, double] = [get(CountIncreQuery()), get(CountDecreQuery()), get(CountDoubleQuery())]\n        return { incre, decre, double }\n      },\n    })\n\n    const incre = domain.command({\n      name: 'incre',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return CountState().new(count + 1)\n      },\n    })\n\n    const decre = domain.command({\n      name: 'decre',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return CountState().new(count - 1)\n      },\n    })\n\n    return {\n      query: {\n        count: countQuery,\n      },\n      command: {\n        incre,\n        decre,\n      },\n    }\n  },\n})\n\nexport default () => {\n  const counterDomain = useRemeshDomain(CounterDomain())\n\n  const count = useRemeshQuery(counterDomain.query.count())\n\n  return (\n    <div>\n      <h2>Counter</h2>\n      <button onClick={() => counterDomain.command.incre()}>Increment</button>{' '}\n      <button onClick={() => counterDomain.command.decre()}>Decrement</button>\n      <div>\n        <h3>Count Query</h3>\n        <pre>{JSON.stringify(count, null, 2)}</pre>\n      </div>\n    </div>\n  )\n}\n"],"names":["CounterDomain","Remesh","domain","name","impl","CountState","state","default","CountIncreQuery","query","get","count","CountDecreQuery","CountDoubleQuery","incredCount","decredCount","countQuery","incre","decre","double","command","new","counterDomain","useRemeshDomain","useRemeshQuery","_jsx","_jsxs","JSON","stringify"],"mappings":"mHAOA,KAAMA,GAAgBC,EAAOC,OAAO,CAClCC,KAAM,UACNC,KAAOF,AAAW,GAAA,CACVG,KAAAA,GAAaH,EAAOI,MAAM,CAC9BH,KAAM,aACNI,QAAS,CAAA,CAFQ,EAKbC,EAAkBN,EAAOO,MAAM,CACnCN,KAAM,kBACNC,KAAM,CAAC,CAAEM,SAEAC,AADOD,EAAIL,EAAAA,CAAD,EACF,CAChB,CALqB,EAQlBO,EAAkBV,EAAOO,MAAM,CACnCN,KAAM,kBACNC,KAAM,CAAC,CAAEM,SAEAC,AADOD,EAAIL,EAAAA,CAAD,EACF,CAChB,CALqB,EAQlBQ,EAAmBX,EAAOO,MAAM,CACpCN,KAAM,mBACNC,KAAM,CAAC,CAAEM,SAAU,CACXI,KAAAA,GAAcJ,EAAIF,EAAAA,CAAD,EACjBO,EAAcL,EAAIE,EAAAA,CAAD,EACvB,MAAO,GAAmBG,GAAAA,EAC3B,CAAA,CANsB,EASnBC,EAAad,EAAOO,MAAM,CAC9BN,KAAM,aACNC,KAAM,CAAC,CAAEM,SAAU,CACX,KAAA,CAACO,EAAOC,EAAOC,GAAU,CAACT,EAAIF,EAAe,CAAhB,EAAqBE,EAAIE,GAAD,EAAqBF,EAAIG,EAAAA,CAAD,CAApD,EACxB,MAAA,CAAEI,MAAAA,EAAOC,MAAAA,EAAOC,QAAAA,CACxB,CAAA,CALgB,EAQbF,EAAQf,EAAOkB,QAAQ,CAC3BjB,KAAM,QACNC,KAAM,CAAC,CAAEM,SAAU,CACXC,KAAAA,GAAQD,EAAIL,EAAAA,CAAD,EACjB,MAAOA,GAAagB,EAAAA,IAAIV,EAAQ,CAAzB,CACR,CAAA,CALW,EAQRO,EAAQhB,EAAOkB,QAAQ,CAC3BjB,KAAM,QACNC,KAAM,CAAC,CAAEM,SAAU,CACXC,KAAAA,GAAQD,EAAIL,EAAAA,CAAD,EACjB,MAAOA,GAAagB,EAAAA,IAAIV,EAAQ,CAAzB,CACR,CAAA,CALW,EAQP,MAAA,CACLF,MAAO,CACLE,MAAOK,CAFJ,EAILI,QAAS,CACPH,QACAC,OAFO,CAAA,CAKZ,CAlEiC,CAAd,EAqEtB,GAAA,GAAe,IAAM,CACbI,KAAAA,GAAgBC,EAAgBvB,EAAAA,CAAD,EAE/BW,EAAQa,EAAeF,EAAcb,MAAME,MAArB,CAAA,EAG1B,SAAA,MAAA,CACE,SAAA,CAAAc,EAAA,KAAA,CAAA,SAAA,SAAA,CAAA,EACAA,EAAA,SAAA,CAAQ,QAAS,IAAMH,EAAcF,QAAQH,MAA7C,EAAA,SAAA,WAAA,CAFF,EAE2E,IACzEQ,EAAA,SAAA,CAAQ,QAAS,IAAMH,EAAcF,QAAQF,MAA7C,EAAA,SAAA,WAAA,CAAA,EACAQ,EAAA,MAAA,CACE,SAAA,CAAAD,EAAA,KAAA,CAAA,SAAA,aAAA,CAAA,EACAA,EAAA,MAAA,CAAME,SAAAA,KAAKC,UAAUjB,EAAO,KAAM,CAA5B,CAAA,CAFR,CAAA,CAAA,CAJF,CAAA,CAAA,CADF,CAWD"}