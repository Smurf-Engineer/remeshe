{"version":3,"file":"counter.0f07f8fc.js","sources":["../../../projects/react-demos/src/others/counter.tsx"],"sourcesContent":["import React from 'react'\r\n\r\nimport { Remesh } from 'remesh'\r\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\r\n\r\nconst delay = (ms: number) => new Promise<void>((resolve) => setTimeout(resolve, ms))\r\n\r\nconst CounterDomain = Remesh.domain({\r\n  name: 'counter',\r\n  impl: (domain) => {\r\n    const CountState = domain.state({\r\n      name: 'CountState',\r\n      default: 0,\r\n    })\r\n\r\n    const CountIncreQuery = domain.query({\r\n      name: 'CountIncreQuery',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return count + 1\r\n      },\r\n    })\r\n\r\n    const CountDecreQuery = domain.query({\r\n      name: 'CountDecreQuery',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return count - 1\r\n      },\r\n    })\r\n\r\n    const CountDoubleQuery = domain.query({\r\n      name: 'CountDoubleQuery',\r\n      impl: ({ get }) => {\r\n        const incredCount = get(CountIncreQuery())\r\n        const decredCount = get(CountDecreQuery())\r\n        return 2 * (incredCount + decredCount)\r\n      },\r\n    })\r\n\r\n    const CountInfoQuery = domain.query({\r\n      name: 'CountInfoQuery',\r\n      impl: ({ get }) => {\r\n        const [incre, decre, double] = [get(CountIncreQuery()), get(CountDecreQuery()), get(CountDoubleQuery())]\r\n        return { incre, decre, double }\r\n      },\r\n    })\r\n\r\n    const IncreCommand = domain.command({\r\n      name: 'IncreCommand',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return CountState().new(count + 1)\r\n      },\r\n    })\r\n\r\n    const DecreCommand = domain.command({\r\n      name: 'DecreCommand',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return CountState().new(count - 1)\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        CountInfoQuery: CountInfoQuery,\r\n      },\r\n      command: {\r\n        IncreCommand: IncreCommand,\r\n        DecreCommand: DecreCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n\r\nexport default () => {\r\n  const counterDomain = useRemeshDomain(CounterDomain())\r\n\r\n  const countInfo = useRemeshQuery(counterDomain.query.CountInfoQuery())\r\n\r\n  return (\r\n    <div>\r\n      <h2>Counter</h2>\r\n      <button onClick={() => counterDomain.command.IncreCommand()}>Increment</button>{' '}\r\n      <button onClick={() => counterDomain.command.DecreCommand()}>Decrement</button>\r\n      <div>\r\n        <h3>Count Query</h3>\r\n        <pre>{JSON.stringify(countInfo, null, 2)}</pre>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["CounterDomain","Remesh","domain","name","impl","CountState","state","default","CountIncreQuery","query","get","count","CountDecreQuery","CountDoubleQuery","incredCount","decredCount","CountInfoQuery","incre","decre","double","IncreCommand","command","new","DecreCommand","counterDomain","useRemeshDomain","countInfo","useRemeshQuery","_jsx","_jsxs","JSON","stringify"],"mappings":"mHAOA,KAAMA,GAAgBC,EAAOC,OAAO,CAClCC,KAAM,UACNC,KAAOF,AAAW,GAAA,CACVG,KAAAA,GAAaH,EAAOI,MAAM,CAC9BH,KAAM,aACNI,QAAS,CAAA,CAFQ,EAKbC,EAAkBN,EAAOO,MAAM,CACnCN,KAAM,kBACNC,KAAM,CAAC,CAAEM,SAEAC,AADOD,EAAIL,EAAAA,CAAD,EACF,CAChB,CALqB,EAQlBO,EAAkBV,EAAOO,MAAM,CACnCN,KAAM,kBACNC,KAAM,CAAC,CAAEM,SAEAC,AADOD,EAAIL,EAAAA,CAAD,EACF,CAChB,CALqB,EAQlBQ,EAAmBX,EAAOO,MAAM,CACpCN,KAAM,mBACNC,KAAM,CAAC,CAAEM,SAAU,CACXI,KAAAA,GAAcJ,EAAIF,EAAAA,CAAD,EACjBO,EAAcL,EAAIE,EAAAA,CAAD,EACvB,MAAO,GAAmBG,GAAAA,EAC3B,CAAA,CANsB,EASnBC,EAAiBd,EAAOO,MAAM,CAClCN,KAAM,iBACNC,KAAM,CAAC,CAAEM,SAAU,CACX,KAAA,CAACO,EAAOC,EAAOC,GAAU,CAACT,EAAIF,EAAe,CAAhB,EAAqBE,EAAIE,GAAD,EAAqBF,EAAIG,EAAAA,CAAD,CAApD,EACxB,MAAA,CAAEI,QAAOC,QAAOC,QAAAA,CACxB,CAAA,CALoB,EAQjBC,EAAelB,EAAOmB,QAAQ,CAClClB,KAAM,eACNC,KAAM,CAAC,CAAEM,SAAU,CACXC,KAAAA,GAAQD,EAAIL,EAAAA,CAAD,EACjB,MAAOA,GAAaiB,EAAAA,IAAIX,EAAQ,CAAzB,CACR,CAAA,CALkB,EAQfY,EAAerB,EAAOmB,QAAQ,CAClClB,KAAM,eACNC,KAAM,CAAC,CAAEM,SAAU,CACXC,KAAAA,GAAQD,EAAIL,EAAAA,CAAD,EACjB,MAAOA,GAAaiB,EAAAA,IAAIX,EAAQ,CAAzB,CACR,CAAA,CALkB,EAQd,MAAA,CACLF,MAAO,CACLO,gBAFG,EAILK,QAAS,CACPD,eACAG,cAFO,CAAA,CAKZ,CAlEiC,CAAd,EAqEtB,GAAA,GAAe,IAAM,CACbC,KAAAA,GAAgBC,EAAgBzB,EAAAA,CAAD,EAE/B0B,EAAYC,EAAeH,EAAcf,MAAMO,eAArB,CAAA,EAG9B,SAAA,MAAA,CACE,SAAA,CAAAY,EAAA,KAAA,CAAA,SAAA,SAAA,CAAA,EACAA,EAAA,SAAA,CAAQ,QAAS,IAAMJ,EAAcH,QAAQD,aAA7C,EAAA,SAAA,WAAA,CAFF,EAEkF,IAChFQ,EAAA,SAAA,CAAQ,QAAS,IAAMJ,EAAcH,QAAQE,aAA7C,EAAA,SAAA,WAAA,CAAA,EACAM,EAAA,MAAA,CACE,SAAA,CAAAD,EAAA,KAAA,CAAA,SAAA,aAAA,CAAA,EACAA,EAAA,MAAA,CAAME,SAAAA,KAAKC,UAAUL,EAAW,KAAM,CAAhC,CAAA,CAFR,CAAA,CAAA,CAJF,CAAA,CAAA,CADF,CAWD"}