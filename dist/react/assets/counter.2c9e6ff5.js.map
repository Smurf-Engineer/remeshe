{"version":3,"file":"counter.2c9e6ff5.js","sources":["../../../projects/domains/src/others/counter.ts","../../../projects/react-demos/src/others/counter.tsx"],"sourcesContent":["import { Remesh } from 'remesh'\n\nexport const CounterDomain = Remesh.domain({\n  name: 'CounterDomain',\n  impl: (domain) => {\n    const CountState = domain.state({\n      name: 'CountState',\n      default: 0,\n    })\n\n    const CountIncreQuery = domain.query({\n      name: 'CountIncreQuery',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return count + 1\n      },\n    })\n\n    const CountDecreQuery = domain.query({\n      name: 'CountDecreQuery',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return count - 1\n      },\n    })\n\n    const CountDoubleQuery = domain.query({\n      name: 'CountDoubleQuery',\n      impl: ({ get }) => {\n        const incredCount = get(CountIncreQuery())\n        const decredCount = get(CountDecreQuery())\n        return 2 * (incredCount + decredCount)\n      },\n    })\n\n    const CountInfoQuery = domain.query({\n      name: 'CountInfoQuery',\n      impl: ({ get }) => {\n        const [incre, decre, double] = [get(CountIncreQuery()), get(CountDecreQuery()), get(CountDoubleQuery())]\n        return { incre, decre, double }\n      },\n    })\n\n    const IncreCommand = domain.command({\n      name: 'IncreCommand',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return CountState().new(count + 1)\n      },\n    })\n\n    const DecreCommand = domain.command({\n      name: 'DecreCommand',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return CountState().new(count - 1)\n      },\n    })\n\n    return {\n      query: {\n        CountInfoQuery,\n      },\n      command: {\n        IncreCommand,\n        DecreCommand,\n      },\n    }\n  },\n})\n","import { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { CounterDomain } from 'remesh-domains-for-demos/dist/others/counter'\n\nexport default () => {\n  const send = useRemeshSend()\n  const counterDomain = useRemeshDomain(CounterDomain())\n\n  const countInfo = useRemeshQuery(counterDomain.query.CountInfoQuery())\n\n  return (\n    <div>\n      <h2>Counter</h2>\n      <button onClick={() => send(counterDomain.command.IncreCommand())}>Increment</button>{' '}\n      <button onClick={() => send(counterDomain.command.DecreCommand())}>Decrement</button>\n      <div>\n        <h3>Count Query</h3>\n        <pre>{JSON.stringify(countInfo, null, 2)}</pre>\n      </div>\n    </div>\n  )\n}\n"],"names":["CounterDomain","Remesh","domain","CountState","CountIncreQuery","get","CountDecreQuery","CountDoubleQuery","incredCount","decredCount","CountInfoQuery","incre","decre","double","IncreCommand","count","DecreCommand","counter","send","useRemeshSend","counterDomain","useRemeshDomain","countInfo","useRemeshQuery","query","_jsx","command","_jsxs","JSON","stringify"],"mappings":"yHAEa,MAAAA,EAAgBC,EAAO,OAAO,CACzC,KAAM,gBACN,KAAOC,GAAW,CACV,MAAAC,EAAaD,EAAO,MAAM,CAC9B,KAAM,aACN,QAAS,CAAA,CACV,EAEKE,EAAkBF,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,IAAAG,KACOA,EAAIF,EAAA,CAAY,EACf,CACjB,CACD,EAEKG,EAAkBJ,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,IAAAG,KACOA,EAAIF,EAAA,CAAY,EACf,CACjB,CACD,EAEKI,EAAmBL,EAAO,MAAM,CACpC,KAAM,mBACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACX,MAAAG,EAAcH,EAAID,EAAA,CAAiB,EACnCK,EAAcJ,EAAIC,EAAA,CAAiB,EACzC,MAAO,IAAKE,EAAcC,EAC5B,CAAA,CACD,EAEKC,EAAiBR,EAAO,MAAM,CAClC,KAAM,iBACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACjB,KAAM,CAACM,EAAOC,EAAOC,CAAM,EAAI,CAACR,EAAID,EAAA,CAAiB,EAAGC,EAAIC,EAAgB,CAAC,EAAGD,EAAIE,EAAA,CAAkB,CAAC,EAChG,MAAA,CAAE,MAAAI,EAAO,MAAAC,EAAO,OAAAC,EACzB,CAAA,CACD,EAEKC,EAAeZ,EAAO,QAAQ,CAClC,KAAM,eACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACX,MAAAU,EAAQV,EAAIF,EAAA,CAAY,EAC9B,OAAOA,EAAW,EAAE,IAAIY,EAAQ,CAAC,CACnC,CAAA,CACD,EAEKC,EAAed,EAAO,QAAQ,CAClC,KAAM,eACN,KAAM,CAAC,CAAE,IAAAG,KAAU,CACX,MAAAU,EAAQV,EAAIF,EAAA,CAAY,EAC9B,OAAOA,EAAW,EAAE,IAAIY,EAAQ,CAAC,CACnC,CAAA,CACD,EAEM,MAAA,CACL,MAAO,CACL,eAAAL,CACF,EACA,QAAS,CACP,aAAAI,EACA,aAAAE,CACF,CAAA,CAEJ,CACF,CAAC,ECjED,IAAAC,EAAe,IAAM,CACnB,MAAMC,EAAOC,IACPC,EAAgBC,EAAgBrB,EAAAA,CAAD,EAE/BsB,EAAYC,EAAeH,EAAcI,MAAMd,eAArB,CAAA,EAEhC,SACE,MAAA,CAAA,SACE,CAAAe,EAAA,KAAA,CAAA,SAAA,SAAA,CAAA,EACAA,EAAA,SAAA,CAAQ,QAAS,IAAMP,EAAKE,EAAcM,QAAQZ,cAAvB,EAA3B,SAAA,WAAA,CAFF,EAEwF,IACtFW,EAAA,SAAA,CAAQ,QAAS,IAAMP,EAAKE,EAAcM,QAAQV,cAAvB,EAA3B,SAAA,WAAA,CAAA,EACAW,EAAA,MAAA,CAAA,SACE,CAAAF,EAAA,KAAA,CAAA,SAAA,aAAA,CAAA,EACAA,EAAA,MAAA,CAAA,SAAMG,KAAKC,UAAUP,EAAW,KAAM,CAAhC,CAAA,CAFR,CAAA,CAAA,CAJF,CAAA,CAAA,CADF,CAWD"}