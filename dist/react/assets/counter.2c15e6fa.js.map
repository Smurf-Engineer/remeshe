{"version":3,"file":"counter.2c15e6fa.js","sources":["../../../projects/domains/src/others/counter.ts","../../../projects/react-demos/src/others/counter.tsx"],"sourcesContent":["import { Remesh } from 'remesh'\r\n\r\nexport const CounterDomain = Remesh.domain({\r\n  name: 'CounterDomain',\r\n  impl: (domain) => {\r\n    const CountState = domain.state({\r\n      name: 'CountState',\r\n      default: 0,\r\n    })\r\n\r\n    const CountIncreQuery = domain.query({\r\n      name: 'CountIncreQuery',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return count + 1\r\n      },\r\n    })\r\n\r\n    const CountDecreQuery = domain.query({\r\n      name: 'CountDecreQuery',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return count - 1\r\n      },\r\n    })\r\n\r\n    const CountDoubleQuery = domain.query({\r\n      name: 'CountDoubleQuery',\r\n      impl: ({ get }) => {\r\n        const incredCount = get(CountIncreQuery())\r\n        const decredCount = get(CountDecreQuery())\r\n        return 2 * (incredCount + decredCount)\r\n      },\r\n    })\r\n\r\n    const CountInfoQuery = domain.query({\r\n      name: 'CountInfoQuery',\r\n      impl: ({ get }) => {\r\n        const [incre, decre, double] = [get(CountIncreQuery()), get(CountDecreQuery()), get(CountDoubleQuery())]\r\n        return { incre, decre, double }\r\n      },\r\n    })\r\n\r\n    const IncreCommand = domain.command({\r\n      name: 'IncreCommand',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return CountState().new(count + 1)\r\n      },\r\n    })\r\n\r\n    const DecreCommand = domain.command({\r\n      name: 'DecreCommand',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return CountState().new(count - 1)\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        CountInfoQuery,\r\n      },\r\n      command: {\r\n        IncreCommand,\r\n        DecreCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import { useRemeshDomain, useRemeshQuery } from 'remesh-react'\r\n\r\nimport { CounterDomain } from 'remesh-domains-for-demos/dist/others/counter'\r\n\r\nexport default () => {\r\n  const counterDomain = useRemeshDomain(CounterDomain())\r\n\r\n  const countInfo = useRemeshQuery(counterDomain.query.CountInfoQuery())\r\n\r\n  return (\r\n    <div>\r\n      <h2>Counter</h2>\r\n      <button onClick={() => counterDomain.command.IncreCommand()}>Increment</button>{' '}\r\n      <button onClick={() => counterDomain.command.DecreCommand()}>Decrement</button>\r\n      <div>\r\n        <h3>Count Query</h3>\r\n        <pre>{JSON.stringify(countInfo, null, 2)}</pre>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["counterDomain","useRemeshDomain","CounterDomain","countInfo","useRemeshQuery","query","CountInfoQuery","_jsx","command","IncreCommand","DecreCommand","_jsxs","JSON","stringify"],"mappings":"mHAEa,KAAA,GAAgB,EAAO,OAAO,CACzC,KAAM,gBACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAa,EAAO,MAAM,CAC9B,KAAM,aACN,QAAS,CAAA,CACV,EAEK,EAAkB,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,SAEA,AADO,EAAI,EAAA,CAAY,EACf,CACjB,CACD,EAEK,EAAkB,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,SAEA,AADO,EAAI,EAAA,CAAY,EACf,CACjB,CACD,EAEK,EAAmB,EAAO,MAAM,CACpC,KAAM,mBACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAc,EAAI,EAAA,CAAiB,EACnC,EAAc,EAAI,EAAA,CAAiB,EACzC,MAAO,GAAmB,GAAA,EAC5B,CAAA,CACD,EAEK,EAAiB,EAAO,MAAM,CAClC,KAAM,iBACN,KAAM,CAAC,CAAE,SAAU,CACjB,KAAM,CAAC,EAAO,EAAO,GAAU,CAAC,EAAI,EAAgB,CAAC,EAAG,EAAI,GAAiB,EAAG,EAAI,EAAA,CAAkB,CAAC,EAChG,MAAA,CAAE,QAAO,QAAO,SACzB,CAAA,CACD,EAEK,EAAe,EAAO,QAAQ,CAClC,KAAM,eACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAQ,EAAI,EAAA,CAAY,EAC9B,MAAO,GAAW,EAAE,IAAI,EAAQ,CAAC,CACnC,CAAA,CACD,EAEK,EAAe,EAAO,QAAQ,CAClC,KAAM,eACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAQ,EAAI,EAAA,CAAY,EAC9B,MAAO,GAAW,EAAE,IAAI,EAAQ,CAAC,CACnC,CAAA,CACD,EAEM,MAAA,CACL,MAAO,CACL,gBACF,EACA,QAAS,CACP,eACA,cACF,CAAA,CAEJ,CACF,CAAC,ECjED,GAAA,GAAe,IAAM,CACbA,KAAAA,GAAgBC,EAAgBC,EAAAA,CAAD,EAE/BC,EAAYC,EAAeJ,EAAcK,MAAMC,eAArB,CAAA,EAG9B,SAAA,MAAA,CACE,SAAA,CAAAC,EAAA,KAAA,CAAA,SAAA,SAAA,CAAA,EACAA,EAAA,SAAA,CAAQ,QAAS,IAAMP,EAAcQ,QAAQC,aAA7C,EAAA,SAAA,WAAA,CAFF,EAEkF,IAChFF,EAAA,SAAA,CAAQ,QAAS,IAAMP,EAAcQ,QAAQE,aAA7C,EAAA,SAAA,WAAA,CAAA,EACAC,EAAA,MAAA,CACE,SAAA,CAAAJ,EAAA,KAAA,CAAA,SAAA,aAAA,CAAA,EACAA,EAAA,MAAA,CAAMK,SAAAA,KAAKC,UAAUV,EAAW,KAAM,CAAhC,CAAA,CAFR,CAAA,CAAA,CAJF,CAAA,CAAA,CADF,CAWD"}