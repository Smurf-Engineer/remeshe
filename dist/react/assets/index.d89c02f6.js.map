{"version":3,"file":"index.d89c02f6.js","sources":["../../../node_modules/.pnpm/rxjs@7.5.6/node_modules/rxjs/dist/esm5/internal/scheduler/performanceTimestampProvider.js","../../../node_modules/.pnpm/rxjs@7.5.6/node_modules/rxjs/dist/esm5/internal/scheduler/animationFrameProvider.js","../../../node_modules/.pnpm/rxjs@7.5.6/node_modules/rxjs/dist/esm5/internal/observable/dom/animationFrames.js","../../../node_modules/.pnpm/rxjs@7.5.6/node_modules/rxjs/dist/esm5/internal/observable/never.js","../../../node_modules/.pnpm/rxjs@7.5.6/node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js","../../../node_modules/.pnpm/rxjs@7.5.6/node_modules/rxjs/dist/esm5/internal/operators/pairwise.js","../../../node_modules/.pnpm/rxjs@7.5.6/node_modules/rxjs/dist/esm5/internal/operators/startWith.js","../../../projects/domains/src/7guis/Counter.ts","../../../projects/react-demos/src/7guis/Counter.tsx","../../../projects/domains/src/7guis/TemperatureConverter.ts","../../../projects/react-demos/src/7guis/TemperatureConverter.tsx","../../../projects/domains/src/7guis/FlightBooker.ts","../../../projects/react-demos/src/7guis/FlightBooker.tsx","../../../projects/domains/src/7guis/Timer.ts","../../../projects/react-demos/src/7guis/Timer.tsx","../../../projects/domains/src/7guis/CRUD.ts","../../../projects/react-demos/src/7guis/OuterClickWrapper.tsx","../../../projects/react-demos/src/7guis/CRUD.tsx","../../../projects/domains/src/7guis/CircleDrawer.ts","../../../projects/react-demos/src/7guis/CircleDrawer.tsx","../../../projects/domains/src/7guis/Cells.ts","../../../projects/react-demos/src/7guis/Cells.tsx","../../../projects/react-demos/src/7guis/index.tsx"],"sourcesContent":["export var performanceTimestampProvider = {\n    now: function () {\n        return (performanceTimestampProvider.delegate || performance).now();\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=performanceTimestampProvider.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { Subscription } from '../Subscription';\nexport var animationFrameProvider = {\n    schedule: function (callback) {\n        var request = requestAnimationFrame;\n        var cancel = cancelAnimationFrame;\n        var delegate = animationFrameProvider.delegate;\n        if (delegate) {\n            request = delegate.requestAnimationFrame;\n            cancel = delegate.cancelAnimationFrame;\n        }\n        var handle = request(function (timestamp) {\n            cancel = undefined;\n            callback(timestamp);\n        });\n        return new Subscription(function () { return cancel === null || cancel === void 0 ? void 0 : cancel(handle); });\n    },\n    requestAnimationFrame: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = animationFrameProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.requestAnimationFrame) || requestAnimationFrame).apply(void 0, __spreadArray([], __read(args)));\n    },\n    cancelAnimationFrame: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = animationFrameProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.cancelAnimationFrame) || cancelAnimationFrame).apply(void 0, __spreadArray([], __read(args)));\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=animationFrameProvider.js.map","import { Observable } from '../../Observable';\nimport { Subscription } from '../../Subscription';\nimport { performanceTimestampProvider } from '../../scheduler/performanceTimestampProvider';\nimport { animationFrameProvider } from '../../scheduler/animationFrameProvider';\nexport function animationFrames(timestampProvider) {\n    return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\nfunction animationFramesFactory(timestampProvider) {\n    var schedule = animationFrameProvider.schedule;\n    return new Observable(function (subscriber) {\n        var subscription = new Subscription();\n        var provider = timestampProvider || performanceTimestampProvider;\n        var start = provider.now();\n        var run = function (timestamp) {\n            var now = provider.now();\n            subscriber.next({\n                timestamp: timestampProvider ? now : timestamp,\n                elapsed: now - start,\n            });\n            if (!subscriber.closed) {\n                subscription.add(schedule(run));\n            }\n        };\n        subscription.add(schedule(run));\n        return subscription;\n    });\n}\nvar DEFAULT_ANIMATION_FRAMES = animationFramesFactory();\n//# sourceMappingURL=animationFrames.js.map","import { Observable } from '../Observable';\nimport { noop } from '../util/noop';\nexport var NEVER = new Observable(noop);\nexport function never() {\n    return NEVER;\n}\n//# sourceMappingURL=never.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function pairwise() {\n    return operate(function (source, subscriber) {\n        var prev;\n        var hasPrev = false;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var p = prev;\n            prev = value;\n            hasPrev && subscriber.next([p, value]);\n            hasPrev = true;\n        }));\n    });\n}\n//# sourceMappingURL=pairwise.js.map","import { concat } from '../observable/concat';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\nexport function startWith() {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(values);\n    return operate(function (source, subscriber) {\n        (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=startWith.js.map","import { Remesh } from 'remesh'\r\n\r\nexport const CounterDomain = Remesh.domain({\r\n  name: 'CounterDomain',\r\n  impl: (domain) => {\r\n    const CountState = domain.state({\r\n      name: 'CounterState',\r\n      default: 0,\r\n    })\r\n\r\n    const CountQuery = domain.query({\r\n      name: 'CounterQuery',\r\n      impl: ({ get }) => {\r\n        return get(CountState())\r\n      },\r\n    })\r\n\r\n    const IncreCommand = domain.command({\r\n      name: 'IncreCommand',\r\n      impl: ({ get }) => {\r\n        const count = get(CountState())\r\n        return CountState().new(count + 1)\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        CountQuery,\r\n      },\r\n      command: {\r\n        IncreCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { CounterDomain } from 'remesh-domains-for-demos/dist/7guis/Counter'\r\n\r\nexport const CounterApp = () => {\r\n  const send = useRemeshSend()\r\n  const counterDomain = useRemeshDomain(CounterDomain())\r\n  const count = useRemeshQuery(counterDomain.query.CountQuery())\r\n\r\n  const handleIncre = () => {\r\n    send(counterDomain.command.IncreCommand())\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: 400,\r\n        border: '1px solid #eaeaea',\r\n        boxSizing: 'border-box',\r\n        padding: 10,\r\n      }}\r\n    >\r\n      <h2>Counter</h2>\r\n      <input type=\"number\" readOnly value={count} />\r\n      <label>\r\n        <button onClick={handleIncre}>Count </button>{' '}\r\n      </label>\r\n    </div>\r\n  )\r\n}\r\n","import { Remesh } from 'remesh'\r\n\r\nexport const TemperatureConverterDomain = Remesh.domain({\r\n  name: 'TemperatureConverterDomain',\r\n  impl: (domain) => {\r\n    const CelsiusState = domain.state({\r\n      name: 'CelsiusState',\r\n      default: '',\r\n    })\r\n\r\n    const CelsiusQuery = domain.query({\r\n      name: 'CelsiusQuery',\r\n      impl: ({ get }) => {\r\n        return get(CelsiusState())\r\n      },\r\n    })\r\n\r\n    const FahrenheitState = domain.state({\r\n      name: 'FahrenheitState',\r\n      default: '',\r\n    })\r\n\r\n    const FahrenheitQuery = domain.query({\r\n      name: 'FahrenheitQuery',\r\n      impl: ({ get }) => {\r\n        return get(FahrenheitState())\r\n      },\r\n    })\r\n\r\n    const ResetBothCommand = domain.command({\r\n      name: 'ResetBothCommand',\r\n      impl: ({}) => {\r\n        return [CelsiusState().new(''), FahrenheitState().new('')]\r\n      },\r\n    })\r\n\r\n    const UpdateCelsiusCommand = domain.command({\r\n      name: 'UpdateCelsiusCommand',\r\n      impl: ({}, input: string) => {\r\n        if (input === '') {\r\n          return ResetBothCommand()\r\n        }\r\n\r\n        const celsius = parseFloat(input)\r\n\r\n        if (Number.isNaN(celsius)) {\r\n          return CelsiusState().new(input)\r\n        }\r\n\r\n        const fahrenheit = celsius * (9 / 5) + 32\r\n\r\n        return [CelsiusState().new(input), FahrenheitState().new(fahrenheit.toString())]\r\n      },\r\n    })\r\n\r\n    const UpdateFahrenheitCommand = domain.command({\r\n      name: 'UpdateFahrenheitCommand',\r\n      impl: ({}, input: string) => {\r\n        if (input === '') {\r\n          return ResetBothCommand()\r\n        }\r\n\r\n        const fahrenheit = parseFloat(input)\r\n\r\n        if (Number.isNaN(fahrenheit)) {\r\n          return FahrenheitState().new(input)\r\n        }\r\n\r\n        const celsius = (fahrenheit - 32) * (5 / 9)\r\n\r\n        return [CelsiusState().new(celsius.toString()), FahrenheitState().new(input)]\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        CelsiusQuery,\r\n        FahrenheitQuery,\r\n      },\r\n      command: {\r\n        UpdateCelsiusCommand,\r\n        UpdateFahrenheitCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import React from 'react'\r\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { TemperatureConverterDomain } from 'remesh-domains-for-demos/dist/7guis/TemperatureConverter'\r\n\r\nexport const TemperatureConverterApp = () => {\r\n  const send = useRemeshSend()\r\n  const domain = useRemeshDomain(TemperatureConverterDomain())\r\n  const celsius = useRemeshQuery(domain.query.CelsiusQuery())\r\n  const fahrenheit = useRemeshQuery(domain.query.FahrenheitQuery())\r\n\r\n  const handleCelsius = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    send(domain.command.UpdateCelsiusCommand(event.target.value))\r\n  }\r\n\r\n  const handleFahrenheit = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    send(domain.command.UpdateFahrenheitCommand(event.target.value))\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        border: '1px solid #eaeaea',\r\n        boxSizing: 'border-box',\r\n        padding: 10,\r\n      }}\r\n    >\r\n      <h2>Temperature Converter</h2>\r\n      <div>\r\n        <input type=\"text\" value={celsius} onChange={handleCelsius} />\r\n        <label htmlFor=\"\">Celsius</label>=\r\n        <input type=\"text\" value={fahrenheit} onChange={handleFahrenheit} />\r\n        <label htmlFor=\"\">Fahrenheit</label>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { Remesh } from 'remesh'\r\n\r\nexport type FlightBookerOption = 'one-way' | 'return'\r\n\r\nexport type FlightBookerStatus = {\r\n  startDate: 'valid' | 'invalid'\r\n  endDate: 'valid' | 'invalid' | 'disabled' | 'enabled'\r\n  bookButton: 'disabled' | 'enabled'\r\n}\r\n\r\nexport const getDate = (dateInput: string) => {\r\n  const list = dateInput.split('.')\r\n\r\n  if (list.length !== 3) {\r\n    return null\r\n  }\r\n\r\n  const date = new Date(`${list[2]}.${list[1]}.${list[0]}`)\r\n\r\n  if (date.toString() === 'Invalid Date') {\r\n    return null\r\n  }\r\n\r\n  return date\r\n}\r\n\r\nexport const toDateInput = (date: Date) => {\r\n  const list = date.toLocaleDateString().split('/')\r\n\r\n  return `${list[2]}.${list[1]}.${list[0]}`\r\n}\r\n\r\nexport const compareDate = (date1: Date, date2: Date) => {\r\n  if (date1.getFullYear() !== date2.getFullYear()) {\r\n    return date1.getFullYear() - date2.getFullYear()\r\n  }\r\n\r\n  if (date1.getMonth() !== date2.getMonth()) {\r\n    return date1.getMonth() - date2.getMonth()\r\n  }\r\n\r\n  return date1.getDate() - date2.getDate()\r\n}\r\n\r\nexport const FlightBookerDomain = Remesh.domain({\r\n  name: 'FlightBookerDomain',\r\n  impl: (domain) => {\r\n    const OptionState = domain.state<FlightBookerOption>({\r\n      name: 'OptionState',\r\n      default: 'one-way',\r\n    })\r\n\r\n    const OptionQuery = domain.query({\r\n      name: 'OptionQuery',\r\n      impl: ({ get }) => {\r\n        return get(OptionState())\r\n      },\r\n    })\r\n\r\n    const StartDateInputState = domain.state({\r\n      name: 'StartDateInputState',\r\n      default: toDateInput(new Date()),\r\n    })\r\n\r\n    const StartDateInputQuery = domain.query({\r\n      name: 'StartDateInputQuery',\r\n      impl: ({ get }) => {\r\n        return get(StartDateInputState())\r\n      },\r\n    })\r\n\r\n    const EndDateInputState = domain.state({\r\n      name: 'EndDateInputState',\r\n      default: toDateInput(new Date()),\r\n    })\r\n\r\n    const EndDateInputQuery = domain.query({\r\n      name: 'EndDateInputQuery',\r\n      impl: ({ get }) => {\r\n        return get(EndDateInputState())\r\n      },\r\n    })\r\n\r\n    const StartDateQuery = domain.query({\r\n      name: 'StartDateQuery',\r\n      impl: ({ get }) => {\r\n        const startDateInput = get(StartDateInputState())\r\n        return getDate(startDateInput)\r\n      },\r\n    })\r\n\r\n    const EndDateQuery = domain.query({\r\n      name: 'EndDateQuery',\r\n      impl: ({ get }) => {\r\n        const endDateInput = get(EndDateInputState())\r\n        return getDate(endDateInput)\r\n      },\r\n    })\r\n\r\n    const UpdateOptionCommand = domain.command({\r\n      name: 'UpdateOptionCommand',\r\n      impl: ({}, option: FlightBookerOption) => {\r\n        return OptionState().new(option)\r\n      },\r\n    })\r\n\r\n    const UpdateStartDateCommand = domain.command({\r\n      name: 'UpdateStartDateCommand',\r\n      impl: ({}, dateInput: string) => {\r\n        return StartDateInputState().new(dateInput)\r\n      },\r\n    })\r\n\r\n    const UpdateEndDateCommand = domain.command({\r\n      name: 'UpdateEndDateCommand',\r\n      impl: ({}, dateInput: string) => {\r\n        return EndDateInputState().new(dateInput)\r\n      },\r\n    })\r\n\r\n    const StatusQuery = domain.query({\r\n      name: 'StatusQuery',\r\n      impl: ({ get }): FlightBookerStatus => {\r\n        const option = get(OptionState())\r\n        const startDate = get(StartDateQuery())\r\n        const endDate = get(EndDateQuery())\r\n\r\n        const startDateStatus = !!startDate ? 'valid' : 'invalid'\r\n        const endDateStatus = option === 'return' ? (!!endDate ? 'valid' : 'invalid') : 'disabled'\r\n\r\n        const bookButtonStatus =\r\n          option === 'one-way'\r\n            ? !!startDate\r\n              ? 'enabled'\r\n              : 'disabled'\r\n            : !!startDate && !!endDate && compareDate(startDate, endDate) <= 0\r\n            ? 'enabled'\r\n            : 'disabled'\r\n\r\n        return {\r\n          startDate: startDateStatus,\r\n          endDate: endDateStatus,\r\n          bookButton: bookButtonStatus,\r\n        }\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        StatusQuery,\r\n        OptionQuery,\r\n        StartDateQuery,\r\n        EndDateQuery,\r\n        StartDateInputQuery,\r\n        EndDateInputQuery,\r\n      },\r\n      command: {\r\n        UpdateOptionCommand,\r\n        UpdateStartDateCommand,\r\n        UpdateEndDateCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import React from 'react'\r\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { FlightBookerDomain, FlightBookerOption } from 'remesh-domains-for-demos/dist/7guis/FlightBooker'\r\n\r\nexport const FlightBookerApp = () => {\r\n  const send = useRemeshSend()\r\n  const flightBooker = useRemeshDomain(FlightBookerDomain())\r\n  const option = useRemeshQuery(flightBooker.query.OptionQuery())\r\n  const status = useRemeshQuery(flightBooker.query.StatusQuery())\r\n\r\n  const startDateInput = useRemeshQuery(flightBooker.query.StartDateInputQuery())\r\n  const endDateInput = useRemeshQuery(flightBooker.query.EndDateInputQuery())\r\n\r\n  const handleOptionChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    send(flightBooker.command.UpdateOptionCommand(event.target.value as FlightBookerOption))\r\n  }\r\n\r\n  const handleStartDateChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    send(flightBooker.command.UpdateStartDateCommand(event.target.value))\r\n  }\r\n\r\n  const handleEndDateChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    send(flightBooker.command.UpdateEndDateCommand(event.target.value))\r\n  }\r\n\r\n  const handleBookButtonClick = () => {\r\n    if (status.bookButton === 'enabled') {\r\n      if (option === 'one-way') {\r\n        alert(`You have booked a one-way flight on ${startDateInput}`)\r\n      } else {\r\n        alert(`You have booked return flight from ${startDateInput} to ${endDateInput}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: 400,\r\n        border: '1px solid #eaeaea',\r\n        boxSizing: 'border-box',\r\n        padding: 10,\r\n      }}\r\n    >\r\n      <h2>Flight Booker</h2>\r\n      <div>\r\n        <select value={option} onChange={handleOptionChange}>\r\n          <option value=\"one-way\">One-way flight</option>\r\n          <option value=\"return\">Return flight</option>\r\n        </select>\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          style={{\r\n            backgroundColor: status.startDate === 'invalid' ? 'red' : '',\r\n          }}\r\n          value={startDateInput}\r\n          onChange={handleStartDateChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <input\r\n          type=\"text\"\r\n          style={{\r\n            backgroundColor: status.endDate === 'invalid' ? 'red' : '',\r\n          }}\r\n          disabled={status.endDate === 'disabled'}\r\n          value={endDateInput}\r\n          onChange={handleEndDateChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button disabled={status.bookButton === 'disabled'} onClick={handleBookButtonClick}>\r\n          Book\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { merge, animationFrames, of, NEVER } from 'rxjs'\r\n\r\nimport { distinctUntilChanged, map, tap, pairwise, switchMap, takeUntil, startWith } from 'rxjs/operators'\r\n\r\nimport { Remesh } from 'remesh'\r\n\r\nexport const TimerDomain = Remesh.domain({\r\n  name: 'TimerDomain',\r\n  inspectable: false,\r\n  impl: (domain) => {\r\n    const DurationState = domain.state({\r\n      name: 'DurationState',\r\n      default: 15000,\r\n    })\r\n\r\n    const DurationQuery = domain.query({\r\n      name: 'DurationQuery',\r\n      impl: ({ get }) => {\r\n        return get(DurationState())\r\n      },\r\n    })\r\n\r\n    const ElapsedState = domain.state({\r\n      name: 'ElapsedState',\r\n      default: 0,\r\n    })\r\n\r\n    const ElapsedQuery = domain.query({\r\n      name: 'ElapsedQuery',\r\n      impl: ({ get }) => {\r\n        return get(ElapsedState())\r\n      },\r\n    })\r\n\r\n    const StartEvent = domain.event({\r\n      name: 'StartEvent',\r\n    })\r\n\r\n    const StopEvent = domain.event({\r\n      name: 'StopEvent',\r\n    })\r\n\r\n    const UpdateElapsedCommand = domain.command({\r\n      name: 'UpdateElapsedCommand',\r\n      impl: ({ get }, increment: number) => {\r\n        const duration = get(DurationState())\r\n        const elapsed = get(ElapsedState())\r\n\r\n        if (elapsed > duration) {\r\n          return StopEvent()\r\n        }\r\n\r\n        return ElapsedState().new(elapsed + increment)\r\n      },\r\n    })\r\n\r\n    const UpdateDurationCommand = domain.command({\r\n      name: 'UpdateDurationCommand',\r\n      impl: ({ get }, newDuration: number) => {\r\n        const elapsed = get(ElapsedState())\r\n\r\n        if (newDuration > elapsed) {\r\n          return [DurationState().new(newDuration), StartEvent()]\r\n        }\r\n\r\n        return DurationState().new(newDuration)\r\n      },\r\n    })\r\n\r\n    const ResetElapsedCommand = domain.command({\r\n      name: 'ResetElapsedCommand',\r\n      impl: ({}) => {\r\n        return [ElapsedState().new(0), StartEvent()]\r\n      },\r\n    })\r\n\r\n    domain.effect({\r\n      name: 'UpdateElapsedByAnimationEffect',\r\n      impl: ({ fromEvent }) => {\r\n        const startEvent$ = fromEvent(StartEvent).pipe(\r\n          startWith(StartEvent()),\r\n          map(() => 1),\r\n        )\r\n        const stopEvent$ = fromEvent(StopEvent).pipe(map(() => 0))\r\n\r\n        return merge(startEvent$, stopEvent$).pipe(\r\n          distinctUntilChanged(),\r\n          switchMap((signal) => {\r\n            if (signal === 0) {\r\n              return NEVER\r\n            }\r\n            return animationFrames().pipe(\r\n              pairwise(),\r\n              map(([a, b]) => UpdateElapsedCommand(b.elapsed - a.elapsed)),\r\n              takeUntil(fromEvent(StopEvent)),\r\n            )\r\n          }),\r\n        )\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        DurationQuery,\r\n        ElapsedQuery,\r\n      },\r\n      command: {\r\n        ResetElapsedCommand,\r\n        UpdateDurationCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import React from 'react'\r\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { TimerDomain } from 'remesh-domains-for-demos/dist/7guis/Timer'\r\n\r\nexport const TimerApp = () => {\r\n  const send = useRemeshSend()\r\n  const timerDomain = useRemeshDomain(TimerDomain())\r\n  const elapsed = useRemeshQuery(timerDomain.query.ElapsedQuery())\r\n  const duration = useRemeshQuery(timerDomain.query.DurationQuery())\r\n\r\n  const handleDurationChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const duration = parseInt(event.target.value, 10)\r\n    if (!isNaN(duration)) {\r\n      send(timerDomain.command.UpdateDurationCommand(duration))\r\n    }\r\n  }\r\n\r\n  const handleResetElapsed = () => {\r\n    send(timerDomain.command.ResetElapsedCommand())\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: 400,\r\n        border: '1px solid #eaeaea',\r\n        boxSizing: 'border-box',\r\n        padding: 10,\r\n      }}\r\n    >\r\n      <h2>Timer</h2>\r\n      <div style={{ display: 'flex' }}>\r\n        <label style={{ marginRight: 10, whiteSpace: 'nowrap' }}>Elapsed Timer:</label>\r\n        <div style={{ width: '100%' }}>\r\n          <span\r\n            style={{\r\n              display: 'inline-block',\r\n              height: 10,\r\n              background: 'green',\r\n              width: `${Math.min(elapsed / duration, 1) * 100}%`,\r\n              verticalAlign: 'middle',\r\n              borderRadius: 5,\r\n            }}\r\n          ></span>\r\n        </div>\r\n      </div>\r\n      <div>{elapsed > duration ? (duration / 1000).toFixed(1) : (elapsed / 1000).toFixed(1)}s</div>\r\n      <div style={{ display: 'flex' }}>\r\n        <label style={{ width: 100, marginRight: 10 }}>Duration:</label>\r\n        <input\r\n          style={{ width: '100%' }}\r\n          type=\"range\"\r\n          min={0}\r\n          max={30000}\r\n          value={duration}\r\n          onChange={handleDurationChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button style={{ width: '100% ' }} onClick={handleResetElapsed}>\r\n          Reset Timer\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { Remesh } from 'remesh'\r\nimport { ListModule } from 'remesh/modules/list'\r\n\r\nexport type Name = {\r\n  name: string\r\n  surname: string\r\n}\r\n\r\nexport type NameItem = {\r\n  id: string\r\n} & Name\r\n\r\nexport const CRUDDomain = Remesh.domain({\r\n  name: 'CRUDDomain',\r\n  impl: (domain) => {\r\n    let nameUid = 0\r\n\r\n    const nameListModule = ListModule<NameItem>(domain, {\r\n      name: 'NameListModule',\r\n      key: (item) => item.id,\r\n    })\r\n\r\n    const FilterPrefixState = domain.state({\r\n      name: 'FilterPrefixState',\r\n      default: '',\r\n    })\r\n\r\n    const FilterPrefixQuery = domain.query({\r\n      name: 'FilterPrefixQuery',\r\n      impl: ({ get }) => {\r\n        return get(FilterPrefixState())\r\n      },\r\n    })\r\n\r\n    const UpdateFilterPrefixCommand = domain.command({\r\n      name: 'UpdateFilterPrefixCommand',\r\n      impl: ({}, prefix: string) => {\r\n        return FilterPrefixState().new(prefix)\r\n      },\r\n    })\r\n\r\n    const CreatedState = domain.state<Name>({\r\n      name: 'CreatedState',\r\n      default: {\r\n        name: '',\r\n        surname: '',\r\n      },\r\n    })\r\n\r\n    const CreatedQuery = domain.query({\r\n      name: 'CreatedQuery',\r\n      impl: ({ get }) => {\r\n        return get(CreatedState())\r\n      },\r\n    })\r\n\r\n    const UpdateCreatedCommand = domain.command({\r\n      name: 'UpdateCreatedCommand',\r\n      impl: ({ get }, name: Partial<Name>) => {\r\n        const currentName = get(CreatedState())\r\n\r\n        return CreatedState().new({\r\n          ...currentName,\r\n          ...name,\r\n        })\r\n      },\r\n    })\r\n\r\n    const SelectedState = domain.state<NameItem | null>({\r\n      name: 'SelectedState',\r\n      default: null,\r\n    })\r\n\r\n    const SelectedQuery = domain.query({\r\n      name: 'SelectedQuery',\r\n      impl: ({ get }) => {\r\n        return get(SelectedState())\r\n      },\r\n    })\r\n\r\n    const SelectItemCommand = domain.command({\r\n      name: 'SelectItemCommand',\r\n      impl: ({ get }, targetItemId: string | null) => {\r\n        const currentSelected = get(SelectedState())\r\n\r\n        if (targetItemId === null) {\r\n          if (currentSelected === null) {\r\n            return null\r\n          } else {\r\n            return SelectedState().new(null)\r\n          }\r\n        }\r\n\r\n        if (currentSelected && currentSelected.id === targetItemId) {\r\n          return SelectedState().new(null)\r\n        }\r\n\r\n        const targetItem = get(nameListModule.query.ItemQuery(targetItemId))\r\n\r\n        return SelectedState().new(targetItem)\r\n      },\r\n    })\r\n\r\n    const UpdateSelectedNameCommand = domain.command({\r\n      name: 'UpdateSelectedNameCommand',\r\n      impl: ({ get }, name: Partial<Name>) => {\r\n        const selected = get(SelectedState())\r\n\r\n        if (selected === null) {\r\n          return null\r\n        }\r\n\r\n        return SelectedState().new({\r\n          ...selected,\r\n          ...name,\r\n        })\r\n      },\r\n    })\r\n\r\n    const FilteredListQuery = domain.query({\r\n      name: 'FilteredListQuery',\r\n      impl: ({ get }) => {\r\n        const filterPrefix = get(FilterPrefixState())\r\n        const nameList = get(nameListModule.query.ItemListQuery())\r\n\r\n        if (filterPrefix === '') {\r\n          return nameList\r\n        }\r\n\r\n        return nameList.filter((item) => item.surname.startsWith(filterPrefix))\r\n      },\r\n    })\r\n\r\n    const SyncSelectedCommand = domain.command({\r\n      name: 'SyncSelectedCommand',\r\n      impl: ({ get }) => {\r\n        const selected = get(SelectedState())\r\n\r\n        if (selected === null) {\r\n          return null\r\n        }\r\n\r\n        return nameListModule.command.UpdateItemCommand(selected)\r\n      },\r\n    })\r\n\r\n    const CreateNameItemCommand = domain.command({\r\n      name: 'CreateNameItemCommand',\r\n      impl: ({ get }) => {\r\n        const created = get(CreatedState())\r\n        const newItem = {\r\n          id: `${nameUid++}`,\r\n          ...created,\r\n        }\r\n\r\n        return [nameListModule.command.AddItemCommand(newItem), UpdateCreatedCommand({ name: '', surname: '' })]\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        ...nameListModule.query,\r\n        FilteredListQuery,\r\n        SelectedQuery,\r\n        FilterPrefixQuery,\r\n        CreatedQuery,\r\n      },\r\n      command: {\r\n        ...nameListModule.command,\r\n        UpdateFilterPrefixCommand,\r\n        SelectItemCommand,\r\n        UpdateCreatedCommand,\r\n        UpdateSelectedNameCommand,\r\n        CreateNameItemCommand,\r\n        SyncSelectedCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import { ComponentPropsWithoutRef, useEffect, useRef } from 'react'\r\n\r\nexport const OuterClickWrapper = (props: OuterClickWrapperProps) => {\r\n  const { onOuterClick, ...restProps } = props\r\n  const containerRef = useRef<HTMLDivElement | null>(null)\r\n\r\n  useEffect(() => {\r\n    const handleClick = (event: MouseEvent) => {\r\n      if (!(event.target as Node)?.parentElement) {\r\n        return\r\n      }\r\n\r\n      const isOuterClick = !!(containerRef.current && !containerRef.current.contains(event.target as Node))\r\n\r\n      if (isOuterClick) {\r\n        onOuterClick?.(event)\r\n      }\r\n    }\r\n\r\n    document.addEventListener('click', handleClick, false)\r\n    return () => {\r\n      document.removeEventListener('click', handleClick, false)\r\n    }\r\n  }, [])\r\n\r\n  return <div ref={containerRef} {...restProps}></div>\r\n}\r\ntype OuterClickWrapperProps = ComponentPropsWithoutRef<'div'> & {\r\n  onOuterClick?: (event: MouseEvent) => void\r\n}\r\n","import React from 'react'\r\n\r\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { CRUDDomain } from 'remesh-domains-for-demos/dist/7guis/CRUD'\r\n\r\nimport { OuterClickWrapper } from './OuterClickWrapper'\r\n\r\nexport const CRUDApp = () => {\r\n  const send = useRemeshSend()\r\n  const domain = useRemeshDomain(CRUDDomain())\r\n  const filteredList = useRemeshQuery(domain.query.FilteredListQuery())\r\n  const filter = useRemeshQuery(domain.query.FilterPrefixQuery())\r\n  const created = useRemeshQuery(domain.query.CreatedQuery())\r\n  const selected = useRemeshQuery(domain.query.SelectedQuery())\r\n\r\n  const handleFilterChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    send(domain.command.UpdateFilterPrefixCommand(e.target.value))\r\n  }\r\n\r\n  const handleSelect = (itemId: string | null) => {\r\n    send(domain.command.SelectItemCommand(itemId))\r\n  }\r\n\r\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (selected) {\r\n      send(\r\n        domain.command.UpdateSelectedNameCommand({\r\n          name: e.target.value,\r\n        }),\r\n      )\r\n    } else {\r\n      send(domain.command.UpdateCreatedCommand({ name: e.target.value }))\r\n    }\r\n  }\r\n\r\n  const handleSurnameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (selected) {\r\n      send(\r\n        domain.command.UpdateSelectedNameCommand({\r\n          surname: e.target.value,\r\n        }),\r\n      )\r\n    } else {\r\n      send(domain.command.UpdateCreatedCommand({ surname: e.target.value }))\r\n    }\r\n  }\r\n\r\n  const handleCreate = () => {\r\n    if (selected === null) {\r\n      send(domain.command.CreateNameItemCommand())\r\n    }\r\n  }\r\n\r\n  const handleSync = () => {\r\n    if (selected) {\r\n      send(domain.command.SyncSelectedCommand())\r\n    }\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    if (selected) {\r\n      send([domain.command.DeleteItemCommand(selected.id), domain.command.SelectItemCommand(null)])\r\n    }\r\n  }\r\n\r\n  return (\r\n    <OuterClickWrapper\r\n      style={{\r\n        width: 400,\r\n        border: '1px solid #eaeaea',\r\n        boxSizing: 'border-box',\r\n        padding: 10,\r\n      }}\r\n      onOuterClick={() => {\r\n        handleSelect(null)\r\n      }}\r\n    >\r\n      <h2>CRUD</h2>\r\n      <div>\r\n        <label htmlFor=\"\">Filter prefix</label>\r\n        <input type=\"text\" value={filter} onChange={handleFilterChange} />\r\n      </div>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            width: '50%',\r\n            height: 100,\r\n            border: '1px solid #eaeaea',\r\n            overflow: 'scroll',\r\n          }}\r\n        >\r\n          {filteredList.map((item) => {\r\n            const fullName = item.name + ', ' + item.surname\r\n\r\n            return (\r\n              <div\r\n                key={item.id}\r\n                style={{\r\n                  background: selected?.id === item.id ? 'blue' : '',\r\n                  color: selected?.id === item.id ? 'white' : '',\r\n                }}\r\n                onClick={() => {\r\n                  handleSelect(item.id)\r\n                }}\r\n              >\r\n                {fullName}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n        <div style={{ width: '50%', padding: 10 }}>\r\n          <div>\r\n            <label>Name:</label>\r\n            <input type=\"text\" value={selected ? selected.name : created.name} onChange={handleNameChange} />\r\n          </div>\r\n          <div>\r\n            <label>Surname:</label>\r\n            <input type=\"text\" value={selected ? selected.surname : created.surname} onChange={handleSurnameChange} />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <button disabled={selected !== null} style={{ marginRight: 10 }} onClick={handleCreate}>\r\n            Create\r\n          </button>\r\n          <button disabled={selected === null} style={{ marginRight: 10 }} onClick={handleSync}>\r\n            Update\r\n          </button>\r\n          <button disabled={selected === null} style={{ marginRight: 10 }} onClick={handleDelete}>\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </OuterClickWrapper>\r\n  )\r\n}\r\n","import { Remesh } from 'remesh'\r\n\r\nexport type Position = { x: number; y: number }\r\n\r\nexport type DrawAction = {\r\n  position: Position\r\n  diameter: number\r\n}\r\n\r\nexport type AdjustAction = {\r\n  index: number\r\n  diameter: number\r\n}\r\n\r\nexport type Circle = {\r\n  position: Position\r\n  diameter: number\r\n}\r\n\r\nexport type DrawState = {\r\n  circles: Circle[]\r\n}\r\n\r\nexport type TooltipsState =\r\n  | {\r\n      type: 'default'\r\n    }\r\n  | {\r\n      type: 'show-tips'\r\n      index: number\r\n      circle: Circle\r\n      pageX: number\r\n      pageY: number\r\n    }\r\n  | {\r\n      type: 'open-slider'\r\n      index: number\r\n      circle: Circle\r\n      pageX: number\r\n      pageY: number\r\n    }\r\n\r\nexport type HistoryStateItem =\r\n  | {\r\n      action: 'add-circle'\r\n      state: DrawState\r\n    }\r\n  | {\r\n      action: 'adjust-circle'\r\n      index: number\r\n      state: DrawState\r\n    }\r\n\r\nexport type HistoryState = {\r\n  items: HistoryStateItem[]\r\n  currentIndex: number\r\n}\r\n\r\nexport const CircleDrawerDomain = Remesh.domain({\r\n  name: 'CircleDrawerDomain',\r\n  impl: (domain) => {\r\n    const HistoryState = domain.state<HistoryState>({\r\n      name: 'HistoryState',\r\n      default: {\r\n        items: [],\r\n        currentIndex: -1,\r\n      },\r\n    })\r\n\r\n    const HistoryQuery = domain.query({\r\n      name: 'HistoryQuery',\r\n      impl: ({ get }) => {\r\n        return get(HistoryState())\r\n      },\r\n    })\r\n\r\n    const RecordHistoryStateCommand = domain.command({\r\n      name: 'RecordHistoryStateCommand',\r\n      impl: ({ get }, state: HistoryStateItem) => {\r\n        const history = get(HistoryState())\r\n\r\n        const previousItems = history.items.slice(0, history.currentIndex + 1)\r\n\r\n        /**\r\n         * If the current state is the same as the last state,\r\n         * then we don't need to record it.\r\n         * This is because we are going to replace the last state\r\n         * with the current state.\r\n         *\r\n         * This is a bit of a hack, but it works.\r\n         *\r\n         * TODO: Find a better way to do this.\r\n         */\r\n        if (state.action === 'adjust-circle') {\r\n          const lastState = previousItems[previousItems.length - 1]\r\n          if (lastState.action === 'adjust-circle' && lastState.index === state.index) {\r\n            previousItems.pop()\r\n          }\r\n        }\r\n\r\n        const newItems = [...previousItems, state]\r\n        const newIndex = newItems.length - 1\r\n\r\n        return HistoryState().new({\r\n          items: newItems,\r\n          currentIndex: newIndex,\r\n        })\r\n      },\r\n    })\r\n\r\n    const DrawState = domain.state<DrawState>({\r\n      name: 'DrawState',\r\n      default: {\r\n        circles: [],\r\n      },\r\n    })\r\n\r\n    const DrawQuery = domain.query({\r\n      name: 'DrawQuery',\r\n      impl: ({ get }) => {\r\n        return get(DrawState())\r\n      },\r\n    })\r\n\r\n    const UndoCommand = domain.command({\r\n      name: 'UndoCommand',\r\n      impl: ({ get }) => {\r\n        const history = get(HistoryState())\r\n        const canUndo = get(CanUndoQuery())\r\n        const newIndex = history.currentIndex - 1\r\n\r\n        if (!canUndo || newIndex < 0) {\r\n          return [\r\n            DrawState().new({\r\n              circles: [],\r\n            }),\r\n\r\n            HistoryState().new({\r\n              items: history.items,\r\n              currentIndex: -1,\r\n            }),\r\n          ]\r\n        }\r\n\r\n        return [\r\n          DrawState().new(history.items[newIndex].state),\r\n\r\n          HistoryState().new({\r\n            items: history.items,\r\n            currentIndex: newIndex,\r\n          }),\r\n        ]\r\n      },\r\n    })\r\n\r\n    const RedoCommand = domain.command({\r\n      name: 'RedoCommand',\r\n      impl: ({ get }) => {\r\n        const history = get(HistoryState())\r\n        const canRedo = get(CanRedoQuery())\r\n\r\n        if (!canRedo) {\r\n          return []\r\n        }\r\n\r\n        const newIndex = history.currentIndex + 1\r\n\r\n        return [\r\n          DrawState().new(history.items[newIndex].state),\r\n          HistoryState().new({\r\n            items: history.items,\r\n            currentIndex: newIndex,\r\n          }),\r\n        ]\r\n      },\r\n    })\r\n\r\n    const CanUndoQuery = domain.query({\r\n      name: 'CanUndoQuery',\r\n      impl: ({ get }) => {\r\n        const history = get(HistoryState())\r\n        return history.currentIndex >= 0\r\n      },\r\n    })\r\n\r\n    const CanRedoQuery = domain.query({\r\n      name: 'CanRedoQuery',\r\n      impl: ({ get }) => {\r\n        const history = get(HistoryState())\r\n        return history.currentIndex < history.items.length - 1\r\n      },\r\n    })\r\n\r\n    const SelectedIndexState = domain.state<number>({\r\n      name: 'SelectedIndexState',\r\n      default: -1,\r\n    })\r\n\r\n    const SelectedIndexQuery = domain.query({\r\n      name: 'SelectedIndexQuery',\r\n      impl: ({ get }) => {\r\n        return get(SelectedIndexState())\r\n      },\r\n    })\r\n\r\n    const SetSelectedIndexCommand = domain.command({\r\n      name: 'SetSelectedIndexCommand',\r\n      impl: ({}, index: number) => {\r\n        return SelectedIndexState().new(index)\r\n      },\r\n    })\r\n\r\n    const SelectedCircleInfoQuery = domain.query({\r\n      name: 'SelectedCircleInfoQuery',\r\n      impl: ({ get }) => {\r\n        const index = get(SelectedIndexState())\r\n        const circles = get(DrawState()).circles\r\n\r\n        if (index === -1) {\r\n          return null\r\n        }\r\n\r\n        return {\r\n          index,\r\n          circle: circles[index],\r\n        }\r\n      },\r\n    })\r\n\r\n    const DrawCommand = domain.command({\r\n      name: 'DrawCommand',\r\n      impl: ({ get }, action: DrawAction) => {\r\n        const state = get(DrawState())\r\n        const newState = {\r\n          circles: [...state.circles, { position: action.position, diameter: action.diameter }],\r\n        }\r\n\r\n        return [\r\n          DrawState().new(newState),\r\n          RecordHistoryStateCommand({\r\n            action: 'add-circle',\r\n            state: newState,\r\n          }),\r\n        ]\r\n      },\r\n    })\r\n\r\n    const AdjustCommand = domain.command({\r\n      name: 'AdjustCommand',\r\n      impl: ({ get }, action: AdjustAction) => {\r\n        const state = get(DrawState())\r\n        const circles = state.circles.map((circle, index) => {\r\n          if (index === action.index) {\r\n            return {\r\n              position: circle.position,\r\n              diameter: action.diameter,\r\n            }\r\n          }\r\n          return circle\r\n        })\r\n\r\n        const newState = {\r\n          circles,\r\n        }\r\n\r\n        return [\r\n          DrawState().new(newState),\r\n          RecordHistoryStateCommand({\r\n            action: 'adjust-circle',\r\n            index: action.index,\r\n            state: newState,\r\n          }),\r\n        ]\r\n      },\r\n    })\r\n\r\n    const TooltipsState = domain.state<TooltipsState>({\r\n      name: 'TooltipsState',\r\n      default: {\r\n        type: 'default',\r\n      },\r\n    })\r\n\r\n    const TooltipsQuery = domain.query({\r\n      name: 'TooltipsQuery',\r\n      impl: ({ get }) => {\r\n        return get(TooltipsState())\r\n      },\r\n    })\r\n\r\n    const UpdateTooltipsCommand = domain.command({\r\n      name: 'UpdateTooltipsCommand',\r\n      impl: ({}, newState: TooltipsState) => {\r\n        return TooltipsState().new(newState)\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        HistoryQuery,\r\n        DrawQuery,\r\n        TooltipsQuery,\r\n        SelectedIndexQuery,\r\n        SelectedCircleInfoQuery,\r\n        CanUndoQuery,\r\n        CanRedoQuery,\r\n      },\r\n      command: {\r\n        DrawCommand,\r\n        AdjustCommand,\r\n        UpdateTooltipsCommand,\r\n        UndoCommand,\r\n        RedoCommand,\r\n        SetSelectedIndexCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n\r\nexport const positionInCircle = (position: Position, circle: Circle): boolean => {\r\n  const { x, y } = position\r\n  const { diameter, position: circlePosition } = circle\r\n  const { x: circleX, y: circleY } = circlePosition\r\n  const radius = diameter / 2\r\n  const dx = x - circleX\r\n  const dy = y - circleY\r\n\r\n  return dx * dx + dy * dy < radius * radius\r\n}\r\n","import React from 'react'\r\n\r\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { CircleDrawerDomain, positionInCircle, Position } from 'remesh-domains-for-demos/dist/7guis/CircleDrawer'\r\n\r\nimport { OuterClickWrapper } from './OuterClickWrapper'\r\n\r\nexport const CircleDrawerApp = () => {\r\n  const send = useRemeshSend()\r\n  const domain = useRemeshDomain(CircleDrawerDomain())\r\n  const drawState = useRemeshQuery(domain.query.DrawQuery())\r\n  const tooltipsState = useRemeshQuery(domain.query.TooltipsQuery())\r\n  const selectedCircleInfo = useRemeshQuery(domain.query.SelectedCircleInfoQuery())\r\n  const canUndo = useRemeshQuery(domain.query.CanUndoQuery())\r\n  const canRedo = useRemeshQuery(domain.query.CanRedoQuery())\r\n\r\n  const getCircleInfo = (position: Position) => {\r\n    const circle = drawState.circles.find((circle) => {\r\n      return positionInCircle(position, circle)\r\n    })\r\n\r\n    if (!circle) {\r\n      return null\r\n    }\r\n\r\n    const index = drawState.circles.indexOf(circle)\r\n\r\n    return {\r\n      index,\r\n      circle,\r\n    }\r\n  }\r\n\r\n  const handleRightClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    e.preventDefault()\r\n    const position = { x: e.pageX, y: e.pageY }\r\n\r\n    const circleInfo = getCircleInfo(position)\r\n\r\n    if (circleInfo) {\r\n      send([\r\n        domain.command.SetSelectedIndexCommand(circleInfo.index),\r\n        domain.command.UpdateTooltipsCommand({\r\n          type: 'show-tips',\r\n          index: circleInfo.index,\r\n          circle: circleInfo.circle,\r\n          pageX: e.pageX,\r\n          pageY: e.pageY,\r\n        }),\r\n      ])\r\n    }\r\n  }\r\n\r\n  const handleLeftClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    if (tooltipsState.type !== 'default') {\r\n      return\r\n    }\r\n\r\n    const position = { x: e.pageX, y: e.pageY }\r\n    const circleInfo = getCircleInfo(position)\r\n\r\n    if (!circleInfo) {\r\n      send(domain.command.DrawCommand({ position, diameter: 30 }))\r\n    }\r\n  }\r\n\r\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    if (tooltipsState.type !== 'default') {\r\n      return\r\n    }\r\n\r\n    const position = { x: e.pageX, y: e.pageY }\r\n    const circleInfo = getCircleInfo(position)\r\n\r\n    if (circleInfo) {\r\n      send(domain.command.SetSelectedIndexCommand(circleInfo.index))\r\n    } else {\r\n      send(domain.command.SetSelectedIndexCommand(-1))\r\n    }\r\n  }\r\n\r\n  const handleOpenSlider = () => {\r\n    if (tooltipsState.type === 'show-tips') {\r\n      send(\r\n        domain.command.UpdateTooltipsCommand({\r\n          type: 'open-slider',\r\n          index: tooltipsState.index,\r\n          circle: tooltipsState.circle,\r\n          pageX: tooltipsState.pageX,\r\n          pageY: tooltipsState.pageY,\r\n        }),\r\n      )\r\n    }\r\n  }\r\n\r\n  const handleCloseSlider = () => {\r\n    send(\r\n      domain.command.UpdateTooltipsCommand({\r\n        type: 'default',\r\n      }),\r\n    )\r\n  }\r\n\r\n  const handleAdust = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = parseInt(event.target.value, 10)\r\n\r\n    if (selectedCircleInfo && !isNaN(value)) {\r\n      send(\r\n        domain.command.AdjustCommand({\r\n          index: selectedCircleInfo.index,\r\n          diameter: value,\r\n        }),\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        border: '1px solid #eaeaea',\r\n        boxSizing: 'border-box',\r\n        padding: 10,\r\n      }}\r\n    >\r\n      <h2>Circle Drawer</h2>\r\n      <div\r\n        style={{\r\n          width: 400,\r\n          textAlign: 'center',\r\n          padding: 10,\r\n        }}\r\n      >\r\n        <button\r\n          onClick={() => send(domain.command.UndoCommand())}\r\n          style={{\r\n            margin: '0 10px',\r\n          }}\r\n          disabled={!canUndo}\r\n        >\r\n          Undo\r\n        </button>\r\n        <button\r\n          onClick={() => send(domain.command.RedoCommand())}\r\n          style={{\r\n            margin: '0 10px',\r\n          }}\r\n          disabled={!canRedo}\r\n        >\r\n          Redo\r\n        </button>\r\n      </div>\r\n      <div\r\n        style={{\r\n          width: 400,\r\n          height: 400,\r\n          border: '1px solid #eaeaea',\r\n          boxSizing: 'border-box',\r\n          overflow: 'hidden',\r\n        }}\r\n        onClick={handleLeftClick}\r\n        onMouseMove={handleMouseMove}\r\n      >\r\n        {drawState.circles.map((circle, index) => {\r\n          return (\r\n            <div\r\n              key={circle.position.x + '-' + circle.position.y + '-' + circle.diameter}\r\n              style={{\r\n                position: 'absolute',\r\n                left: circle.position.x - circle.diameter / 2,\r\n                top: circle.position.y - circle.diameter / 2,\r\n                width: circle.diameter,\r\n                height: circle.diameter,\r\n                borderRadius: circle.diameter / 2,\r\n                border: '1px solid #666',\r\n                backgroundColor: selectedCircleInfo?.index === index ? '#eaeaea' : '',\r\n              }}\r\n              onContextMenu={handleRightClick}\r\n            ></div>\r\n          )\r\n        })}\r\n      </div>\r\n      {tooltipsState.type === 'show-tips' && (\r\n        <OuterClickWrapper\r\n          key=\"show-tips\"\r\n          style={{\r\n            position: 'absolute',\r\n            left: tooltipsState.pageX,\r\n            top: tooltipsState.pageY,\r\n            zIndex: 100,\r\n            background: '#fff',\r\n            border: '1px solid #666',\r\n            padding: 10,\r\n          }}\r\n          onOuterClick={handleCloseSlider}\r\n          onClick={handleOpenSlider}\r\n        >\r\n          Adjust Diameter\r\n        </OuterClickWrapper>\r\n      )}\r\n      {tooltipsState.type === 'open-slider' && (\r\n        <OuterClickWrapper\r\n          key=\"open-slider\"\r\n          style={{\r\n            position: 'absolute',\r\n            left: tooltipsState.pageX,\r\n            top: tooltipsState.pageY,\r\n            background: '#fff',\r\n            border: '1px solid #666',\r\n            zIndex: 100,\r\n            padding: 10,\r\n          }}\r\n          onOuterClick={handleCloseSlider}\r\n        >\r\n          <p>Adjust Diameter</p>\r\n          <div>\r\n            <input\r\n              type=\"range\"\r\n              value={selectedCircleInfo?.circle.diameter ?? ''}\r\n              min={1}\r\n              max={150}\r\n              onChange={handleAdust}\r\n            />\r\n          </div>\r\n        </OuterClickWrapper>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { Remesh } from 'remesh'\r\n\r\nexport type CellContent =\r\n  | {\r\n      type: 'text'\r\n      text: string\r\n    }\r\n  | {\r\n      type: 'formula'\r\n      formula: string\r\n    }\r\n\r\nexport type CellState = {\r\n  content: CellContent\r\n  isEditing: boolean\r\n}\r\n\r\nexport const CellsDomain = Remesh.domain({\r\n  name: 'CellsDomain',\r\n  inspectable: false,\r\n  impl: (domain) => {\r\n    const RowKeyListState = domain.state({\r\n      name: 'RowKeyListState',\r\n      default: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9].map(String),\r\n    })\r\n\r\n    const RowKeyListQuery = domain.query({\r\n      name: 'RowKeyListQuery',\r\n      impl: ({ get }) => {\r\n        return get(RowKeyListState())\r\n      },\r\n    })\r\n\r\n    const ColumnKeyListState = domain.state({\r\n      name: 'ColumnKeyListState',\r\n      default: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'],\r\n    })\r\n\r\n    const ColumnKeyListQuery = domain.query({\r\n      name: 'ColumnKeyListQuery',\r\n      impl: ({ get }) => {\r\n        return get(ColumnKeyListState())\r\n      },\r\n    })\r\n\r\n    const CellState = domain.state<CellState>({\r\n      name: 'CellState',\r\n      default: {\r\n        content: {\r\n          type: 'text',\r\n          text: '',\r\n        },\r\n        isEditing: false,\r\n      },\r\n    })\r\n\r\n    const CellQuery = domain.query({\r\n      name: 'CellQuery',\r\n      impl: ({ get }, key: string) => {\r\n        const state = get(CellState(key))\r\n\r\n        if (state.content.type === 'text') {\r\n          return {\r\n            type: 'text' as const,\r\n            isEditing: state.isEditing,\r\n            content: state.content.text,\r\n            displayContent: state.content.text,\r\n          }\r\n        }\r\n\r\n        if (state.content.type === 'formula') {\r\n          const evaluate = compile(state.content.formula)\r\n          const getCellValue = (cellKey: string) => {\r\n            return Number(get(CellQuery(cellKey)).displayContent)\r\n          }\r\n\r\n          return {\r\n            type: 'formula' as const,\r\n            isEditing: state.isEditing,\r\n            content: state.content.formula,\r\n            displayContent: evaluate(getCellValue),\r\n          }\r\n        }\r\n\r\n        throw new Error('Unknown cell type')\r\n      },\r\n    })\r\n\r\n    const SelectCellCommand = domain.command({\r\n      name: 'SelectCellCommand',\r\n      impl: ({ get }, key: string) => {\r\n        const state = get(CellState(key))\r\n\r\n        return CellState(key).new({\r\n          content: state.content,\r\n          isEditing: true,\r\n        })\r\n      },\r\n    })\r\n\r\n    const UnselectCellCommand = domain.command({\r\n      name: 'UnselectCellCommand',\r\n      impl: ({ get }, key: string) => {\r\n        const state = get(CellState(key))\r\n\r\n        return CellState(key).new({\r\n          content: state.content,\r\n          isEditing: false,\r\n        })\r\n      },\r\n    })\r\n\r\n    const SetCellContentCommand = domain.command({\r\n      name: 'SetCellContentCommand',\r\n      impl: ({ get }, { key, input }: { key: string; input: string }) => {\r\n        const state = get(CellState(key))\r\n\r\n        if (input.startsWith('=')) {\r\n          return CellState(key).new({\r\n            content: {\r\n              type: 'formula',\r\n              formula: input,\r\n            },\r\n            isEditing: state.isEditing,\r\n          })\r\n        } else {\r\n          return CellState(key).new({\r\n            content: {\r\n              type: 'text',\r\n              text: input,\r\n            },\r\n            isEditing: state.isEditing,\r\n          })\r\n        }\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        CellQuery,\r\n        ColumnKeyListQuery,\r\n        RowKeyListQuery,\r\n      },\r\n      command: {\r\n        SelectCellCommand,\r\n        UnselectCellCommand,\r\n        SetCellContentCommand,\r\n      },\r\n    }\r\n  },\r\n})\r\n\r\nconst compile = (formula: string) => {\r\n  return (get: Function) => {\r\n    try {\r\n      const expression = formula.slice(1).replace(/\\w\\d+/g, (matched) => {\r\n        return `get('${matched}')`\r\n      })\r\n\r\n      const fn = new Function('get', `return (${expression}).toString()`)\r\n\r\n      return fn(get)\r\n    } catch {\r\n      return '-'\r\n    }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\r\n\r\nimport { CellsDomain } from 'remesh-domains-for-demos/dist/7guis/Cells'\r\n\r\nexport const CellsApp = () => {\r\n  const cellsDomain = useRemeshDomain(CellsDomain())\r\n  const columnKeyList = useRemeshQuery(cellsDomain.query.ColumnKeyListQuery())\r\n  const rowKeyList = useRemeshQuery(cellsDomain.query.RowKeyListQuery())\r\n\r\n  return (\r\n    <div>\r\n      <h2>Cells</h2>\r\n      <table\r\n        style={{\r\n          borderCollapse: 'collapse',\r\n          border: '1px solid #bbb',\r\n          textAlign: 'center',\r\n        }}\r\n      >\r\n        <thead>\r\n          <tr\r\n            style={{\r\n              backgroundColor: '#f6f6f6',\r\n            }}\r\n          >\r\n            <th style={{ width: 30, display: 'block' }}></th>\r\n            {columnKeyList.map((key) => (\r\n              <th\r\n                key={key}\r\n                style={{\r\n                  maxWidth: 80,\r\n                  border: '1px solid #bbb',\r\n                }}\r\n              >\r\n                {key}\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {rowKeyList.map((rowKey) => {\r\n            return (\r\n              <tr key={rowKey}>\r\n                <RowView rowKey={rowKey} columnKeyList={columnKeyList} />\r\n              </tr>\r\n            )\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\ntype RowViewProps = {\r\n  rowKey: string\r\n  columnKeyList: string[]\r\n}\r\n\r\nconst RowView = ({ columnKeyList, rowKey }: RowViewProps) => {\r\n  const send = useRemeshSend()\r\n  const cells = useRemeshDomain(CellsDomain())\r\n\r\n  return (\r\n    <>\r\n      <td\r\n        style={{\r\n          width: 30,\r\n          border: '1px solid #bbb',\r\n          backgroundColor: '#f6f6f6',\r\n        }}\r\n      >\r\n        {rowKey}\r\n      </td>\r\n      {columnKeyList.map((columnKey) => {\r\n        const cellKey = `${columnKey}${rowKey}`\r\n        return (\r\n          <td\r\n            key={cellKey}\r\n            style={{\r\n              maxWidth: 80,\r\n              minWidth: 80,\r\n              border: '1px solid #bbb',\r\n              overflow: 'hidden',\r\n            }}\r\n            onClick={(event) => {\r\n              if (event.target instanceof HTMLInputElement) {\r\n                return\r\n              }\r\n              send(cells.command.SelectCellCommand(cellKey))\r\n            }}\r\n          >\r\n            <CellView cellKey={cellKey} />\r\n          </td>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n\r\nconst CellView = ({ cellKey }: { cellKey: string }) => {\r\n  const send = useRemeshSend()\r\n  const cellsDomain = useRemeshDomain(CellsDomain())\r\n  const cell = useRemeshQuery(cellsDomain.query.CellQuery(cellKey))\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    send(cellsDomain.command.SetCellContentCommand({ key: cellKey, input: e.target.value }))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {cell.isEditing && (\r\n        <input\r\n          style={{\r\n            width: '100%',\r\n            height: '100%',\r\n            backgroundColor: 'transparent',\r\n            boxSizing: 'border-box',\r\n            textAlign: 'center',\r\n          }}\r\n          value={cell.content}\r\n          onChange={handleChange}\r\n          onBlur={() => {\r\n            if (cell.isEditing) {\r\n              send(cellsDomain.command.UnselectCellCommand(cellKey))\r\n            }\r\n          }}\r\n          autoFocus\r\n        />\r\n      )}\r\n\r\n      {!cell.isEditing && cell.displayContent}\r\n    </>\r\n  )\r\n}\r\n","import React, { StrictMode } from 'react'\r\nimport * as ReactDOMClient from 'react-dom/client'\r\n\r\nimport { Remesh } from 'remesh'\r\n\r\nimport { RemeshRoot } from 'remesh-react'\r\n\r\nimport { RemeshReduxDevtools } from 'remesh-redux-devtools'\r\nimport { RemeshLogger } from 'remesh-logger'\r\n\r\nimport { CounterApp } from './Counter'\r\nimport { TemperatureConverterApp } from './TemperatureConverter'\r\nimport { FlightBookerApp } from './FlightBooker'\r\nimport { TimerApp } from './Timer'\r\nimport { CRUDApp } from './CRUD'\r\nimport { CircleDrawerApp } from './CircleDrawer'\r\nimport { CellsApp } from './Cells'\r\n\r\nconst Root = () => {\r\n  return (\r\n    <div>\r\n      <h1>7GUIs in React/Remesh/TypeScript</h1>\r\n      <p>This is a live version of an implementation (source) of 7GUIs with React, TypeScript and Remesh.</p>\r\n      <hr />\r\n      <CounterApp />\r\n      <hr />\r\n      <TemperatureConverterApp />\r\n      <hr />\r\n      <FlightBookerApp />\r\n      <hr />\r\n      <TimerApp />\r\n      <hr />\r\n      <CRUDApp />\r\n      <hr />\r\n      <CircleDrawerApp />\r\n      <hr />\r\n      <CellsApp />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst container = document.getElementById('root')\r\n\r\nif (container) {\r\n  const root = ReactDOMClient.createRoot(container)\r\n  const store = Remesh.store({\r\n    inspectors: [RemeshReduxDevtools(), RemeshLogger()],\r\n  })\r\n\r\n  root.render(\r\n    <StrictMode>\r\n      <RemeshRoot store={store}>\r\n        <Root />\r\n      </RemeshRoot>\r\n    </StrictMode>,\r\n  )\r\n}\r\n"],"names":["performanceTimestampProvider","animationFrameProvider","callback","request","cancel","delegate","handle","timestamp","Subscription","args","_i","__spreadArray","__read","animationFrames","timestampProvider","animationFramesFactory","DEFAULT_ANIMATION_FRAMES","schedule","Observable","subscriber","subscription","provider","start","run","now","NEVER","noop","distinctUntilChanged","comparator","keySelector","identity","defaultCompare","operate","source","previousKey","first","createOperatorSubscriber","value","currentKey","a","b","pairwise","prev","hasPrev","p","startWith","values","scheduler","popScheduler","concat","CounterDomain","Remesh","domain","CountState","CountQuery","get","IncreCommand","count","CounterApp","send","useRemeshSend","counterDomain","useRemeshDomain","useRemeshQuery","query","width","border","boxSizing","padding","_jsx","_jsxs","command","TemperatureConverterDomain","CelsiusState","CelsiusQuery","FahrenheitState","FahrenheitQuery","ResetBothCommand","UpdateCelsiusCommand","input","celsius","fahrenheit","UpdateFahrenheitCommand","TemperatureConverterApp","event","target","handleCelsius","handleFahrenheit","getDate","dateInput","list","date","toDateInput","compareDate","date1","date2","FlightBookerDomain","OptionState","OptionQuery","StartDateInputState","StartDateInputQuery","EndDateInputState","EndDateInputQuery","StartDateQuery","startDateInput","EndDateQuery","endDateInput","UpdateOptionCommand","option","UpdateStartDateCommand","UpdateEndDateCommand","startDate","endDate","startDateStatus","endDateStatus","bookButtonStatus","FlightBookerApp","flightBooker","status","StatusQuery","handleOptionChange","handleStartDateChange","handleEndDateChange","handleBookButtonClick","bookButton","alert","backgroundColor","TimerDomain","DurationState","DurationQuery","ElapsedState","ElapsedQuery","StartEvent","StopEvent","UpdateElapsedCommand","increment","duration","elapsed","UpdateDurationCommand","newDuration","ResetElapsedCommand","fromEvent","startEvent$","map","stopEvent$","merge","switchMap","signal","takeUntil","TimerApp","timerDomain","handleDurationChange","parseInt","isNaN","handleResetElapsed","display","marginRight","whiteSpace","height","background","Math","min","verticalAlign","borderRadius","toFixed","CRUDDomain","nameUid","nameListModule","ListModule","item","FilterPrefixState","FilterPrefixQuery","UpdateFilterPrefixCommand","prefix","CreatedState","CreatedQuery","UpdateCreatedCommand","name","currentName","SelectedState","SelectedQuery","SelectItemCommand","targetItemId","currentSelected","targetItem","UpdateSelectedNameCommand","selected","FilteredListQuery","filterPrefix","nameList","SyncSelectedCommand","CreateNameItemCommand","created","newItem","OuterClickWrapper","props","onOuterClick","restProps","containerRef","useRef","useEffect","handleClick","parentElement","current","contains","addEventListener","removeEventListener","CRUDApp","filteredList","filter","handleFilterChange","e","handleSelect","itemId","handleNameChange","handleSurnameChange","surname","handleCreate","handleSync","handleDelete","DeleteItemCommand","id","overflow","fullName","color","CircleDrawerDomain","HistoryState","HistoryQuery","RecordHistoryStateCommand","state","history","previousItems","lastState","newItems","newIndex","DrawState","DrawQuery","UndoCommand","canUndo","CanUndoQuery","RedoCommand","CanRedoQuery","SelectedIndexState","SelectedIndexQuery","SetSelectedIndexCommand","index","SelectedCircleInfoQuery","circles","DrawCommand","action","newState","AdjustCommand","circle","TooltipsState","TooltipsQuery","UpdateTooltipsCommand","positionInCircle","position","x","y","diameter","circlePosition","circleX","circleY","radius","dx","dy","CircleDrawerApp","drawState","tooltipsState","selectedCircleInfo","canRedo","getCircleInfo","find","indexOf","handleRightClick","preventDefault","pageX","pageY","circleInfo","type","handleLeftClick","handleMouseMove","handleOpenSlider","handleCloseSlider","handleAdust","textAlign","margin","left","top","zIndex","CellsDomain","RowKeyListState","RowKeyListQuery","ColumnKeyListState","ColumnKeyListQuery","CellState","CellQuery","key","evaluate","compile","getCellValue","cellKey","SelectCellCommand","UnselectCellCommand","SetCellContentCommand","formula","expression","matched","CellsApp","cellsDomain","columnKeyList","rowKeyList","borderCollapse","maxWidth","rowKey","RowView","cells","_Fragment","columnKey","minWidth","HTMLInputElement","CellView","cell","handleChange","isEditing","content","displayContent","Root","container","document","getElementById","root","ReactDOMClient","store","inspectors","RemeshReduxDevtools","RemeshLogger","render","StrictMode","RemeshRoot"],"mappings":"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"}