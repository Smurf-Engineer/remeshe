import{R as P}from"./remesh-react.2e60fbbd.js";const b=(r,e)=>{var C,I;const l=r.state({name:`${e.name}.KeyListState`,default:(I=(C=e.default)==null?void 0:C.map(e.key))!=null?I:[]}),o=r.query({name:`${e.name}.KeyListQuery`,impl:({get:t})=>t(l())}),y=r.entity({name:`${e.name}.ItemEntity`,key:e.key,injectEntities:e.default}),h=r.query({name:`${e.name}.ItemQuery`,impl:({get:t},m)=>t(y(m))}),L=r.query({name:`${e.name}.ItemListQuery`,impl:({get:t})=>t(o()).map(n=>t(y(n)))}),u=r.command({name:`${e.name}.SetListCommand`,impl:({},t)=>{const m=[],n=[];for(const s of t){const c=e.key(s),a=y(c).new(s);m.push(c),n.push(a)}return[l().new(m),n]}}),w=r.command({name:`${e.name}.AddItemCommand`,impl:({get:t},m)=>{const n=t(l()),s=e.key(m);return n.includes(s)?k(m):[l().new([...n,s]),y(s).new(m)]}}),K=r.command({name:`${e.name}.AddItemListCommand`,impl:({get:t},m)=>{if(m.length===0)return null;const n=t(l()),s=[],c=[...n];for(const a of m){const d=e.key(a);c.includes(d)||(s.push(y(d).new(a)),c.push(d))}return[l().new(c),s]}}),A=r.command({name:`${e.name}.DeleteItemCommand`,impl:({get:t},m)=>{const n=t(L()),s=n.filter(c=>e.key(c)!==m);return s.length===n.length?null:[u(s)]}}),U=r.command({name:`${e.name}.DeleteItemListCommand`,impl:({get:t},m)=>{const n=t(L()),s=n.filter(c=>!m.includes(e.key(c)));return s.length===n.length?null:u(s)}}),D=r.command({name:`${e.name}.DeleteAllCommand`,impl:({})=>u([])}),k=r.command({name:`${e.name}.UpdateItemCommand`,impl:({get:t},m)=>{const n=e.key(m);return t(l()).includes(n)?[y(n).new(m)]:null}}),Q=r.command({name:`${e.name}.UpdateItemListCommand`,impl:({get:t},m)=>{const n=t(l()),s=[];for(const c of m){const a=e.key(c);n.includes(a)&&s.push(y(a).new(c))}return s}}),q=r.command({name:`${e.name}.InsertAtCommand`,impl:({get:t},{index:m,item:n})=>{if(t(l()).includes(e.key(n)))return null;const c=t(L()),a=c.slice(0,m).concat(n).concat(c.slice(m));return u(a)}}),R=r.command({name:`${e.name}.InsertBeforeCommand`,impl:({get:t},{before:m,item:n})=>{const s=t(l()),c=e.key(n),a=e.key(m);if(s.includes(c))return null;const d=t(L()),i=[];for(const f of d)e.key(f)===a&&i.push(n),i.push(f);return u(i)}}),S=r.command({name:`${e.name}.InsertAfterCommand`,impl:({get:t},{after:m,item:n})=>{const s=t(l()),c=e.key(n),a=e.key(m);if(s.includes(c))return null;const d=t(L()),i=[];for(const f of d){const $=e.key(f);i.push(f),$===a&&i.push(n)}return u(i)}}),E=r.command({name:`${e.name}.ResetCommand`,impl:({})=>{var t;return u((t=e.default)!=null?t:[])}});return P.module({command:{SetListCommand:u,AddItemCommand:w,AddItemListCommand:K,DeleteItemCommand:A,DeleteItemListCommand:U,DeleteAllCommand:D,UpdateItemCommand:k,UpdateItemListCommand:Q,InsertAtCommand:q,InsertBeforeCommand:R,InsertAfterCommand:S,ResetCommand:E},query:{KeyListQuery:o,ItemQuery:h,ItemListQuery:L}})};export{b as L};
//# sourceMappingURL=list.eb60b134.js.map
