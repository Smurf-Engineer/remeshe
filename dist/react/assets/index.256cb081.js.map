{"version":3,"file":"index.256cb081.js","sources":["../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/scheduler/performanceTimestampProvider.js","../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/scheduler/animationFrameProvider.js","../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/observable/dom/animationFrames.js","../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/observable/never.js","../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js","../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/operators/pairwise.js","../../../node_modules/.pnpm/rxjs@7.5.5/node_modules/rxjs/dist/esm5/internal/operators/startWith.js","../../../projects/domains/src/7guis/Counter.ts","../../../projects/react-demos/src/7guis/Counter.tsx","../../../projects/domains/src/7guis/TemperatureConverter.ts","../../../projects/react-demos/src/7guis/TemperatureConverter.tsx","../../../projects/domains/src/7guis/FlightBooker.ts","../../../projects/react-demos/src/7guis/FlightBooker.tsx","../../../projects/domains/src/7guis/Timer.ts","../../../projects/react-demos/src/7guis/Timer.tsx","../../../projects/domains/src/7guis/CRUD.ts","../../../projects/react-demos/src/7guis/OuterClickWrapper.tsx","../../../projects/react-demos/src/7guis/CRUD.tsx","../../../projects/domains/src/7guis/CircleDrawer.ts","../../../projects/react-demos/src/7guis/CircleDrawer.tsx","../../../projects/domains/src/7guis/Cells.ts","../../../projects/react-demos/src/7guis/Cells.tsx","../../../projects/react-demos/src/7guis/index.tsx"],"sourcesContent":["export var performanceTimestampProvider = {\n    now: function () {\n        return (performanceTimestampProvider.delegate || performance).now();\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=performanceTimestampProvider.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { Subscription } from '../Subscription';\nexport var animationFrameProvider = {\n    schedule: function (callback) {\n        var request = requestAnimationFrame;\n        var cancel = cancelAnimationFrame;\n        var delegate = animationFrameProvider.delegate;\n        if (delegate) {\n            request = delegate.requestAnimationFrame;\n            cancel = delegate.cancelAnimationFrame;\n        }\n        var handle = request(function (timestamp) {\n            cancel = undefined;\n            callback(timestamp);\n        });\n        return new Subscription(function () { return cancel === null || cancel === void 0 ? void 0 : cancel(handle); });\n    },\n    requestAnimationFrame: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = animationFrameProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.requestAnimationFrame) || requestAnimationFrame).apply(void 0, __spreadArray([], __read(args)));\n    },\n    cancelAnimationFrame: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var delegate = animationFrameProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.cancelAnimationFrame) || cancelAnimationFrame).apply(void 0, __spreadArray([], __read(args)));\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=animationFrameProvider.js.map","import { Observable } from '../../Observable';\nimport { Subscription } from '../../Subscription';\nimport { performanceTimestampProvider } from '../../scheduler/performanceTimestampProvider';\nimport { animationFrameProvider } from '../../scheduler/animationFrameProvider';\nexport function animationFrames(timestampProvider) {\n    return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\nfunction animationFramesFactory(timestampProvider) {\n    var schedule = animationFrameProvider.schedule;\n    return new Observable(function (subscriber) {\n        var subscription = new Subscription();\n        var provider = timestampProvider || performanceTimestampProvider;\n        var start = provider.now();\n        var run = function (timestamp) {\n            var now = provider.now();\n            subscriber.next({\n                timestamp: timestampProvider ? now : timestamp,\n                elapsed: now - start,\n            });\n            if (!subscriber.closed) {\n                subscription.add(schedule(run));\n            }\n        };\n        subscription.add(schedule(run));\n        return subscription;\n    });\n}\nvar DEFAULT_ANIMATION_FRAMES = animationFramesFactory();\n//# sourceMappingURL=animationFrames.js.map","import { Observable } from '../Observable';\nimport { noop } from '../util/noop';\nexport var NEVER = new Observable(noop);\nexport function never() {\n    return NEVER;\n}\n//# sourceMappingURL=never.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function pairwise() {\n    return operate(function (source, subscriber) {\n        var prev;\n        var hasPrev = false;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var p = prev;\n            prev = value;\n            hasPrev && subscriber.next([p, value]);\n            hasPrev = true;\n        }));\n    });\n}\n//# sourceMappingURL=pairwise.js.map","import { concat } from '../observable/concat';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\nexport function startWith() {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(values);\n    return operate(function (source, subscriber) {\n        (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=startWith.js.map","import { Remesh } from 'remesh'\n\nexport const CounterDomain = Remesh.domain({\n  name: 'CounterDomain',\n  impl: (domain) => {\n    const CountState = domain.state({\n      name: 'CounterState',\n      default: 0,\n    })\n\n    const CountQuery = domain.query({\n      name: 'CounterQuery',\n      impl: ({ get }) => {\n        return get(CountState())\n      },\n    })\n\n    const IncreCommand = domain.command({\n      name: 'IncreCommand',\n      impl: ({ get }) => {\n        const count = get(CountState())\n        return CountState().new(count + 1)\n      },\n    })\n\n    return {\n      query: {\n        CountQuery,\n      },\n      command: {\n        IncreCommand,\n      },\n    }\n  },\n})\n","import { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { CounterDomain } from 'remesh-domains-for-demos/dist/7guis/Counter'\n\nexport const CounterApp = () => {\n  const send = useRemeshSend()\n  const counterDomain = useRemeshDomain(CounterDomain())\n  const count = useRemeshQuery(counterDomain.query.CountQuery())\n\n  const handleIncre = () => {\n    send(counterDomain.command.IncreCommand())\n  }\n\n  return (\n    <div\n      style={{\n        width: 400,\n        border: '1px solid #eaeaea',\n        boxSizing: 'border-box',\n        padding: 10,\n      }}\n    >\n      <h2>Counter</h2>\n      <input type=\"number\" readOnly value={count} />\n      <label>\n        <button onClick={handleIncre}>Count </button>{' '}\n      </label>\n    </div>\n  )\n}\n","import { Remesh } from 'remesh'\n\nexport const TemperatureConverterDomain = Remesh.domain({\n  name: 'TemperatureConverterDomain',\n  impl: (domain) => {\n    const CelsiusState = domain.state({\n      name: 'CelsiusState',\n      default: '',\n    })\n\n    const CelsiusQuery = domain.query({\n      name: 'CelsiusQuery',\n      impl: ({ get }) => {\n        return get(CelsiusState())\n      },\n    })\n\n    const FahrenheitState = domain.state({\n      name: 'FahrenheitState',\n      default: '',\n    })\n\n    const FahrenheitQuery = domain.query({\n      name: 'FahrenheitQuery',\n      impl: ({ get }) => {\n        return get(FahrenheitState())\n      },\n    })\n\n    const ResetBothCommand = domain.command({\n      name: 'ResetBothCommand',\n      impl: ({}) => {\n        return [CelsiusState().new(''), FahrenheitState().new('')]\n      },\n    })\n\n    const UpdateCelsiusCommand = domain.command({\n      name: 'UpdateCelsiusCommand',\n      impl: ({}, input: string) => {\n        if (input === '') {\n          return ResetBothCommand()\n        }\n\n        const celsius = parseFloat(input)\n\n        if (Number.isNaN(celsius)) {\n          return CelsiusState().new(input)\n        }\n\n        const fahrenheit = celsius * (9 / 5) + 32\n\n        return [CelsiusState().new(input), FahrenheitState().new(fahrenheit.toString())]\n      },\n    })\n\n    const UpdateFahrenheitCommand = domain.command({\n      name: 'UpdateFahrenheitCommand',\n      impl: ({}, input: string) => {\n        if (input === '') {\n          return ResetBothCommand()\n        }\n\n        const fahrenheit = parseFloat(input)\n\n        if (Number.isNaN(fahrenheit)) {\n          return FahrenheitState().new(input)\n        }\n\n        const celsius = (fahrenheit - 32) * (5 / 9)\n\n        return [CelsiusState().new(celsius.toString()), FahrenheitState().new(input)]\n      },\n    })\n\n    return {\n      query: {\n        CelsiusQuery,\n        FahrenheitQuery,\n      },\n      command: {\n        UpdateCelsiusCommand,\n        UpdateFahrenheitCommand,\n      },\n    }\n  },\n})\n","import React from 'react'\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { TemperatureConverterDomain } from 'remesh-domains-for-demos/dist/7guis/TemperatureConverter'\n\nexport const TemperatureConverterApp = () => {\n  const send = useRemeshSend()\n  const domain = useRemeshDomain(TemperatureConverterDomain())\n  const celsius = useRemeshQuery(domain.query.CelsiusQuery())\n  const fahrenheit = useRemeshQuery(domain.query.FahrenheitQuery())\n\n  const handleCelsius = (event: React.ChangeEvent<HTMLInputElement>) => {\n    send(domain.command.UpdateCelsiusCommand(event.target.value))\n  }\n\n  const handleFahrenheit = (event: React.ChangeEvent<HTMLInputElement>) => {\n    send(domain.command.UpdateFahrenheitCommand(event.target.value))\n  }\n\n  return (\n    <div\n      style={{\n        border: '1px solid #eaeaea',\n        boxSizing: 'border-box',\n        padding: 10,\n      }}\n    >\n      <h2>Temperature Converter</h2>\n      <div>\n        <input type=\"text\" value={celsius} onChange={handleCelsius} />\n        <label htmlFor=\"\">Celsius</label>=\n        <input type=\"text\" value={fahrenheit} onChange={handleFahrenheit} />\n        <label htmlFor=\"\">Fahrenheit</label>\n      </div>\n    </div>\n  )\n}\n","import { Remesh } from 'remesh'\n\nexport type FlightBookerOption = 'one-way' | 'return'\n\nexport type FlightBookerStatus = {\n  startDate: 'valid' | 'invalid'\n  endDate: 'valid' | 'invalid' | 'disabled' | 'enabled'\n  bookButton: 'disabled' | 'enabled'\n}\n\nexport const getDate = (dateInput: string) => {\n  const list = dateInput.split('.')\n\n  if (list.length !== 3) {\n    return null\n  }\n\n  const date = new Date(`${list[2]}.${list[1]}.${list[0]}`)\n\n  if (date.toString() === 'Invalid Date') {\n    return null\n  }\n\n  return date\n}\n\nexport const toDateInput = (date: Date) => {\n  const list = date.toLocaleDateString().split('/')\n\n  return `${list[2]}.${list[1]}.${list[0]}`\n}\n\nexport const compareDate = (date1: Date, date2: Date) => {\n  if (date1.getFullYear() !== date2.getFullYear()) {\n    return date1.getFullYear() - date2.getFullYear()\n  }\n\n  if (date1.getMonth() !== date2.getMonth()) {\n    return date1.getMonth() - date2.getMonth()\n  }\n\n  return date1.getDate() - date2.getDate()\n}\n\nexport const FlightBookerDomain = Remesh.domain({\n  name: 'FlightBookerDomain',\n  impl: (domain) => {\n    const OptionState = domain.state<FlightBookerOption>({\n      name: 'OptionState',\n      default: 'one-way',\n    })\n\n    const OptionQuery = domain.query({\n      name: 'OptionQuery',\n      impl: ({ get }) => {\n        return get(OptionState())\n      },\n    })\n\n    const StartDateInputState = domain.state({\n      name: 'StartDateInputState',\n      default: toDateInput(new Date()),\n    })\n\n    const StartDateInputQuery = domain.query({\n      name: 'StartDateInputQuery',\n      impl: ({ get }) => {\n        return get(StartDateInputState())\n      },\n    })\n\n    const EndDateInputState = domain.state({\n      name: 'EndDateInputState',\n      default: toDateInput(new Date()),\n    })\n\n    const EndDateInputQuery = domain.query({\n      name: 'EndDateInputQuery',\n      impl: ({ get }) => {\n        return get(EndDateInputState())\n      },\n    })\n\n    const StartDateQuery = domain.query({\n      name: 'StartDateQuery',\n      impl: ({ get }) => {\n        const startDateInput = get(StartDateInputState())\n        return getDate(startDateInput)\n      },\n    })\n\n    const EndDateQuery = domain.query({\n      name: 'EndDateQuery',\n      impl: ({ get }) => {\n        const endDateInput = get(EndDateInputState())\n        return getDate(endDateInput)\n      },\n    })\n\n    const UpdateOptionCommand = domain.command({\n      name: 'UpdateOptionCommand',\n      impl: ({}, option: FlightBookerOption) => {\n        return OptionState().new(option)\n      },\n    })\n\n    const UpdateStartDateCommand = domain.command({\n      name: 'UpdateStartDateCommand',\n      impl: ({}, dateInput: string) => {\n        return StartDateInputState().new(dateInput)\n      },\n    })\n\n    const UpdateEndDateCommand = domain.command({\n      name: 'UpdateEndDateCommand',\n      impl: ({}, dateInput: string) => {\n        return EndDateInputState().new(dateInput)\n      },\n    })\n\n    const StatusQuery = domain.query({\n      name: 'StatusQuery',\n      impl: ({ get }): FlightBookerStatus => {\n        const option = get(OptionState())\n        const startDate = get(StartDateQuery())\n        const endDate = get(EndDateQuery())\n\n        const startDateStatus = !!startDate ? 'valid' : 'invalid'\n        const endDateStatus = option === 'return' ? (!!endDate ? 'valid' : 'invalid') : 'disabled'\n\n        const bookButtonStatus =\n          option === 'one-way'\n            ? !!startDate\n              ? 'enabled'\n              : 'disabled'\n            : !!startDate && !!endDate && compareDate(startDate, endDate) <= 0\n            ? 'enabled'\n            : 'disabled'\n\n        return {\n          startDate: startDateStatus,\n          endDate: endDateStatus,\n          bookButton: bookButtonStatus,\n        }\n      },\n    })\n\n    return {\n      query: {\n        StatusQuery,\n        OptionQuery,\n        StartDateQuery,\n        EndDateQuery,\n        StartDateInputQuery,\n        EndDateInputQuery,\n      },\n      command: {\n        UpdateOptionCommand,\n        UpdateStartDateCommand,\n        UpdateEndDateCommand,\n      },\n    }\n  },\n})\n","import React from 'react'\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { FlightBookerDomain, FlightBookerOption } from 'remesh-domains-for-demos/dist/7guis/FlightBooker'\n\nexport const FlightBookerApp = () => {\n  const send = useRemeshSend()\n  const flightBooker = useRemeshDomain(FlightBookerDomain())\n  const option = useRemeshQuery(flightBooker.query.OptionQuery())\n  const status = useRemeshQuery(flightBooker.query.StatusQuery())\n\n  const startDateInput = useRemeshQuery(flightBooker.query.StartDateInputQuery())\n  const endDateInput = useRemeshQuery(flightBooker.query.EndDateInputQuery())\n\n  const handleOptionChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    send(flightBooker.command.UpdateOptionCommand(event.target.value as FlightBookerOption))\n  }\n\n  const handleStartDateChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    send(flightBooker.command.UpdateStartDateCommand(event.target.value))\n  }\n\n  const handleEndDateChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    send(flightBooker.command.UpdateEndDateCommand(event.target.value))\n  }\n\n  const handleBookButtonClick = () => {\n    if (status.bookButton === 'enabled') {\n      if (option === 'one-way') {\n        alert(`You have booked a one-way flight on ${startDateInput}`)\n      } else {\n        alert(`You have booked return flight from ${startDateInput} to ${endDateInput}`)\n      }\n    }\n  }\n\n  return (\n    <div\n      style={{\n        width: 400,\n        border: '1px solid #eaeaea',\n        boxSizing: 'border-box',\n        padding: 10,\n      }}\n    >\n      <h2>Flight Booker</h2>\n      <div>\n        <select value={option} onChange={handleOptionChange}>\n          <option value=\"one-way\">One-way flight</option>\n          <option value=\"return\">Return flight</option>\n        </select>\n      </div>\n      <div>\n        <input\n          type=\"text\"\n          style={{\n            backgroundColor: status.startDate === 'invalid' ? 'red' : '',\n          }}\n          value={startDateInput}\n          onChange={handleStartDateChange}\n        />\n      </div>\n      <div>\n        <input\n          type=\"text\"\n          style={{\n            backgroundColor: status.endDate === 'invalid' ? 'red' : '',\n          }}\n          disabled={status.endDate === 'disabled'}\n          value={endDateInput}\n          onChange={handleEndDateChange}\n        />\n      </div>\n      <div>\n        <button disabled={status.bookButton === 'disabled'} onClick={handleBookButtonClick}>\n          Book\n        </button>\n      </div>\n    </div>\n  )\n}\n","import { merge, animationFrames, of, NEVER } from 'rxjs'\n\nimport { distinctUntilChanged, map, tap, pairwise, switchMap, takeUntil, startWith } from 'rxjs/operators'\n\nimport { Remesh } from 'remesh'\n\nexport const TimerDomain = Remesh.domain({\n  name: 'TimerDomain',\n  inspectable: false,\n  impl: (domain) => {\n    const DurationState = domain.state({\n      name: 'DurationState',\n      default: 15000,\n    })\n\n    const DurationQuery = domain.query({\n      name: 'DurationQuery',\n      impl: ({ get }) => {\n        return get(DurationState())\n      },\n    })\n\n    const ElapsedState = domain.state({\n      name: 'ElapsedState',\n      default: 0,\n    })\n\n    const ElapsedQuery = domain.query({\n      name: 'ElapsedQuery',\n      impl: ({ get }) => {\n        return get(ElapsedState())\n      },\n    })\n\n    const StartEvent = domain.event({\n      name: 'StartEvent',\n    })\n\n    const StopEvent = domain.event({\n      name: 'StopEvent',\n    })\n\n    const UpdateElapsedCommand = domain.command({\n      name: 'UpdateElapsedCommand',\n      impl: ({ get }, increment: number) => {\n        const duration = get(DurationState())\n        const elapsed = get(ElapsedState())\n\n        if (elapsed > duration) {\n          return StopEvent()\n        }\n\n        return ElapsedState().new(elapsed + increment)\n      },\n    })\n\n    const UpdateDurationCommand = domain.command({\n      name: 'UpdateDurationCommand',\n      impl: ({ get }, newDuration: number) => {\n        const elapsed = get(ElapsedState())\n\n        if (newDuration > elapsed) {\n          return [DurationState().new(newDuration), StartEvent()]\n        }\n\n        return DurationState().new(newDuration)\n      },\n    })\n\n    const ResetElapsedCommand = domain.command({\n      name: 'ResetElapsedCommand',\n      impl: ({}) => {\n        return [ElapsedState().new(0), StartEvent()]\n      },\n    })\n\n    domain.effect({\n      name: 'UpdateElapsedByAnimationEffect',\n      impl: ({ fromEvent }) => {\n        const startEvent$ = fromEvent(StartEvent).pipe(\n          startWith(StartEvent()),\n          map(() => 1),\n        )\n        const stopEvent$ = fromEvent(StopEvent).pipe(map(() => 0))\n\n        return merge(startEvent$, stopEvent$).pipe(\n          distinctUntilChanged(),\n          switchMap((signal) => {\n            if (signal === 0) {\n              return NEVER\n            }\n            return animationFrames().pipe(\n              pairwise(),\n              map(([a, b]) => UpdateElapsedCommand(b.elapsed - a.elapsed)),\n              takeUntil(fromEvent(StopEvent)),\n            )\n          }),\n        )\n      },\n    })\n\n    return {\n      query: {\n        DurationQuery,\n        ElapsedQuery,\n      },\n      command: {\n        ResetElapsedCommand,\n        UpdateDurationCommand,\n      },\n    }\n  },\n})\n","import React from 'react'\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { TimerDomain } from 'remesh-domains-for-demos/dist/7guis/Timer'\n\nexport const TimerApp = () => {\n  const send = useRemeshSend()\n  const timerDomain = useRemeshDomain(TimerDomain())\n  const elapsed = useRemeshQuery(timerDomain.query.ElapsedQuery())\n  const duration = useRemeshQuery(timerDomain.query.DurationQuery())\n\n  const handleDurationChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const duration = parseInt(event.target.value, 10)\n    if (!isNaN(duration)) {\n      send(timerDomain.command.UpdateDurationCommand(duration))\n    }\n  }\n\n  const handleResetElapsed = () => {\n    send(timerDomain.command.ResetElapsedCommand())\n  }\n\n  return (\n    <div\n      style={{\n        width: 400,\n        border: '1px solid #eaeaea',\n        boxSizing: 'border-box',\n        padding: 10,\n      }}\n    >\n      <h2>Timer</h2>\n      <div style={{ display: 'flex' }}>\n        <label style={{ marginRight: 10, whiteSpace: 'nowrap' }}>Elapsed Timer:</label>\n        <div style={{ width: '100%' }}>\n          <span\n            style={{\n              display: 'inline-block',\n              height: 10,\n              background: 'green',\n              width: `${Math.min(elapsed / duration, 1) * 100}%`,\n              verticalAlign: 'middle',\n              borderRadius: 5,\n            }}\n          ></span>\n        </div>\n      </div>\n      <div>{elapsed > duration ? (duration / 1000).toFixed(1) : (elapsed / 1000).toFixed(1)}s</div>\n      <div style={{ display: 'flex' }}>\n        <label style={{ width: 100, marginRight: 10 }}>Duration:</label>\n        <input\n          style={{ width: '100%' }}\n          type=\"range\"\n          min={0}\n          max={30000}\n          value={duration}\n          onChange={handleDurationChange}\n        />\n      </div>\n      <div>\n        <button style={{ width: '100% ' }} onClick={handleResetElapsed}>\n          Reset Timer\n        </button>\n      </div>\n    </div>\n  )\n}\n","import { Remesh } from 'remesh'\nimport { ListModule } from 'remesh/modules/list'\n\nexport type Name = {\n  name: string\n  surname: string\n}\n\nexport type NameItem = {\n  id: string\n} & Name\n\nexport const CRUDDomain = Remesh.domain({\n  name: 'CRUDDomain',\n  impl: (domain) => {\n    let nameUid = 0\n\n    const nameListModule = ListModule<NameItem>(domain, {\n      name: 'NameListModule',\n      key: (item) => item.id,\n    })\n\n    const FilterPrefixState = domain.state({\n      name: 'FilterPrefixState',\n      default: '',\n    })\n\n    const FilterPrefixQuery = domain.query({\n      name: 'FilterPrefixQuery',\n      impl: ({ get }) => {\n        return get(FilterPrefixState())\n      },\n    })\n\n    const UpdateFilterPrefixCommand = domain.command({\n      name: 'UpdateFilterPrefixCommand',\n      impl: ({}, prefix: string) => {\n        return FilterPrefixState().new(prefix)\n      },\n    })\n\n    const CreatedState = domain.state<Name>({\n      name: 'CreatedState',\n      default: {\n        name: '',\n        surname: '',\n      },\n    })\n\n    const CreatedQuery = domain.query({\n      name: 'CreatedQuery',\n      impl: ({ get }) => {\n        return get(CreatedState())\n      },\n    })\n\n    const UpdateCreatedCommand = domain.command({\n      name: 'UpdateCreatedCommand',\n      impl: ({ get }, name: Partial<Name>) => {\n        const currentName = get(CreatedState())\n\n        return CreatedState().new({\n          ...currentName,\n          ...name,\n        })\n      },\n    })\n\n    const SelectedState = domain.state<NameItem | null>({\n      name: 'SelectedState',\n      default: null,\n    })\n\n    const SelectedQuery = domain.query({\n      name: 'SelectedQuery',\n      impl: ({ get }) => {\n        return get(SelectedState())\n      },\n    })\n\n    const SelectItemCommand = domain.command({\n      name: 'SelectItemCommand',\n      impl: ({ get }, targetItemId: string | null) => {\n        const currentSelected = get(SelectedState())\n\n        if (targetItemId === null) {\n          if (currentSelected === null) {\n            return null\n          } else {\n            return SelectedState().new(null)\n          }\n        }\n\n        if (currentSelected && currentSelected.id === targetItemId) {\n          return SelectedState().new(null)\n        }\n\n        const targetItem = get(nameListModule.query.ItemQuery(targetItemId))\n\n        return SelectedState().new(targetItem)\n      },\n    })\n\n    const UpdateSelectedNameCommand = domain.command({\n      name: 'UpdateSelectedNameCommand',\n      impl: ({ get }, name: Partial<Name>) => {\n        const selected = get(SelectedState())\n\n        if (selected === null) {\n          return null\n        }\n\n        return SelectedState().new({\n          ...selected,\n          ...name,\n        })\n      },\n    })\n\n    const FilteredListQuery = domain.query({\n      name: 'FilteredListQuery',\n      impl: ({ get }) => {\n        const filterPrefix = get(FilterPrefixState())\n        const nameList = get(nameListModule.query.ItemListQuery())\n\n        if (filterPrefix === '') {\n          return nameList\n        }\n\n        return nameList.filter((item) => item.surname.startsWith(filterPrefix))\n      },\n    })\n\n    const SyncSelectedCommand = domain.command({\n      name: 'SyncSelectedCommand',\n      impl: ({ get }) => {\n        const selected = get(SelectedState())\n\n        if (selected === null) {\n          return null\n        }\n\n        return nameListModule.command.UpdateItemCommand(selected)\n      },\n    })\n\n    const CreateNameItemCommand = domain.command({\n      name: 'CreateNameItemCommand',\n      impl: ({ get }) => {\n        const created = get(CreatedState())\n        const newItem = {\n          id: `${nameUid++}`,\n          ...created,\n        }\n\n        return [nameListModule.command.AddItemCommand(newItem), UpdateCreatedCommand({ name: '', surname: '' })]\n      },\n    })\n\n    return {\n      query: {\n        ...nameListModule.query,\n        FilteredListQuery,\n        SelectedQuery,\n        FilterPrefixQuery,\n        CreatedQuery,\n      },\n      command: {\n        ...nameListModule.command,\n        UpdateFilterPrefixCommand,\n        SelectItemCommand,\n        UpdateCreatedCommand,\n        UpdateSelectedNameCommand,\n        CreateNameItemCommand,\n        SyncSelectedCommand,\n      },\n    }\n  },\n})\n","import { ComponentPropsWithoutRef, useEffect, useRef } from 'react'\n\nexport const OuterClickWrapper = (props: OuterClickWrapperProps) => {\n  const { onOuterClick, ...restProps } = props\n  const containerRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    const handleClick = (event: MouseEvent) => {\n      if (!(event.target as Node)?.parentElement) {\n        return\n      }\n\n      const isOuterClick = !!(containerRef.current && !containerRef.current.contains(event.target as Node))\n\n      if (isOuterClick) {\n        onOuterClick?.(event)\n      }\n    }\n\n    document.addEventListener('click', handleClick, false)\n    return () => {\n      document.removeEventListener('click', handleClick, false)\n    }\n  }, [])\n\n  return <div ref={containerRef} {...restProps}></div>\n}\ntype OuterClickWrapperProps = ComponentPropsWithoutRef<'div'> & {\n  onOuterClick?: (event: MouseEvent) => void\n}\n","import React from 'react'\n\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { CRUDDomain } from 'remesh-domains-for-demos/dist/7guis/CRUD'\n\nimport { OuterClickWrapper } from './OuterClickWrapper'\n\nexport const CRUDApp = () => {\n  const send = useRemeshSend()\n  const domain = useRemeshDomain(CRUDDomain())\n  const filteredList = useRemeshQuery(domain.query.FilteredListQuery())\n  const filter = useRemeshQuery(domain.query.FilterPrefixQuery())\n  const created = useRemeshQuery(domain.query.CreatedQuery())\n  const selected = useRemeshQuery(domain.query.SelectedQuery())\n\n  const handleFilterChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    send(domain.command.UpdateFilterPrefixCommand(e.target.value))\n  }\n\n  const handleSelect = (itemId: string | null) => {\n    send(domain.command.SelectItemCommand(itemId))\n  }\n\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (selected) {\n      send(\n        domain.command.UpdateSelectedNameCommand({\n          name: e.target.value,\n        }),\n      )\n    } else {\n      send(domain.command.UpdateCreatedCommand({ name: e.target.value }))\n    }\n  }\n\n  const handleSurnameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (selected) {\n      send(\n        domain.command.UpdateSelectedNameCommand({\n          surname: e.target.value,\n        }),\n      )\n    } else {\n      send(domain.command.UpdateCreatedCommand({ surname: e.target.value }))\n    }\n  }\n\n  const handleCreate = () => {\n    if (selected === null) {\n      send(domain.command.CreateNameItemCommand())\n    }\n  }\n\n  const handleSync = () => {\n    if (selected) {\n      send(domain.command.SyncSelectedCommand())\n    }\n  }\n\n  const handleDelete = () => {\n    if (selected) {\n      send([domain.command.DeleteItemCommand(selected.id), domain.command.SelectItemCommand(null)])\n    }\n  }\n\n  return (\n    <OuterClickWrapper\n      style={{\n        width: 400,\n        border: '1px solid #eaeaea',\n        boxSizing: 'border-box',\n        padding: 10,\n      }}\n      onOuterClick={() => {\n        handleSelect(null)\n      }}\n    >\n      <h2>CRUD</h2>\n      <div>\n        <label htmlFor=\"\">Filter prefix</label>\n        <input type=\"text\" value={filter} onChange={handleFilterChange} />\n      </div>\n      <div\n        style={{\n          display: 'flex',\n        }}\n      >\n        <div\n          style={{\n            width: '50%',\n            height: 100,\n            border: '1px solid #eaeaea',\n            overflow: 'scroll',\n          }}\n        >\n          {filteredList.map((item) => {\n            const fullName = item.name + ', ' + item.surname\n\n            return (\n              <div\n                key={item.id}\n                style={{\n                  background: selected?.id === item.id ? 'blue' : '',\n                  color: selected?.id === item.id ? 'white' : '',\n                }}\n                onClick={() => {\n                  handleSelect(item.id)\n                }}\n              >\n                {fullName}\n              </div>\n            )\n          })}\n        </div>\n        <div style={{ width: '50%', padding: 10 }}>\n          <div>\n            <label>Name:</label>\n            <input type=\"text\" value={selected ? selected.name : created.name} onChange={handleNameChange} />\n          </div>\n          <div>\n            <label>Surname:</label>\n            <input type=\"text\" value={selected ? selected.surname : created.surname} onChange={handleSurnameChange} />\n          </div>\n        </div>\n\n        <div>\n          <button disabled={selected !== null} style={{ marginRight: 10 }} onClick={handleCreate}>\n            Create\n          </button>\n          <button disabled={selected === null} style={{ marginRight: 10 }} onClick={handleSync}>\n            Update\n          </button>\n          <button disabled={selected === null} style={{ marginRight: 10 }} onClick={handleDelete}>\n            Delete\n          </button>\n        </div>\n      </div>\n    </OuterClickWrapper>\n  )\n}\n","import { Remesh } from 'remesh'\n\nexport type Position = { x: number; y: number }\n\nexport type DrawAction = {\n  position: Position\n  diameter: number\n}\n\nexport type AdjustAction = {\n  index: number\n  diameter: number\n}\n\nexport type Circle = {\n  position: Position\n  diameter: number\n}\n\nexport type DrawState = {\n  circles: Circle[]\n}\n\nexport type TooltipsState =\n  | {\n      type: 'default'\n    }\n  | {\n      type: 'show-tips'\n      index: number\n      circle: Circle\n      pageX: number\n      pageY: number\n    }\n  | {\n      type: 'open-slider'\n      index: number\n      circle: Circle\n      pageX: number\n      pageY: number\n    }\n\nexport type HistoryStateItem =\n  | {\n      action: 'add-circle'\n      state: DrawState\n    }\n  | {\n      action: 'adjust-circle'\n      index: number\n      state: DrawState\n    }\n\nexport type HistoryState = {\n  items: HistoryStateItem[]\n  currentIndex: number\n}\n\nexport const CircleDrawerDomain = Remesh.domain({\n  name: 'CircleDrawerDomain',\n  impl: (domain) => {\n    const HistoryState = domain.state<HistoryState>({\n      name: 'HistoryState',\n      default: {\n        items: [],\n        currentIndex: -1,\n      },\n    })\n\n    const HistoryQuery = domain.query({\n      name: 'HistoryQuery',\n      impl: ({ get }) => {\n        return get(HistoryState())\n      },\n    })\n\n    const RecordHistoryStateCommand = domain.command({\n      name: 'RecordHistoryStateCommand',\n      impl: ({ get }, state: HistoryStateItem) => {\n        const history = get(HistoryState())\n\n        const previousItems = history.items.slice(0, history.currentIndex + 1)\n\n        /**\n         * If the current state is the same as the last state,\n         * then we don't need to record it.\n         * This is because we are going to replace the last state\n         * with the current state.\n         *\n         * This is a bit of a hack, but it works.\n         *\n         * TODO: Find a better way to do this.\n         */\n        if (state.action === 'adjust-circle') {\n          const lastState = previousItems[previousItems.length - 1]\n          if (lastState.action === 'adjust-circle' && lastState.index === state.index) {\n            previousItems.pop()\n          }\n        }\n\n        const newItems = [...previousItems, state]\n        const newIndex = newItems.length - 1\n\n        return HistoryState().new({\n          items: newItems,\n          currentIndex: newIndex,\n        })\n      },\n    })\n\n    const DrawState = domain.state<DrawState>({\n      name: 'DrawState',\n      default: {\n        circles: [],\n      },\n    })\n\n    const DrawQuery = domain.query({\n      name: 'DrawQuery',\n      impl: ({ get }) => {\n        return get(DrawState())\n      },\n    })\n\n    const UndoCommand = domain.command({\n      name: 'UndoCommand',\n      impl: ({ get }) => {\n        const history = get(HistoryState())\n        const canUndo = get(CanUndoQuery())\n        const newIndex = history.currentIndex - 1\n\n        if (!canUndo || newIndex < 0) {\n          return [\n            DrawState().new({\n              circles: [],\n            }),\n\n            HistoryState().new({\n              items: history.items,\n              currentIndex: -1,\n            }),\n          ]\n        }\n\n        return [\n          DrawState().new(history.items[newIndex].state),\n\n          HistoryState().new({\n            items: history.items,\n            currentIndex: newIndex,\n          }),\n        ]\n      },\n    })\n\n    const RedoCommand = domain.command({\n      name: 'RedoCommand',\n      impl: ({ get }) => {\n        const history = get(HistoryState())\n        const canRedo = get(CanRedoQuery())\n\n        if (!canRedo) {\n          return []\n        }\n\n        const newIndex = history.currentIndex + 1\n\n        return [\n          DrawState().new(history.items[newIndex].state),\n          HistoryState().new({\n            items: history.items,\n            currentIndex: newIndex,\n          }),\n        ]\n      },\n    })\n\n    const CanUndoQuery = domain.query({\n      name: 'CanUndoQuery',\n      impl: ({ get }) => {\n        const history = get(HistoryState())\n        return history.currentIndex >= 0\n      },\n    })\n\n    const CanRedoQuery = domain.query({\n      name: 'CanRedoQuery',\n      impl: ({ get }) => {\n        const history = get(HistoryState())\n        return history.currentIndex < history.items.length - 1\n      },\n    })\n\n    const SelectedIndexState = domain.state<number>({\n      name: 'SelectedIndexState',\n      default: -1,\n    })\n\n    const SelectedIndexQuery = domain.query({\n      name: 'SelectedIndexQuery',\n      impl: ({ get }) => {\n        return get(SelectedIndexState())\n      },\n    })\n\n    const SetSelectedIndexCommand = domain.command({\n      name: 'SetSelectedIndexCommand',\n      impl: ({}, index: number) => {\n        return SelectedIndexState().new(index)\n      },\n    })\n\n    const SelectedCircleInfoQuery = domain.query({\n      name: 'SelectedCircleInfoQuery',\n      impl: ({ get }) => {\n        const index = get(SelectedIndexState())\n        const circles = get(DrawState()).circles\n\n        if (index === -1) {\n          return null\n        }\n\n        return {\n          index,\n          circle: circles[index],\n        }\n      },\n    })\n\n    const DrawCommand = domain.command({\n      name: 'DrawCommand',\n      impl: ({ get }, action: DrawAction) => {\n        const state = get(DrawState())\n        const newState = {\n          circles: [...state.circles, { position: action.position, diameter: action.diameter }],\n        }\n\n        return [\n          DrawState().new(newState),\n          RecordHistoryStateCommand({\n            action: 'add-circle',\n            state: newState,\n          }),\n        ]\n      },\n    })\n\n    const AdjustCommand = domain.command({\n      name: 'AdjustCommand',\n      impl: ({ get }, action: AdjustAction) => {\n        const state = get(DrawState())\n        const circles = state.circles.map((circle, index) => {\n          if (index === action.index) {\n            return {\n              position: circle.position,\n              diameter: action.diameter,\n            }\n          }\n          return circle\n        })\n\n        const newState = {\n          circles,\n        }\n\n        return [\n          DrawState().new(newState),\n          RecordHistoryStateCommand({\n            action: 'adjust-circle',\n            index: action.index,\n            state: newState,\n          }),\n        ]\n      },\n    })\n\n    const TooltipsState = domain.state<TooltipsState>({\n      name: 'TooltipsState',\n      default: {\n        type: 'default',\n      },\n    })\n\n    const TooltipsQuery = domain.query({\n      name: 'TooltipsQuery',\n      impl: ({ get }) => {\n        return get(TooltipsState())\n      },\n    })\n\n    const UpdateTooltipsCommand = domain.command({\n      name: 'UpdateTooltipsCommand',\n      impl: ({}, newState: TooltipsState) => {\n        return TooltipsState().new(newState)\n      },\n    })\n\n    return {\n      query: {\n        HistoryQuery,\n        DrawQuery,\n        TooltipsQuery,\n        SelectedIndexQuery,\n        SelectedCircleInfoQuery,\n        CanUndoQuery,\n        CanRedoQuery,\n      },\n      command: {\n        DrawCommand,\n        AdjustCommand,\n        UpdateTooltipsCommand,\n        UndoCommand,\n        RedoCommand,\n        SetSelectedIndexCommand,\n      },\n    }\n  },\n})\n\nexport const positionInCircle = (position: Position, circle: Circle): boolean => {\n  const { x, y } = position\n  const { diameter, position: circlePosition } = circle\n  const { x: circleX, y: circleY } = circlePosition\n  const radius = diameter / 2\n  const dx = x - circleX\n  const dy = y - circleY\n\n  return dx * dx + dy * dy < radius * radius\n}\n","import React from 'react'\n\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { CircleDrawerDomain, positionInCircle, Position } from 'remesh-domains-for-demos/dist/7guis/CircleDrawer'\n\nimport { OuterClickWrapper } from './OuterClickWrapper'\n\nexport const CircleDrawerApp = () => {\n  const send = useRemeshSend()\n  const domain = useRemeshDomain(CircleDrawerDomain())\n  const drawState = useRemeshQuery(domain.query.DrawQuery())\n  const tooltipsState = useRemeshQuery(domain.query.TooltipsQuery())\n  const selectedCircleInfo = useRemeshQuery(domain.query.SelectedCircleInfoQuery())\n  const canUndo = useRemeshQuery(domain.query.CanUndoQuery())\n  const canRedo = useRemeshQuery(domain.query.CanRedoQuery())\n\n  const getCircleInfo = (position: Position) => {\n    const circle = drawState.circles.find((circle) => {\n      return positionInCircle(position, circle)\n    })\n\n    if (!circle) {\n      return null\n    }\n\n    const index = drawState.circles.indexOf(circle)\n\n    return {\n      index,\n      circle,\n    }\n  }\n\n  const handleRightClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    e.preventDefault()\n    const position = { x: e.pageX, y: e.pageY }\n\n    const circleInfo = getCircleInfo(position)\n\n    if (circleInfo) {\n      send([\n        domain.command.SetSelectedIndexCommand(circleInfo.index),\n        domain.command.UpdateTooltipsCommand({\n          type: 'show-tips',\n          index: circleInfo.index,\n          circle: circleInfo.circle,\n          pageX: e.pageX,\n          pageY: e.pageY,\n        }),\n      ])\n    }\n  }\n\n  const handleLeftClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (tooltipsState.type !== 'default') {\n      return\n    }\n\n    const position = { x: e.pageX, y: e.pageY }\n    const circleInfo = getCircleInfo(position)\n\n    if (!circleInfo) {\n      send(domain.command.DrawCommand({ position, diameter: 30 }))\n    }\n  }\n\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (tooltipsState.type !== 'default') {\n      return\n    }\n\n    const position = { x: e.pageX, y: e.pageY }\n    const circleInfo = getCircleInfo(position)\n\n    if (circleInfo) {\n      send(domain.command.SetSelectedIndexCommand(circleInfo.index))\n    } else {\n      send(domain.command.SetSelectedIndexCommand(-1))\n    }\n  }\n\n  const handleOpenSlider = () => {\n    if (tooltipsState.type === 'show-tips') {\n      send(\n        domain.command.UpdateTooltipsCommand({\n          type: 'open-slider',\n          index: tooltipsState.index,\n          circle: tooltipsState.circle,\n          pageX: tooltipsState.pageX,\n          pageY: tooltipsState.pageY,\n        }),\n      )\n    }\n  }\n\n  const handleCloseSlider = () => {\n    send(\n      domain.command.UpdateTooltipsCommand({\n        type: 'default',\n      }),\n    )\n  }\n\n  const handleAdust = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(event.target.value, 10)\n\n    if (selectedCircleInfo && !isNaN(value)) {\n      send(\n        domain.command.AdjustCommand({\n          index: selectedCircleInfo.index,\n          diameter: value,\n        }),\n      )\n    }\n  }\n\n  return (\n    <div\n      style={{\n        border: '1px solid #eaeaea',\n        boxSizing: 'border-box',\n        padding: 10,\n      }}\n    >\n      <h2>Circle Drawer</h2>\n      <div\n        style={{\n          width: 400,\n          textAlign: 'center',\n          padding: 10,\n        }}\n      >\n        <button\n          onClick={() => send(domain.command.UndoCommand())}\n          style={{\n            margin: '0 10px',\n          }}\n          disabled={!canUndo}\n        >\n          Undo\n        </button>\n        <button\n          onClick={() => send(domain.command.RedoCommand())}\n          style={{\n            margin: '0 10px',\n          }}\n          disabled={!canRedo}\n        >\n          Redo\n        </button>\n      </div>\n      <div\n        style={{\n          width: 400,\n          height: 400,\n          border: '1px solid #eaeaea',\n          boxSizing: 'border-box',\n          overflow: 'hidden',\n        }}\n        onClick={handleLeftClick}\n        onMouseMove={handleMouseMove}\n      >\n        {drawState.circles.map((circle, index) => {\n          return (\n            <div\n              key={circle.position.x + '-' + circle.position.y + '-' + circle.diameter}\n              style={{\n                position: 'absolute',\n                left: circle.position.x - circle.diameter / 2,\n                top: circle.position.y - circle.diameter / 2,\n                width: circle.diameter,\n                height: circle.diameter,\n                borderRadius: circle.diameter / 2,\n                border: '1px solid #666',\n                backgroundColor: selectedCircleInfo?.index === index ? '#eaeaea' : '',\n              }}\n              onContextMenu={handleRightClick}\n            ></div>\n          )\n        })}\n      </div>\n      {tooltipsState.type === 'show-tips' && (\n        <OuterClickWrapper\n          key=\"show-tips\"\n          style={{\n            position: 'absolute',\n            left: tooltipsState.pageX,\n            top: tooltipsState.pageY,\n            zIndex: 100,\n            background: '#fff',\n            border: '1px solid #666',\n            padding: 10,\n          }}\n          onOuterClick={handleCloseSlider}\n          onClick={handleOpenSlider}\n        >\n          Adjust Diameter\n        </OuterClickWrapper>\n      )}\n      {tooltipsState.type === 'open-slider' && (\n        <OuterClickWrapper\n          key=\"open-slider\"\n          style={{\n            position: 'absolute',\n            left: tooltipsState.pageX,\n            top: tooltipsState.pageY,\n            background: '#fff',\n            border: '1px solid #666',\n            zIndex: 100,\n            padding: 10,\n          }}\n          onOuterClick={handleCloseSlider}\n        >\n          <p>Adjust Diameter</p>\n          <div>\n            <input\n              type=\"range\"\n              value={selectedCircleInfo?.circle.diameter ?? ''}\n              min={1}\n              max={150}\n              onChange={handleAdust}\n            />\n          </div>\n        </OuterClickWrapper>\n      )}\n    </div>\n  )\n}\n","import { Remesh } from 'remesh'\n\nexport type CellContent =\n  | {\n      type: 'text'\n      text: string\n    }\n  | {\n      type: 'formula'\n      formula: string\n    }\n\nexport type CellState = {\n  content: CellContent\n  isEditing: boolean\n}\n\nexport const CellsDomain = Remesh.domain({\n  name: 'CellsDomain',\n  inspectable: false,\n  impl: (domain) => {\n    const RowKeyListState = domain.state({\n      name: 'RowKeyListState',\n      default: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9].map(String),\n    })\n\n    const RowKeyListQuery = domain.query({\n      name: 'RowKeyListQuery',\n      impl: ({ get }) => {\n        return get(RowKeyListState())\n      },\n    })\n\n    const ColumnKeyListState = domain.state({\n      name: 'ColumnKeyListState',\n      default: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'],\n    })\n\n    const ColumnKeyListQuery = domain.query({\n      name: 'ColumnKeyListQuery',\n      impl: ({ get }) => {\n        return get(ColumnKeyListState())\n      },\n    })\n\n    const CellState = domain.state<CellState>({\n      name: 'CellState',\n      default: {\n        content: {\n          type: 'text',\n          text: '',\n        },\n        isEditing: false,\n      },\n    })\n\n    const CellQuery = domain.query({\n      name: 'CellQuery',\n      impl: ({ get }, key: string) => {\n        const state = get(CellState(key))\n\n        if (state.content.type === 'text') {\n          return {\n            type: 'text' as const,\n            isEditing: state.isEditing,\n            content: state.content.text,\n            displayContent: state.content.text,\n          }\n        }\n\n        if (state.content.type === 'formula') {\n          const evaluate = compile(state.content.formula)\n          const getCellValue = (cellKey: string) => {\n            return Number(get(CellQuery(cellKey)).displayContent)\n          }\n\n          return {\n            type: 'formula' as const,\n            isEditing: state.isEditing,\n            content: state.content.formula,\n            displayContent: evaluate(getCellValue),\n          }\n        }\n\n        throw new Error('Unknown cell type')\n      },\n    })\n\n    const SelectCellCommand = domain.command({\n      name: 'SelectCellCommand',\n      impl: ({ get }, key: string) => {\n        const state = get(CellState(key))\n\n        return CellState(key).new({\n          content: state.content,\n          isEditing: true,\n        })\n      },\n    })\n\n    const UnselectCellCommand = domain.command({\n      name: 'UnselectCellCommand',\n      impl: ({ get }, key: string) => {\n        const state = get(CellState(key))\n\n        return CellState(key).new({\n          content: state.content,\n          isEditing: false,\n        })\n      },\n    })\n\n    const SetCellContentCommand = domain.command({\n      name: 'SetCellContentCommand',\n      impl: ({ get }, { key, input }: { key: string; input: string }) => {\n        const state = get(CellState(key))\n\n        if (input.startsWith('=')) {\n          return CellState(key).new({\n            content: {\n              type: 'formula',\n              formula: input,\n            },\n            isEditing: state.isEditing,\n          })\n        } else {\n          return CellState(key).new({\n            content: {\n              type: 'text',\n              text: input,\n            },\n            isEditing: state.isEditing,\n          })\n        }\n      },\n    })\n\n    return {\n      query: {\n        CellQuery,\n        ColumnKeyListQuery,\n        RowKeyListQuery,\n      },\n      command: {\n        SelectCellCommand,\n        UnselectCellCommand,\n        SetCellContentCommand,\n      },\n    }\n  },\n})\n\nconst compile = (formula: string) => {\n  return (get: Function) => {\n    try {\n      const expression = formula.slice(1).replace(/\\w\\d+/g, (matched) => {\n        return `get('${matched}')`\n      })\n\n      const fn = new Function('get', `return (${expression}).toString()`)\n\n      return fn(get)\n    } catch {\n      return '-'\n    }\n  }\n}\n","import React from 'react'\nimport { useRemeshDomain, useRemeshQuery, useRemeshSend } from 'remesh-react'\n\nimport { CellsDomain } from 'remesh-domains-for-demos/dist/7guis/Cells'\n\nexport const CellsApp = () => {\n  const cellsDomain = useRemeshDomain(CellsDomain())\n  const columnKeyList = useRemeshQuery(cellsDomain.query.ColumnKeyListQuery())\n  const rowKeyList = useRemeshQuery(cellsDomain.query.RowKeyListQuery())\n\n  return (\n    <div>\n      <h2>Cells</h2>\n      <table\n        style={{\n          borderCollapse: 'collapse',\n          border: '1px solid #bbb',\n          textAlign: 'center',\n        }}\n      >\n        <thead>\n          <tr\n            style={{\n              backgroundColor: '#f6f6f6',\n            }}\n          >\n            <th style={{ width: 30, display: 'block' }}></th>\n            {columnKeyList.map((key) => (\n              <th\n                key={key}\n                style={{\n                  maxWidth: 80,\n                  border: '1px solid #bbb',\n                }}\n              >\n                {key}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {rowKeyList.map((rowKey) => {\n            return (\n              <tr key={rowKey}>\n                <RowView rowKey={rowKey} columnKeyList={columnKeyList} />\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\ntype RowViewProps = {\n  rowKey: string\n  columnKeyList: string[]\n}\n\nconst RowView = ({ columnKeyList, rowKey }: RowViewProps) => {\n  const send = useRemeshSend()\n  const cells = useRemeshDomain(CellsDomain())\n\n  return (\n    <>\n      <td\n        style={{\n          width: 30,\n          border: '1px solid #bbb',\n          backgroundColor: '#f6f6f6',\n        }}\n      >\n        {rowKey}\n      </td>\n      {columnKeyList.map((columnKey) => {\n        const cellKey = `${columnKey}${rowKey}`\n        return (\n          <td\n            key={cellKey}\n            style={{\n              maxWidth: 80,\n              minWidth: 80,\n              border: '1px solid #bbb',\n              overflow: 'hidden',\n            }}\n            onClick={(event) => {\n              if (event.target instanceof HTMLInputElement) {\n                return\n              }\n              send(cells.command.SelectCellCommand(cellKey))\n            }}\n          >\n            <CellView cellKey={cellKey} />\n          </td>\n        )\n      })}\n    </>\n  )\n}\n\nconst CellView = ({ cellKey }: { cellKey: string }) => {\n  const send = useRemeshSend()\n  const cellsDomain = useRemeshDomain(CellsDomain())\n  const cell = useRemeshQuery(cellsDomain.query.CellQuery(cellKey))\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    send(cellsDomain.command.SetCellContentCommand({ key: cellKey, input: e.target.value }))\n  }\n\n  return (\n    <>\n      {cell.isEditing && (\n        <input\n          style={{\n            width: '100%',\n            height: '100%',\n            backgroundColor: 'transparent',\n            boxSizing: 'border-box',\n            textAlign: 'center',\n          }}\n          value={cell.content}\n          onChange={handleChange}\n          onBlur={() => {\n            if (cell.isEditing) {\n              send(cellsDomain.command.UnselectCellCommand(cellKey))\n            }\n          }}\n          autoFocus\n        />\n      )}\n\n      {!cell.isEditing && cell.displayContent}\n    </>\n  )\n}\n","import React, { StrictMode } from 'react'\nimport * as ReactDOMClient from 'react-dom/client'\n\nimport { Remesh } from 'remesh'\n\nimport { RemeshRoot } from 'remesh-react'\n\nimport { RemeshReduxDevtools } from 'remesh-redux-devtools'\nimport { RemeshLogger } from 'remesh-logger'\n\nimport { CounterApp } from './Counter'\nimport { TemperatureConverterApp } from './TemperatureConverter'\nimport { FlightBookerApp } from './FlightBooker'\nimport { TimerApp } from './Timer'\nimport { CRUDApp } from './CRUD'\nimport { CircleDrawerApp } from './CircleDrawer'\nimport { CellsApp } from './Cells'\n\nconst Root = () => {\n  return (\n    <div>\n      <h1>7GUIs in React/Remesh/TypeScript</h1>\n      <p>This is a live version of an implementation (source) of 7GUIs with React, TypeScript and Remesh.</p>\n      <hr />\n      <CounterApp />\n      <hr />\n      <TemperatureConverterApp />\n      <hr />\n      <FlightBookerApp />\n      <hr />\n      <TimerApp />\n      <hr />\n      <CRUDApp />\n      <hr />\n      <CircleDrawerApp />\n      <hr />\n      <CellsApp />\n    </div>\n  )\n}\n\nconst container = document.getElementById('root')\n\nif (container) {\n  const root = ReactDOMClient.createRoot(container)\n  const store = Remesh.store({\n    inspectors: [RemeshReduxDevtools(), RemeshLogger()],\n  })\n\n  root.render(\n    <StrictMode>\n      <RemeshRoot store={store}>\n        <Root />\n      </RemeshRoot>\n    </StrictMode>,\n  )\n}\n"],"names":["CounterApp","send","useRemeshSend","counterDomain","useRemeshDomain","CounterDomain","count","useRemeshQuery","query","CountQuery","width","border","boxSizing","padding","_jsx","_jsxs","command","IncreCommand","TemperatureConverterApp","domain","TemperatureConverterDomain","celsius","CelsiusQuery","fahrenheit","FahrenheitQuery","event","UpdateCelsiusCommand","target","value","handleCelsius","UpdateFahrenheitCommand","handleFahrenheit","FlightBookerApp","flightBooker","FlightBookerDomain","option","OptionQuery","status","StatusQuery","startDateInput","StartDateInputQuery","endDateInput","EndDateInputQuery","handleOptionChange","UpdateOptionCommand","handleStartDateChange","UpdateStartDateCommand","handleEndDateChange","UpdateEndDateCommand","handleBookButtonClick","bookButton","alert","backgroundColor","startDate","endDate","TimerApp","timerDomain","TimerDomain","elapsed","ElapsedQuery","duration","DurationQuery","handleDurationChange","parseInt","isNaN","UpdateDurationCommand","handleResetElapsed","ResetElapsedCommand","display","marginRight","whiteSpace","height","background","Math","min","verticalAlign","borderRadius","toFixed","OuterClickWrapper","props","onOuterClick","restProps","containerRef","useRef","useEffect","handleClick","parentElement","isOuterClick","current","contains","addEventListener","removeEventListener","CRUDApp","CRUDDomain","filteredList","FilteredListQuery","filter","FilterPrefixQuery","created","CreatedQuery","selected","SelectedQuery","handleFilterChange","e","UpdateFilterPrefixCommand","handleSelect","itemId","SelectItemCommand","handleNameChange","UpdateSelectedNameCommand","name","UpdateCreatedCommand","handleSurnameChange","surname","handleCreate","CreateNameItemCommand","handleSync","SyncSelectedCommand","handleDelete","DeleteItemCommand","id","overflow","map","item","fullName","color","CircleDrawerApp","CircleDrawerDomain","drawState","DrawQuery","tooltipsState","TooltipsQuery","selectedCircleInfo","SelectedCircleInfoQuery","canUndo","CanUndoQuery","canRedo","CanRedoQuery","getCircleInfo","position","circle","circles","find","positionInCircle","index","indexOf","handleRightClick","preventDefault","x","pageX","y","pageY","circleInfo","SetSelectedIndexCommand","UpdateTooltipsCommand","type","handleLeftClick","DrawCommand","diameter","handleMouseMove","handleOpenSlider","handleCloseSlider","handleAdust","AdjustCommand","textAlign","UndoCommand","margin","RedoCommand","left","top","zIndex","CellsApp","cellsDomain","CellsDomain","columnKeyList","ColumnKeyListQuery","rowKeyList","RowKeyListQuery","borderCollapse","key","maxWidth","rowKey","RowView","cells","_Fragment","columnKey","cellKey","minWidth","HTMLInputElement","SelectCellCommand","CellView","cell","CellQuery","handleChange","SetCellContentCommand","input","isEditing","content","UnselectCellCommand","displayContent","Root","container","document","getElementById","root","ReactDOMClient","store","Remesh","inspectors","RemeshReduxDevtools","RemeshLogger","render","StrictMode"],"mappings":"ojCAAO,GAAI,IAA+B,CACtC,IAAK,UAAY,CACb,MAAQ,IAA6B,UAAY,aAAa,IAAG,CACpE,EACD,SAAU,MACd,ECHW,EAAyB,CAChC,SAAU,SAAU,EAAU,CAC1B,GAAI,GAAU,sBACV,EAAS,qBACT,EAAW,EAAuB,SACtC,AAAI,GACA,GAAU,EAAS,sBACnB,EAAS,EAAS,sBAEtB,GAAI,GAAS,EAAQ,SAAU,EAAW,CACtC,EAAS,OACT,EAAS,CAAS,CAC9B,CAAS,EACD,MAAO,IAAI,GAAa,UAAY,CAAE,MAAO,IAAW,KAA4B,OAAS,EAAO,CAAM,CAAI,CAAA,CACjH,EACD,sBAAuB,UAAY,CAE/B,OADI,GAAO,CAAA,EACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAEzB,GAAI,GAAW,EAAuB,SACtC,MAAS,KAAa,KAA8B,OAAS,EAAS,wBAA0B,uBAAuB,MAAM,OAAQ,EAAc,CAAE,EAAE,EAAO,CAAI,CAAC,CAAC,CACvK,EACD,qBAAsB,UAAY,CAE9B,OADI,GAAO,CAAA,EACF,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAK,GAAM,UAAU,GAEzB,GAAI,GAAW,EAAuB,SACtC,MAAS,KAAa,KAA8B,OAAS,EAAS,uBAAyB,sBAAsB,MAAM,OAAQ,EAAc,CAAE,EAAE,EAAO,CAAI,CAAC,CAAC,CACrK,EACD,SAAU,MACd,EC9BO,YAAyB,EAAmB,CAC/C,MAAO,GAAoB,GAAuB,CAAiB,EAAI,EAC3E,CACA,YAAgC,EAAmB,CAC/C,GAAI,GAAW,EAAuB,SACtC,MAAO,IAAI,GAAW,SAAU,EAAY,CACxC,GAAI,GAAe,GAAI,GACnB,EAAW,GAAqB,GAChC,EAAQ,EAAS,MACjB,EAAM,SAAU,EAAW,CAC3B,GAAI,GAAM,EAAS,MACnB,EAAW,KAAK,CACZ,UAAW,EAAoB,EAAM,EACrC,QAAS,EAAM,CAC/B,CAAa,EACI,EAAW,QACZ,EAAa,IAAI,EAAS,CAAG,CAAC,CAE9C,EACQ,SAAa,IAAI,EAAS,CAAG,CAAC,EACvB,CACf,CAAK,CACL,CACA,GAAI,IAA2B,GAAwB,ECzB5C,GAAQ,GAAI,GAAW,EAAI,ECC/B,YAA8B,EAAY,EAAa,CAC1D,MAAI,KAAgB,QAAU,GAAc,IAC5C,EAAa,GAAe,KAAgC,EAAa,GAClE,EAAQ,SAAU,EAAQ,EAAY,CACzC,GAAI,GACA,EAAQ,GACZ,EAAO,UAAU,GAAyB,EAAY,SAAU,EAAO,CACnE,GAAI,GAAa,EAAY,CAAK,EAClC,AAAI,IAAS,CAAC,EAAW,EAAa,CAAU,IAC5C,GAAQ,GACR,EAAc,EACd,EAAW,KAAK,CAAK,EAE5B,CAAA,CAAC,CACV,CAAK,CACL,CACA,YAAwB,EAAG,EAAG,CAC1B,MAAO,KAAM,CACjB,CCnBO,aAAoB,CACvB,MAAO,GAAQ,SAAU,EAAQ,EAAY,CACzC,GAAI,GACA,EAAU,GACd,EAAO,UAAU,GAAyB,EAAY,SAAU,EAAO,CACnE,GAAI,GAAI,EACR,EAAO,EACP,GAAW,EAAW,KAAK,CAAC,EAAG,CAAK,CAAC,EACrC,EAAU,EACb,CAAA,CAAC,CACV,CAAK,CACL,CCVO,aAAqB,CAExB,OADI,GAAS,CAAA,EACJ,EAAK,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAO,GAAM,UAAU,GAE3B,GAAI,GAAY,GAAa,CAAM,EACnC,MAAO,GAAQ,SAAU,EAAQ,EAAY,CACzC,AAAC,GAAY,EAAO,EAAQ,EAAQ,CAAS,EAAI,EAAO,EAAQ,CAAM,GAAG,UAAU,CAAU,CACrG,CAAK,CACL,CCVa,KAAA,IAAgB,EAAO,OAAO,CACzC,KAAM,gBACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAa,EAAO,MAAM,CAC9B,KAAM,eACN,QAAS,CAAA,CACV,EAEK,EAAa,EAAO,MAAM,CAC9B,KAAM,eACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAY,CACzB,CACD,EAEK,EAAe,EAAO,QAAQ,CAClC,KAAM,eACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAQ,EAAI,EAAA,CAAY,EAC9B,MAAO,GAAW,EAAE,IAAI,EAAQ,CAAC,CACnC,CAAA,CACD,EAEM,MAAA,CACL,MAAO,CACL,YACF,EACA,QAAS,CACP,cACF,CAAA,CAEJ,CACF,CAAC,EC9BYA,GAAa,IAAM,CACxBC,KAAAA,GAAOC,IACPC,EAAgBC,EAAgBC,GAAAA,CAAD,EAC/BC,EAAQC,EAAeJ,EAAcK,MAAMC,WAArB,CAAA,EAO1B,SAAA,MAAA,CACE,MAAO,CACLC,MAAO,IACPC,OAAQ,oBACRC,UAAW,aACXC,QAAS,EALb,EAQE,SAAA,CAAAC,EAAA,KAAA,CAAA,SAAA,SAAA,CAAA,EACAA,EAAA,QAAA,CAAO,KAAK,SAAS,SAArB,GAA8B,MAAOR,CAAAA,CAArC,EACAS,EAAA,QAAA,CACE,SAAA,CAAAD,EAAA,SAAA,CAAQ,QAhBM,IAAM,CACnBX,EAAAA,EAAca,QAAQC,aAAvB,CAAA,CAAA,EAeA,SAAA,QAAA,CAAA,EAA8C,GADhD,CAAA,CAVF,CAAA,CAAA,CADF,CAgBD,EC3BY,GAA6B,EAAO,OAAO,CACtD,KAAM,6BACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAe,EAAO,MAAM,CAChC,KAAM,eACN,QAAS,EAAA,CACV,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAc,CAC3B,CACD,EAEK,EAAkB,EAAO,MAAM,CACnC,KAAM,kBACN,QAAS,EAAA,CACV,EAEK,EAAkB,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAiB,CAC9B,CACD,EAEK,EAAmB,EAAO,QAAQ,CACtC,KAAM,mBACN,KAAM,CAAC,KACE,CAAC,IAAe,IAAI,EAAE,EAAG,IAAkB,IAAI,EAAE,CAAC,CAC3D,CACD,EAEK,EAAuB,EAAO,QAAQ,CAC1C,KAAM,uBACN,KAAM,CAAC,GAAI,IAAkB,CAC3B,GAAI,IAAU,GACZ,MAAO,GAAiB,EAGpB,KAAA,GAAU,WAAW,CAAK,EAE5B,GAAA,OAAO,MAAM,CAAO,EACf,MAAA,GAAe,EAAA,IAAI,CAAK,EAG3B,KAAA,GAAa,EAAW,GAAI,GAAK,GAEvC,MAAO,CAAC,EAAA,EAAe,IAAI,CAAK,EAAG,EAAgB,EAAE,IAAI,EAAW,SAAS,CAAC,CAAC,CACjF,CAAA,CACD,EAEK,EAA0B,EAAO,QAAQ,CAC7C,KAAM,0BACN,KAAM,CAAC,GAAI,IAAkB,CAC3B,GAAI,IAAU,GACZ,MAAO,GAAiB,EAGpB,KAAA,GAAa,WAAW,CAAK,EAE/B,GAAA,OAAO,MAAM,CAAU,EAClB,MAAA,GAAkB,EAAA,IAAI,CAAK,EAG9B,KAAA,GAAwB,GAAA,IAAW,GAAA,GAEzC,MAAO,CAAC,EAAA,EAAe,IAAI,EAAQ,UAAU,EAAG,EAAgB,EAAE,IAAI,CAAK,CAAC,CAC9E,CAAA,CACD,EAEM,MAAA,CACL,MAAO,CACL,eACA,iBACF,EACA,QAAS,CACP,uBACA,yBACF,CAAA,CAEJ,CACF,CAAC,EChFYC,GAA0B,IAAM,CACrCjB,KAAAA,GAAOC,IACPiB,EAASf,EAAgBgB,GAAAA,CAAD,EACxBC,EAAUd,EAAeY,EAAOX,MAAMc,aAAd,CAAA,EACxBC,EAAahB,EAAeY,EAAOX,MAAMgB,gBAAd,CAAA,EAW/B,SAAA,MAAA,CACE,MAAO,CACLb,OAAQ,oBACRC,UAAW,aACXC,QAAS,EAJb,EAOE,SAAA,CAAAC,EAAA,KAAA,CAAA,SAAA,uBAAA,CAAA,EACAC,EAAA,MAAA,CACE,SAAA,CAAAD,EAAA,QAAA,CAAO,KAAK,OAAO,MAAOO,EAAS,SAlBnB,AAACI,GAA+C,CACpExB,EAAKkB,EAAOH,QAAQU,qBAAqBD,EAAME,OAAOC,KAAjD,CAAD,CAAA,CAiB6CC,CAA7C,EACAf,EAAA,QAAA,CAAO,QAAQ,GAAf,SAAA,SAAA,CAAA,EACA,IAAAA,EAAA,QAAA,CAAO,KAAK,OAAO,MAAOS,EAAY,SAhBnB,AAACE,GAA+C,CACvExB,EAAKkB,EAAOH,QAAQc,wBAAwBL,EAAME,OAAOC,KAApD,CAAD,CAAA,CAegDG,CAAhD,EACAjB,EAAA,QAAA,CAAO,QAAQ,GAAf,SAAA,YAAA,CAJF,CAAA,CAAA,CARF,CAAA,CAAA,CADF,CAiBD,EC1BY,EAAU,AAAC,GAAsB,CACtC,KAAA,GAAO,EAAU,MAAM,GAAG,EAE5B,GAAA,EAAK,SAAW,EACX,MAAA,MAGH,KAAA,GAAO,GAAI,MAAK,GAAG,EAAK,MAAM,EAAK,MAAM,EAAK,IAAI,EAEpD,MAAA,GAAK,SAAS,IAAM,eACf,KAGF,CACT,EAEa,EAAc,AAAC,GAAe,CACzC,KAAM,GAAO,EAAK,mBAAmB,EAAE,MAAM,GAAG,EAEhD,MAAO,GAAG,EAAK,MAAM,EAAK,MAAM,EAAK,IACvC,EAEa,GAAc,CAAC,EAAa,IACnC,EAAM,YAAA,IAAkB,EAAM,cACzB,EAAM,YAAA,EAAgB,EAAM,YAAY,EAG7C,EAAM,SAAA,IAAe,EAAM,WACtB,EAAM,SAAA,EAAa,EAAM,SAAS,EAGpC,EAAM,QAAA,EAAY,EAAM,QAAQ,EAG5B,GAAqB,EAAO,OAAO,CAC9C,KAAM,qBACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAc,EAAO,MAA0B,CACnD,KAAM,cACN,QAAS,SAAA,CACV,EAEK,EAAc,EAAO,MAAM,CAC/B,KAAM,cACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAa,CAC1B,CACD,EAEK,EAAsB,EAAO,MAAM,CACvC,KAAM,sBACN,QAAS,EAAY,GAAI,KAAM,CAAA,CAChC,EAEK,EAAsB,EAAO,MAAM,CACvC,KAAM,sBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAqB,CAClC,CACD,EAEK,EAAoB,EAAO,MAAM,CACrC,KAAM,oBACN,QAAS,EAAY,GAAI,KAAM,CAAA,CAChC,EAEK,EAAoB,EAAO,MAAM,CACrC,KAAM,oBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAmB,CAChC,CACD,EAEK,EAAiB,EAAO,MAAM,CAClC,KAAM,iBACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAiB,EAAI,EAAA,CAAqB,EAChD,MAAO,GAAQ,CAAc,CAC/B,CAAA,CACD,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAe,EAAI,EAAA,CAAmB,EAC5C,MAAO,GAAQ,CAAY,CAC7B,CAAA,CACD,EAEK,EAAsB,EAAO,QAAQ,CACzC,KAAM,sBACN,KAAM,CAAC,GAAI,IACF,EAAc,EAAA,IAAI,CAAM,CACjC,CACD,EAEK,EAAyB,EAAO,QAAQ,CAC5C,KAAM,yBACN,KAAM,CAAC,GAAI,IACF,EAAsB,EAAA,IAAI,CAAS,CAC5C,CACD,EAEK,EAAuB,EAAO,QAAQ,CAC1C,KAAM,uBACN,KAAM,CAAC,GAAI,IACF,EAAoB,EAAA,IAAI,CAAS,CAC1C,CACD,EA6BM,MAAA,CACL,MAAO,CACL,YA7BgB,EAAO,MAAM,CAC/B,KAAM,cACN,KAAM,CAAC,CAAE,SAA8B,CAC/B,KAAA,GAAS,EAAI,EAAA,CAAa,EAC1B,EAAY,EAAI,EAAA,CAAgB,EAChC,EAAU,EAAI,EAAA,CAAc,EAE5B,EAAkB,AAAE,EAAY,QAAU,UAC1C,EAAgB,IAAW,SAAY,AAAE,EAAU,QAAU,UAAa,WAE1E,EACJ,IAAW,UACP,AAAE,EACA,UACA,WACF,CAAC,CAAC,GAAa,CAAC,CAAC,GAAW,GAAY,EAAW,CAAO,GAAK,EAC/D,UACA,WAEC,MAAA,CACL,UAAW,EACX,QAAS,EACT,WAAY,CAAA,CAEhB,CAAA,CACD,EAKG,cACA,iBACA,eACA,sBACA,mBACF,EACA,QAAS,CACP,sBACA,yBACA,sBACF,CAAA,CAEJ,CACF,CAAC,EC9JYkB,GAAkB,IAAM,CAC7B/B,KAAAA,GAAOC,IACP+B,EAAe7B,EAAgB8B,GAAAA,CAAD,EAC9BC,EAAS5B,EAAe0B,EAAazB,MAAM4B,YAApB,CAAA,EACvBC,EAAS9B,EAAe0B,EAAazB,MAAM8B,YAApB,CAAA,EAEvBC,EAAiBhC,EAAe0B,EAAazB,MAAMgC,oBAApB,CAAA,EAC/BC,EAAelC,EAAe0B,EAAazB,MAAMkC,kBAApB,CAAA,EAE7BC,EAAqB,AAAClB,GAAgD,CAC1ExB,EAAKgC,EAAajB,QAAQ4B,oBAAoBnB,EAAME,OAAOC,MAAvD,CAAA,EAGAiB,EAAwB,AAACpB,GAA+C,CAC5ExB,EAAKgC,EAAajB,QAAQ8B,uBAAuBrB,EAAME,OAAOC,KAAzD,CAAD,CAAA,EAGAmB,EAAsB,AAACtB,GAA+C,CAC1ExB,EAAKgC,EAAajB,QAAQgC,qBAAqBvB,EAAME,OAAOC,KAAvD,CAAD,CAAA,EAGAqB,EAAwB,IAAM,CAC9BZ,AAAAA,EAAOa,aAAe,WACpBf,AACFgB,MADEhB,AAAAA,IAAW,UACN,uCAAsCI,IAEtC,sCAAqCA,QAAqBE,GAF5D,CAIR,EAID,SAAA,MAAA,CACE,MAAO,CACL/B,MAAO,IACPC,OAAQ,oBACRC,UAAW,aACXC,QAAS,EALb,EAQE,SAAA,CAAAC,EAAA,KAAA,CAAA,SAAA,eAAA,CAAA,EACAA,EAAA,MAAA,CACE,WAAA,SAAA,CAAQ,MAAOqB,EAAQ,SAAUQ,EAC/B,SAAA,CAAA7B,EAAA,SAAA,CAAQ,MAAM,UAAd,SAAA,gBAAA,CAAA,EACAA,EAAA,SAAA,CAAQ,MAAM,SAAd,SAAA,eAAA,CAFF,CAAA,CAAA,CAAA,CAAA,CADF,EAMAA,EAAA,MAAA,CACE,WAAA,QAAA,CACE,KAAK,OACL,MAAO,CACLsC,gBAAiBf,EAAOgB,YAAc,UAAY,MAAQ,EAH9D,EAKE,MAAOd,EACP,SAAUM,CAAAA,CANZ,CAAA,CADF,EAUA/B,EAAA,MAAA,CACE,WAAA,QAAA,CACE,KAAK,OACL,MAAO,CACLsC,gBAAiBf,EAAOiB,UAAY,UAAY,MAAQ,EAH5D,EAKE,SAAUjB,EAAOiB,UAAY,WAC7B,MAAOb,EACP,SAAUM,CAAAA,CAPZ,CAAA,CADF,EAWAjC,EAAA,MAAA,CACE,WAAA,SAAA,CAAQ,SAAUuB,EAAOa,aAAe,WAAY,QAASD,EAA7D,SAAA,MAAA,CAAA,CAAA,CArCJ,CAAA,CAAA,CADF,CA4CD,EC1EY,GAAc,EAAO,OAAO,CACvC,KAAM,cACN,YAAa,GACb,KAAM,AAAC,GAAW,CACV,KAAA,GAAgB,EAAO,MAAM,CACjC,KAAM,gBACN,QAAS,IAAA,CACV,EAEK,EAAgB,EAAO,MAAM,CACjC,KAAM,gBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAe,CAC5B,CACD,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,QAAS,CAAA,CACV,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAc,CAC3B,CACD,EAEK,EAAa,EAAO,MAAM,CAC9B,KAAM,YAAA,CACP,EAEK,EAAY,EAAO,MAAM,CAC7B,KAAM,WAAA,CACP,EAEK,EAAuB,EAAO,QAAQ,CAC1C,KAAM,uBACN,KAAM,CAAC,CAAE,OAAO,IAAsB,CAC9B,KAAA,GAAW,EAAI,EAAA,CAAe,EAC9B,EAAU,EAAI,EAAA,CAAc,EAElC,MAAI,GAAU,EACL,EAAU,EAGZ,EAAa,EAAE,IAAI,EAAU,CAAS,CAC/C,CAAA,CACD,EAEK,EAAwB,EAAO,QAAQ,CAC3C,KAAM,wBACN,KAAM,CAAC,CAAE,OAAO,IAAwB,CAChC,KAAA,GAAU,EAAI,EAAA,CAAc,EAElC,MAAI,GAAc,EACT,CAAC,EAAc,EAAE,IAAI,CAAW,EAAG,GAAY,EAGjD,EAAgB,EAAA,IAAI,CAAW,CACxC,CAAA,CACD,EAEK,EAAsB,EAAO,QAAQ,CACzC,KAAM,sBACN,KAAM,CAAC,KACE,CAAC,EAAa,EAAE,IAAI,CAAC,EAAG,GAAY,CAC7C,CACD,EAED,SAAO,OAAO,CACZ,KAAM,iCACN,KAAM,CAAC,CAAE,eAAgB,CACvB,KAAM,GAAc,EAAU,CAAU,EAAE,KACxC,GAAU,EAAW,CAAC,EACtB,EAAI,IAAM,CAAC,CACb,EACM,EAAa,EAAU,CAAS,EAAE,KAAK,EAAI,IAAM,CAAC,CAAC,EAElD,MAAA,IAAM,EAAa,CAAU,EAAE,KACpC,GAAqB,EACrB,GAAU,AAAC,GACL,IAAW,EACN,GAEF,GAAA,EAAkB,KACvB,GAAA,EACA,EAAI,CAAC,CAAC,EAAG,KAAO,EAAqB,EAAE,QAAU,EAAE,OAAO,CAAC,EAC3D,GAAU,EAAU,CAAS,CAAC,CAChC,CACD,CACH,CACF,CAAA,CACD,EAEM,CACL,MAAO,CACL,gBACA,cACF,EACA,QAAS,CACP,sBACA,uBACF,CAAA,CAEJ,CACF,CAAC,EC3GYM,GAAW,IAAM,CACtBtD,KAAAA,GAAOC,IACPsD,EAAcpD,EAAgBqD,GAAAA,CAAD,EAC7BC,EAAUnD,EAAeiD,EAAYhD,MAAMmD,aAAnB,CAAA,EACxBC,EAAWrD,EAAeiD,EAAYhD,MAAMqD,cAAnB,CAAA,EAEzBC,EAAuB,AAACrC,GAA+C,CACrEmC,KAAAA,GAAWG,SAAStC,EAAME,OAAOC,MAAO,EAArB,EACrB,AAACoC,MAAMJ,CAAD,GACR3D,EAAKuD,EAAYxC,QAAQiD,sBAAsBL,CAA1C,CAAD,CACL,EAGGM,EAAqB,IAAM,CAC1BV,EAAAA,EAAYxC,QAAQmD,oBAArB,CAAA,CAAA,EAIJ,SAAA,MAAA,CACE,MAAO,CACLzD,MAAO,IACPC,OAAQ,oBACRC,UAAW,aACXC,QAAS,EALb,EAQE,SAAA,CAAAC,EAAA,KAAA,CAAA,SAAA,OAAA,CAAA,EACAC,EAAA,MAAA,CAAK,MAAO,CAAEqD,QAAS,MAAvB,EACE,SAAA,CAAAtD,EAAA,QAAA,CAAO,MAAO,CAAEuD,YAAa,GAAIC,WAAY,QAA7C,EAAA,SAAA,gBAAA,CAAA,EACAxD,EAAA,MAAA,CAAK,MAAO,CAAEJ,MAAO,MAArB,EACE,WAAA,OAAA,CACE,MAAO,CACL0D,QAAS,eACTG,OAAQ,GACRC,WAAY,QACZ9D,MAAQ,GAAE+D,KAAKC,IAAIhB,EAAUE,EAAU,CAA7B,EAAkC,OAC5Ce,cAAe,SACfC,aAAc,CANT,CAAA,CADT,CAAA,CAHJ,CAAA,CAAA,CAAA,EAeA7D,EAAA,MAAA,CAAM2C,SAAAA,CAAAA,EAAUE,KAAuB,KAAMiB,QAAQ,CAA1B,EAA0C,GAAA,KAAMA,QAAQ,CAAzB,EAA1D,GAAA,CAAA,CAAA,EACA9D,EAAA,MAAA,CAAK,MAAO,CAAEqD,QAAS,MAAvB,EACE,SAAA,CAAAtD,EAAA,QAAA,CAAO,MAAO,CAAEJ,MAAO,IAAK2D,YAAa,EAAzC,EAAA,SAAA,WAAA,CAAA,EACAvD,EAAA,QAAA,CACE,MAAO,CAAEJ,MAAO,MADlB,EAEE,KAAK,QACL,IAAK,EACL,IAAK,IACL,MAAOkD,EACP,SAAUE,CAAAA,CARd,CAAA,CAAA,CAAA,EAWAhD,EAAA,MAAA,CACE,WAAA,SAAA,CAAQ,MAAO,CAAEJ,MAAO,OAAxB,EAAmC,QAASwD,EAA5C,SAAA,aAAA,CAAA,CAAA,CArCJ,CAAA,CAAA,CADF,CA4CD,ECtDY,GAAa,EAAO,OAAO,CACtC,KAAM,aACN,KAAM,AAAC,GAAW,CAChB,GAAI,GAAU,EAER,KAAA,GAAiB,GAAqB,EAAQ,CAClD,KAAM,iBACN,IAAK,AAAC,GAAS,EAAK,EAAA,CACrB,EAEK,EAAoB,EAAO,MAAM,CACrC,KAAM,oBACN,QAAS,EAAA,CACV,EAEK,EAAoB,EAAO,MAAM,CACrC,KAAM,oBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAmB,CAChC,CACD,EAEK,EAA4B,EAAO,QAAQ,CAC/C,KAAM,4BACN,KAAM,CAAC,GAAI,IACF,EAAoB,EAAA,IAAI,CAAM,CACvC,CACD,EAEK,EAAe,EAAO,MAAY,CACtC,KAAM,eACN,QAAS,CACP,KAAM,GACN,QAAS,EACX,CAAA,CACD,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAc,CAC3B,CACD,EAEK,EAAuB,EAAO,QAAQ,CAC1C,KAAM,uBACN,KAAM,CAAC,CAAE,OAAO,IAAwB,CAChC,KAAA,GAAc,EAAI,EAAA,CAAc,EAE/B,MAAA,KAAe,IAAI,OACrB,GACA,EACJ,CACH,CAAA,CACD,EAEK,EAAgB,EAAO,MAAuB,CAClD,KAAM,gBACN,QAAS,IAAA,CACV,EAEK,EAAgB,EAAO,MAAM,CACjC,KAAM,gBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAe,CAC5B,CACD,EAEK,EAAoB,EAAO,QAAQ,CACvC,KAAM,oBACN,KAAM,CAAC,CAAE,OAAO,IAAgC,CACxC,KAAA,GAAkB,EAAI,EAAA,CAAe,EAE3C,GAAI,IAAiB,KACnB,MAAI,KAAoB,KACf,KAEA,EAAgB,EAAA,IAAI,IAAI,EAI/B,GAAA,GAAmB,EAAgB,KAAO,EACrC,MAAA,GAAgB,EAAA,IAAI,IAAI,EAGjC,KAAM,GAAa,EAAI,EAAe,MAAM,UAAU,CAAY,CAAC,EAE5D,MAAA,GAAgB,EAAA,IAAI,CAAU,CACvC,CAAA,CACD,EAEK,EAA4B,EAAO,QAAQ,CAC/C,KAAM,4BACN,KAAM,CAAC,CAAE,OAAO,IAAwB,CAChC,KAAA,GAAW,EAAI,EAAA,CAAe,EAEpC,MAAI,KAAa,KACR,KAGF,IAAgB,IAAI,OACtB,GACA,EACJ,CACH,CAAA,CACD,EAEK,EAAoB,EAAO,MAAM,CACrC,KAAM,oBACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAe,EAAI,EAAA,CAAmB,EACtC,EAAW,EAAI,EAAe,MAAM,cAAe,CAAA,EAEzD,MAAI,KAAiB,GACZ,EAGF,EAAS,OAAO,AAAC,GAAS,EAAK,QAAQ,WAAW,CAAY,CAAC,CACxE,CAAA,CACD,EAEK,EAAsB,EAAO,QAAQ,CACzC,KAAM,sBACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAW,EAAI,EAAA,CAAe,EAEpC,MAAI,KAAa,KACR,KAGF,EAAe,QAAQ,kBAAkB,CAAQ,CAC1D,CAAA,CACD,EAEK,EAAwB,EAAO,QAAQ,CAC3C,KAAM,wBACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAU,EAAI,EAAA,CAAc,EAC5B,EAAU,GACd,GAAI,GAAG,OACJ,GAGL,MAAO,CAAC,EAAe,QAAQ,eAAe,CAAO,EAAG,EAAqB,CAAE,KAAM,GAAI,QAAS,EAAA,CAAI,CAAC,CACzG,CAAA,CACD,EAEM,MAAA,CACL,MAAO,OACF,EAAe,OADb,CAEL,oBACA,gBACA,oBACA,cACF,GACA,QAAS,OACJ,EAAe,SADX,CAEP,4BACA,oBACA,uBACA,4BACA,wBACA,qBACF,EAAA,CAEJ,CACF,CAAC,EChLYY,EAAoB,AAACC,GAAkC,CAC5D,KAAiCA,KAA/BC,iBAA+BD,EAAdE,IAAcF,EAAdE,CAAjBD,iBACFE,EAAeC,iBAA8B,IAAxB,EAE3BC,SAAAA,QAAAA,UAAU,IAAM,CACRC,KAAAA,GAAc,AAAC5D,GAAsB,OACrC,GAAA,CAAEA,MAAME,SAANF,QAAuB6D,eAC3B,OAKF,AAAIC,AAFiB,CAAC,CAAeC,GAAAA,SAAW,CAACN,EAAaM,QAAQC,SAAShE,EAAME,MAApC,IAG/CqD,YAAevD,GAChB,EAGMiE,gBAAAA,iBAAiB,QAASL,EAAa,EAAhD,EACO,IAAM,CACFM,SAAAA,oBAAoB,QAASN,EAAa,EAAnD,CAAA,CAfK,EAiBN,CAjBM,CAAA,IAmBF,MAAA,GAAK,IAAKH,GAAkBD,EAAnC,CACD,EClBYW,GAAU,IAAM,CACrB3F,KAAAA,GAAOC,IACPiB,EAASf,EAAgByF,GAAAA,CAAD,EACxBC,EAAevF,EAAeY,EAAOX,MAAMuF,kBAAd,CAAA,EAC7BC,EAASzF,EAAeY,EAAOX,MAAMyF,kBAAd,CAAA,EACvBC,EAAU3F,EAAeY,EAAOX,MAAM2F,aAAd,CAAA,EACxBC,EAAW7F,EAAeY,EAAOX,MAAM6F,cAAd,CAAA,EAEzBC,EAAqB,AAACC,GAA2C,CACrEtG,EAAKkB,EAAOH,QAAQwF,0BAA0BD,EAAE5E,OAAOC,KAAlD,CAAD,CAAA,EAGA6E,EAAe,AAACC,GAA0B,CAC9CzG,EAAKkB,EAAOH,QAAQ2F,kBAAkBD,CAAjC,CAAD,CAAA,EAGAE,EAAmB,AAACL,GAA2C,CACnE,AAEIpF,EAFJ,AAAIiF,EAEAjF,EAAOH,QAAQ6F,0BAA0B,CACvCC,KAAMP,EAAE5E,OAAOC,KADjB,CAAA,EAKGT,EAAOH,QAAQ+F,qBAAqB,CAAED,KAAMP,EAAE5E,OAAOC,KAArD,CAAA,CAND,CAOL,EAGGoF,EAAsB,AAACT,GAA2C,CACtE,AAEIpF,EAFJ,AAAIiF,EAEAjF,EAAOH,QAAQ6F,0BAA0B,CACvCI,QAASV,EAAE5E,OAAOC,KADpB,CAAA,EAKGT,EAAOH,QAAQ+F,qBAAqB,CAAEE,QAASV,EAAE5E,OAAOC,KAAxD,CAAA,CAND,CAOL,EAGGsF,EAAe,IAAM,CACrBd,AAAAA,IAAa,MACVjF,EAAAA,EAAOH,QAAQmG,sBAAhB,CAAA,CACL,EAGGC,EAAa,IAAM,CACvB,AAAIhB,GACGjF,EAAAA,EAAOH,QAAQqG,oBAAhB,CAAA,CACL,EAGGC,EAAe,IAAM,CACzB,AAAIlB,GACFnG,EAAK,CAACkB,EAAOH,QAAQuG,kBAAkBnB,EAASoB,EAA1C,EAA+CrG,EAAOH,QAAQ2F,kBAAkB,IAAjC,CAAhD,CAAD,CACL,EAGH,SACG,EAAD,CACE,MAAO,CACLjG,MAAO,IACPC,OAAQ,oBACRC,UAAW,aACXC,QAAS,EALb,EAOE,aAAc,IAAM,CAClB4F,EAAa,IAAD,CARhB,EAWE,SAAA,CAAA3F,EAAA,KAAA,CAAA,SAAA,MAAA,CAAA,EACAC,EAAA,MAAA,CACE,SAAA,CAAAD,EAAA,QAAA,CAAO,QAAQ,GAAf,SAAA,eAAA,CAAA,EACAA,EAAA,QAAA,CAAO,KAAK,OAAO,MAAOkF,EAAQ,SAAUM,CAAAA,CAF9C,CAAA,CAAA,CAAA,EAIAvF,EAAA,MAAA,CACE,MAAO,CACLqD,QAAS,MAFb,EAKE,SAAA,CAAAtD,EAAA,MAAA,CACE,MAAO,CACLJ,MAAO,MACP6D,OAAQ,IACR5D,OAAQ,oBACR8G,SAAU,QALd,EAAA,SAQG3B,EAAa4B,IAAKC,AAAS,GAAA,CACpBC,KAAAA,GAAWD,EAAKb,KAAO,KAAOa,EAAKV,QAGvC,SAAA,MAAA,CAEE,MAAO,CACLzC,WAAY4B,kBAAUoB,MAAOG,EAAKH,GAAK,OAAS,GAChDK,MAAOzB,kBAAUoB,MAAOG,EAAKH,GAAK,QAAU,EAJhD,EAME,QAAS,IAAM,CACbf,EAAakB,EAAKH,EAAN,CAPhB,EAUGI,SAAAA,CAAAA,EATID,EAAKH,EADZ,CAAA,CAJH,CAAA,CARH,EA2BAzG,EAAA,MAAA,CAAK,MAAO,CAAEL,MAAO,MAAOG,QAAS,EAArC,EACE,SAAA,CAAAE,EAAA,MAAA,CACE,SAAA,CAAAD,EAAA,QAAA,CAAA,SAAA,OAAA,CAAA,EACAA,EAAA,QAAA,CAAO,KAAK,OAAO,MAAOsF,EAAWA,EAASU,KAAOZ,EAAQY,KAAM,SAAUF,CAAAA,CAF/E,CAAA,CAAA,CAAA,EAIA7F,EAAA,MAAA,CACE,SAAA,CAAAD,EAAA,QAAA,CAAA,SAAA,UAAA,CAAA,EACAA,EAAA,QAAA,CAAO,KAAK,OAAO,MAAOsF,EAAWA,EAASa,QAAUf,EAAQe,QAAS,SAAUD,CAAAA,CAFrF,CAAA,CAAA,CALF,CAAA,CAAA,CAAA,EAWAjG,EAAA,MAAA,CACE,SAAA,CAAAD,EAAA,SAAA,CAAQ,SAAUsF,IAAa,KAAM,MAAO,CAAE/B,YAAa,EAA3D,EAAiE,QAAS6C,EAA1E,SAAA,QAAA,CAAA,EAGApG,EAAA,SAAA,CAAQ,SAAUsF,IAAa,KAAM,MAAO,CAAE/B,YAAa,EAA3D,EAAiE,QAAS+C,EAA1E,SAAA,QAAA,CAAA,EAGAtG,EAAA,SAAA,CAAQ,SAAUsF,IAAa,KAAM,MAAO,CAAE/B,YAAa,EAA3D,EAAiE,QAASiD,EAA1E,SAAA,QAAA,CAPF,CAAA,CAAA,CA3CF,CAAA,CAAA,CAhBF,CAAA,CAAA,CADF,CA0ED,EClFY,GAAqB,EAAO,OAAO,CAC9C,KAAM,qBACN,KAAM,AAAC,GAAW,CACV,KAAA,GAAe,EAAO,MAAoB,CAC9C,KAAM,eACN,QAAS,CACP,MAAO,CAAC,EACR,aAAc,EAChB,CAAA,CACD,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAc,CAC3B,CACD,EAEK,EAA4B,EAAO,QAAQ,CAC/C,KAAM,4BACN,KAAM,CAAC,CAAE,OAAO,IAA4B,CACpC,KAAA,GAAU,EAAI,EAAA,CAAc,EAE5B,EAAgB,EAAQ,MAAM,MAAM,EAAG,EAAQ,aAAe,CAAC,EAYjE,GAAA,EAAM,SAAW,gBAAiB,CAC9B,KAAA,GAAY,EAAc,EAAc,OAAS,GACvD,AAAI,EAAU,SAAW,iBAAmB,EAAU,QAAU,EAAM,OACpE,EAAc,IAAI,CAEtB,CAEA,KAAM,GAAW,CAAC,GAAG,EAAe,CAAK,EACnC,EAAW,EAAS,OAAS,EAE5B,MAAA,KAAe,IAAI,CACxB,MAAO,EACP,aAAc,CAAA,CACf,CACH,CAAA,CACD,EAEK,EAAY,EAAO,MAAiB,CACxC,KAAM,YACN,QAAS,CACP,QAAS,CAAC,CACZ,CAAA,CACD,EAEK,EAAY,EAAO,MAAM,CAC7B,KAAM,YACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAW,CACxB,CACD,EAEK,EAAc,EAAO,QAAQ,CACjC,KAAM,cACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAU,EAAI,EAAA,CAAc,EAC5B,EAAU,EAAI,EAAA,CAAc,EAC5B,EAAW,EAAQ,aAAe,EAEpC,MAAA,CAAC,GAAW,EAAW,EAClB,CACL,EAAA,EAAY,IAAI,CACd,QAAS,CAAC,CAAA,CACX,EAED,EAAA,EAAe,IAAI,CACjB,MAAO,EAAQ,MACf,aAAc,EAAA,CACf,CAAA,EAIE,CACL,IAAY,IAAI,EAAQ,MAAM,GAAU,KAAK,EAE7C,EAAA,EAAe,IAAI,CACjB,MAAO,EAAQ,MACf,aAAc,CAAA,CACf,CAAA,CAEL,CAAA,CACD,EAEK,EAAc,EAAO,QAAQ,CACjC,KAAM,cACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAU,EAAI,EAAA,CAAc,EAGlC,GAAI,CAFY,EAAI,EAAA,CAAc,EAGhC,MAAO,GAGH,KAAA,GAAW,EAAQ,aAAe,EAEjC,MAAA,CACL,IAAY,IAAI,EAAQ,MAAM,GAAU,KAAK,EAC7C,EAAA,EAAe,IAAI,CACjB,MAAO,EAAQ,MACf,aAAc,CAAA,CACf,CAAA,CAEL,CAAA,CACD,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,KAAM,CAAC,CAAE,SAEA,AADS,EAAI,EAAA,CAAc,EACnB,cAAgB,CACjC,CACD,EAEK,EAAe,EAAO,MAAM,CAChC,KAAM,eACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAU,EAAI,EAAA,CAAc,EAClC,MAAO,GAAQ,aAAe,EAAQ,MAAM,OAAS,CACvD,CAAA,CACD,EAEK,EAAqB,EAAO,MAAc,CAC9C,KAAM,qBACN,QAAS,EAAA,CACV,EAEK,EAAqB,EAAO,MAAM,CACtC,KAAM,qBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAoB,CACjC,CACD,EAEK,EAA0B,EAAO,QAAQ,CAC7C,KAAM,0BACN,KAAM,CAAC,GAAI,IACF,EAAqB,EAAA,IAAI,CAAK,CACvC,CACD,EAEK,EAA0B,EAAO,MAAM,CAC3C,KAAM,0BACN,KAAM,CAAC,CAAE,SAAU,CACX,KAAA,GAAQ,EAAI,EAAA,CAAoB,EAChC,EAAU,EAAI,EAAW,CAAA,EAAE,QAEjC,MAAI,KAAU,GACL,KAGF,CACL,QACA,OAAQ,EAAQ,EAAA,CAEpB,CAAA,CACD,EAEK,EAAc,EAAO,QAAQ,CACjC,KAAM,cACN,KAAM,CAAC,CAAE,OAAO,IAAuB,CAErC,KAAM,GAAW,CACf,QAAS,CAAC,GAAG,AAFD,EAAI,EAAA,CAAW,EAER,QAAS,CAAE,SAAU,EAAO,SAAU,SAAU,EAAO,QAAA,CAAU,CAAA,EAG/E,MAAA,CACL,EAAY,EAAA,IAAI,CAAQ,EACxB,EAA0B,CACxB,OAAQ,aACR,MAAO,CAAA,CACR,CAAA,CAEL,CAAA,CACD,EAEK,EAAgB,EAAO,QAAQ,CACnC,KAAM,gBACN,KAAM,CAAC,CAAE,OAAO,IAAyB,CAYvC,KAAM,GAAW,CACf,QAXc,AADF,EAAI,EAAA,CAAW,EACP,QAAQ,IAAI,CAAC,EAAQ,IACrC,IAAU,EAAO,MACZ,CACL,SAAU,EAAO,SACjB,SAAU,EAAO,QAAA,EAGd,CACR,CAGC,EAGK,MAAA,CACL,EAAY,EAAA,IAAI,CAAQ,EACxB,EAA0B,CACxB,OAAQ,gBACR,MAAO,EAAO,MACd,MAAO,CAAA,CACR,CAAA,CAEL,CAAA,CACD,EAEK,EAAgB,EAAO,MAAqB,CAChD,KAAM,gBACN,QAAS,CACP,KAAM,SACR,CAAA,CACD,EAEK,EAAgB,EAAO,MAAM,CACjC,KAAM,gBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAe,CAC5B,CACD,EAEK,EAAwB,EAAO,QAAQ,CAC3C,KAAM,wBACN,KAAM,CAAC,GAAI,IACF,EAAgB,EAAA,IAAI,CAAQ,CACrC,CACD,EAEM,MAAA,CACL,MAAO,CACL,eACA,YACA,gBACA,qBACA,0BACA,eACA,cACF,EACA,QAAS,CACP,cACA,gBACA,wBACA,cACA,cACA,yBACF,CAAA,CAEJ,CACF,CAAC,EAEY,GAAmB,CAAC,EAAoB,IAA4B,CACzE,KAAA,CAAE,IAAG,KAAM,EACX,CAAE,WAAU,SAAU,GAAmB,EACzC,CAAE,EAAG,EAAS,EAAG,GAAY,EAC7B,EAAS,EAAW,EACpB,EAAK,EAAI,EACT,EAAK,EAAI,EAEf,MAAO,GAAK,EAAK,EAAK,EAAK,EAAS,CACtC,EChUaQ,GAAkB,IAAM,OAC7B7H,KAAAA,GAAOC,IACPiB,EAASf,EAAgB2H,GAAAA,CAAD,EACxBC,EAAYzH,EAAeY,EAAOX,MAAMyH,UAAd,CAAA,EAC1BC,EAAgB3H,EAAeY,EAAOX,MAAM2H,cAAd,CAAA,EAC9BC,EAAqB7H,EAAeY,EAAOX,MAAM6H,wBAAd,CAAA,EACnCC,EAAU/H,EAAeY,EAAOX,MAAM+H,aAAd,CAAA,EACxBC,EAAUjI,EAAeY,EAAOX,MAAMiI,aAAd,CAAA,EAExBC,EAAgB,AAACC,GAAuB,CACtCC,KAAAA,GAASZ,EAAUa,QAAQC,KAAMF,AAAW,GACzCG,GAAiBJ,EAAUC,CAAX,CADV,EAIX,MAACA,GAME,CACLI,MAHYhB,EAAUa,QAAQI,QAAQL,CAA1B,EAIZA,QAAAA,EAPO,IAKT,EAMIM,EAAmB,AAAC3C,GAAoD,CAC5EA,EAAE4C,eAAF,EACA,KAAMR,GAAW,CAAES,EAAG7C,EAAE8C,MAAOC,EAAG/C,EAAEgD,KAAAA,EAE9BC,EAAad,EAAcC,CAAD,EAEhC,AAAIa,GACG,EAAA,CACHrI,EAAOH,QAAQyI,wBAAwBD,EAAWR,KAAlD,EACA7H,EAAOH,QAAQ0I,sBAAsB,CACnCC,KAAM,YACNX,MAAOQ,EAAWR,MAClBJ,OAAQY,EAAWZ,OACnBS,MAAO9C,EAAE8C,MACTE,MAAOhD,EAAEgD,KALX,CAAA,CAFG,CAAD,CAUL,EAGGK,EAAkB,AAACrD,GAAoD,CACvE2B,GAAAA,EAAcyB,OAAS,UACzB,OAGF,KAAMhB,GAAW,CAAES,EAAG7C,EAAE8C,MAAOC,EAAG/C,EAAEgD,KAAAA,EAGhC,AAACC,AAFcd,EAAcC,CAAD,GAGzBxH,EAAAA,EAAOH,QAAQ6I,YAAY,CAAElB,WAAUmB,SAAU,EAAjD,CAAA,CAAD,CACL,EAGGC,EAAkB,AAACxD,GAAoD,CACvE2B,GAAAA,EAAcyB,OAAS,UACzB,OAGF,KAAMhB,GAAW,CAAES,EAAG7C,EAAE8C,MAAOC,EAAG/C,EAAEgD,KAAAA,EAC9BC,EAAad,EAAcC,CAAD,EAEhC,AACE1I,EADF,AAAIuJ,EACGrI,EAAOH,QAAQyI,wBAAwBD,EAAWR,KAAlD,EAEA7H,EAAOH,QAAQyI,wBAAwB,EAAvC,CAFD,CAGL,EAGGO,EAAmB,IAAM,CACzB9B,AAAAA,EAAcyB,OAAS,aAEvBxI,EAAAA,EAAOH,QAAQ0I,sBAAsB,CACnCC,KAAM,cACNX,MAAOd,EAAcc,MACrBJ,OAAQV,EAAcU,OACtBS,MAAOnB,EAAcmB,MACrBE,MAAOrB,EAAcqB,KALvB,CAAA,CADE,CASL,EAGGU,EAAoB,IAAM,CAE5B9I,EAAAA,EAAOH,QAAQ0I,sBAAsB,CACnCC,KAAM,SADR,CAAA,CADE,CAAA,EAOAO,EAAc,AAACzI,GAA+C,CAC5DG,KAAAA,GAAQmC,SAAStC,EAAME,OAAOC,MAAO,EAArB,EAEtB,AAAIwG,GAAsB,CAACpE,MAAMpC,CAAD,GAE5BT,EAAAA,EAAOH,QAAQmJ,cAAc,CAC3BnB,MAAOZ,EAAmBY,MAC1Bc,SAAUlI,CAFZ,CAAA,CADE,CAML,EAID,SAAA,MAAA,CACE,MAAO,CACLjB,OAAQ,oBACRC,UAAW,aACXC,QAAS,EAJb,EAOE,SAAA,CAAAC,EAAA,KAAA,CAAA,SAAA,eAAA,CAAA,EACAC,EAAA,MAAA,CACE,MAAO,CACLL,MAAO,IACP0J,UAAW,SACXvJ,QAAS,EAJb,EAOE,SAAA,CAAAC,EAAA,SAAA,CACE,QAAS,IAAMb,EAAKkB,EAAOH,QAAQqJ,aAAhB,EACnB,MAAO,CACLC,OAAQ,QAHZ,EAKE,SAAU,CAAChC,EALb,SAAA,MAAA,CAAA,EASAxH,EAAA,SAAA,CACE,QAAS,IAAMb,EAAKkB,EAAOH,QAAQuJ,aAAhB,EACnB,MAAO,CACLD,OAAQ,QAHZ,EAKE,SAAU,CAAC9B,EALb,SAAA,MAAA,CAhBF,CAAA,CAAA,CAAA,EA0BA1H,EAAA,MAAA,CACE,MAAO,CACLJ,MAAO,IACP6D,OAAQ,IACR5D,OAAQ,oBACRC,UAAW,aACX6G,SAAU,QANd,EAQE,QAASmC,EACT,YAAaG,EAEZ/B,SAAAA,EAAUa,QAAQnB,IAAI,CAACkB,EAAQI,MAE5B,MAAA,CAEE,MAAO,CACLL,SAAU,WACV6B,KAAM5B,EAAOD,SAASS,EAAIR,EAAOkB,SAAW,EAC5CW,IAAK7B,EAAOD,SAASW,EAAIV,EAAOkB,SAAW,EAC3CpJ,MAAOkI,EAAOkB,SACdvF,OAAQqE,EAAOkB,SACflF,aAAcgE,EAAOkB,SAAW,EAChCnJ,OAAQ,iBACRyC,gBAAiBgF,kBAAoBY,SAAUA,EAAQ,UAAY,EAVvE,EAYE,cAAeE,CAZjB,EACON,EAAOD,SAASS,EAAI,IAAMR,EAAOD,SAASW,EAAI,IAAMV,EAAOkB,QADlE,CAFH,CA7CL,CAAA,EAgEG5B,EAAcyB,OAAS,eACrB,EAAD,CAEE,MAAO,CACLhB,SAAU,WACV6B,KAAMtC,EAAcmB,MACpBoB,IAAKvC,EAAcqB,MACnBmB,OAAQ,IACRlG,WAAY,OACZ7D,OAAQ,iBACRE,QAAS,EATb,EAWE,aAAcoJ,EACd,QAASD,EAZX,SAAA,iBAAA,EACM,WADN,EAiBD9B,EAAcyB,OAAS,iBACrB,EAAD,CAEE,MAAO,CACLhB,SAAU,WACV6B,KAAMtC,EAAcmB,MACpBoB,IAAKvC,EAAcqB,MACnB/E,WAAY,OACZ7D,OAAQ,iBACR+J,OAAQ,IACR7J,QAAS,EATb,EAWE,aAAcoJ,EAEd,SAAA,CAAAnJ,EAAA,IAAA,CAAA,SAAA,iBAAA,CAAA,EACAA,EAAA,MAAA,CACE,WAAA,QAAA,CACE,KAAK,QACL,MAAOsH,oBAAoBQ,OAAOkB,WAA3B1B,OAAuC,GAC9C,IAAK,EACL,IAAK,IACL,SAAU8B,CAAAA,CALZ,CAAA,CAfJ,CAAA,CAAA,EACM,aADN,CAnFJ,CAAA,CADF,CA+GD,ECnNY,EAAc,EAAO,OAAO,CACvC,KAAM,cACN,YAAa,GACb,KAAM,AAAC,GAAW,CACV,KAAA,GAAkB,EAAO,MAAM,CACnC,KAAM,kBACN,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAE,IAAI,MAAM,CAAA,CACnD,EAEK,EAAkB,EAAO,MAAM,CACnC,KAAM,kBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAiB,CAC9B,CACD,EAEK,EAAqB,EAAO,MAAM,CACtC,KAAM,qBACN,QAAS,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,CAAA,CAC3D,EAEK,EAAqB,EAAO,MAAM,CACtC,KAAM,qBACN,KAAM,CAAC,CAAE,SACA,EAAI,GAAoB,CACjC,CACD,EAEK,EAAY,EAAO,MAAiB,CACxC,KAAM,YACN,QAAS,CACP,QAAS,CACP,KAAM,OACN,KAAM,EACR,EACA,UAAW,EACb,CAAA,CACD,EAEK,EAAY,EAAO,MAAM,CAC7B,KAAM,YACN,KAAM,CAAC,CAAE,OAAO,IAAgB,CAC9B,KAAM,GAAQ,EAAI,EAAU,CAAG,CAAC,EAE5B,GAAA,EAAM,QAAQ,OAAS,OAClB,MAAA,CACL,KAAM,OACN,UAAW,EAAM,UACjB,QAAS,EAAM,QAAQ,KACvB,eAAgB,EAAM,QAAQ,IAAA,EAI9B,GAAA,EAAM,QAAQ,OAAS,UAAW,CACpC,KAAM,GAAW,GAAQ,EAAM,QAAQ,OAAO,EACxC,EAAe,AAAC,GACb,OAAO,EAAI,EAAU,CAAO,CAAC,EAAE,cAAc,EAG/C,MAAA,CACL,KAAM,UACN,UAAW,EAAM,UACjB,QAAS,EAAM,QAAQ,QACvB,eAAgB,EAAS,CAAY,CAAA,CAEzC,CAEM,KAAA,IAAI,OAAM,mBAAmB,CACrC,CAAA,CACD,EAEK,EAAoB,EAAO,QAAQ,CACvC,KAAM,oBACN,KAAM,CAAC,CAAE,OAAO,IAAgB,CAC9B,KAAM,GAAQ,EAAI,EAAU,CAAG,CAAC,EAEzB,MAAA,GAAU,CAAG,EAAE,IAAI,CACxB,QAAS,EAAM,QACf,UAAW,EAAA,CACZ,CACH,CAAA,CACD,EAEK,EAAsB,EAAO,QAAQ,CACzC,KAAM,sBACN,KAAM,CAAC,CAAE,OAAO,IAAgB,CAC9B,KAAM,GAAQ,EAAI,EAAU,CAAG,CAAC,EAEzB,MAAA,GAAU,CAAG,EAAE,IAAI,CACxB,QAAS,EAAM,QACf,UAAW,EAAA,CACZ,CACH,CAAA,CACD,EAEK,EAAwB,EAAO,QAAQ,CAC3C,KAAM,wBACN,KAAM,CAAC,CAAE,OAAO,CAAE,MAAK,WAA4C,CACjE,KAAM,GAAQ,EAAI,EAAU,CAAG,CAAC,EAE5B,MAAA,GAAM,WAAW,GAAG,EACf,EAAU,CAAG,EAAE,IAAI,CACxB,QAAS,CACP,KAAM,UACN,QAAS,CACX,EACA,UAAW,EAAM,SAAA,CAClB,EAEM,EAAU,CAAG,EAAE,IAAI,CACxB,QAAS,CACP,KAAM,OACN,KAAM,CACR,EACA,UAAW,EAAM,SAAA,CAClB,CAEL,CAAA,CACD,EAEM,MAAA,CACL,MAAO,CACL,YACA,qBACA,iBACF,EACA,QAAS,CACP,oBACA,sBACA,uBACF,CAAA,CAEJ,CACF,CAAC,EAEK,GAAU,AAAC,GACR,AAAC,GAAkB,CACpB,GAAA,CACI,KAAA,GAAa,EAAQ,MAAM,CAAC,EAAE,QAAQ,SAAU,AAAC,GAC9C,QAAQ,KAChB,EAID,MAAO,AAFI,IAAI,UAAS,MAAO,WAAW,eAAwB,EAExD,CAAG,CAAA,MACb,CACO,MAAA,GACT,CAAA,EC/JSS,GAAW,IAAM,CACtBC,KAAAA,GAAcxK,EAAgByK,EAAAA,CAAD,EAC7BC,EAAgBvK,EAAeqK,EAAYpK,MAAMuK,mBAAnB,CAAA,EAC9BC,EAAazK,EAAeqK,EAAYpK,MAAMyK,gBAAnB,CAAA,EAG/B,SAAA,MAAA,CACE,SAAA,CAAAnK,EAAA,KAAA,CAAA,SAAA,OAAA,CAAA,EACAC,EAAA,QAAA,CACE,MAAO,CACLmK,eAAgB,WAChBvK,OAAQ,iBACRyJ,UAAW,QAJf,EAOE,SAAA,CAAAtJ,EAAA,QAAA,CACE,WAAA,KAAA,CACE,MAAO,CACLsC,gBAAiB,SAFrB,EAKE,SAAA,CAAAtC,EAAA,KAAA,CAAI,MAAO,CAAEJ,MAAO,GAAI0D,QAAS,OAAtB,CAAA,CAAX,EACC0G,EAAcpD,IAAKyD,AAAAA,KAClB,KAAA,CAEE,MAAO,CACLC,SAAU,GACVzK,OAAQ,gBAJZ,EAOGwK,SAAAA,CAAAA,EANIA,CADP,CADD,CANH,CAAA,CAAA,CAAA,CADF,EAoBArK,EAAA,QAAA,CAAA,SACGkK,EAAWtD,IAAK2D,AAAW,KAExB,KAAA,CAAA,WACG,GAAD,CAAS,SAAgB,eAAA,CAAzB,GADOA,CAAT,CAFH,CAAA,CA5BL,CAAA,CAAA,CAFF,CAAA,CAAA,CADF,CA0CD,EAOKC,GAAU,CAAC,CAAER,gBAAeO,YAA2B,CACrDpL,KAAAA,GAAOC,IACPqL,EAAQnL,EAAgByK,EAAAA,CAAD,EAG3B,SAAAW,EAAA,CACE,SAAA,CAAA1K,EAAA,KAAA,CACE,MAAO,CACLJ,MAAO,GACPC,OAAQ,iBACRyC,gBAAiB,SAJrB,EAOGiI,SAAAA,CAPH,CAAA,EASCP,EAAcpD,IAAK+D,AAAc,GAAA,CAC1BC,KAAAA,GAAW,GAAED,IAAYJ,IAE7B,SAAA,KAAA,CAEE,MAAO,CACLD,SAAU,GACVO,SAAU,GACVhL,OAAQ,iBACR8G,SAAU,QANd,EAQE,QAAUhG,AAAU,GAAA,CACdA,AAAAA,EAAME,iBAAkBiK,mBAG5B3L,EAAKsL,EAAMvK,QAAQ6K,kBAAkBH,CAAhC,CAAD,CAZR,EAAA,WAeG,GAAD,CAAU,SAAA,CAAV,GAdKA,CADP,CAAA,CAHH,CAVH,CAAA,CADF,CAmCD,EAEKI,GAAW,CAAC,CAAEJ,aAAmC,CAC/CzL,KAAAA,GAAOC,IACP0K,EAAcxK,EAAgByK,EAAAA,CAAD,EAC7BkB,EAAOxL,EAAeqK,EAAYpK,MAAMwL,UAAUN,CAA5B,CAAD,EAErBO,EAAe,AAAC1F,GAA2C,CAC1DqE,EAAAA,EAAY5J,QAAQkL,sBAAsB,CAAEf,IAAKO,EAASS,MAAO5F,EAAE5E,OAAOC,KAA1E,CAAA,CAAD,CAAA,EAIJ,SAAA4J,EAAA,CACGO,SAAAA,CAAAA,EAAKK,aACJ,QAAA,CACE,MAAO,CACL1L,MAAO,OACP6D,OAAQ,OACRnB,gBAAiB,cACjBxC,UAAW,aACXwJ,UAAW,QANf,EAQE,MAAO2B,EAAKM,QACZ,SAAUJ,EACV,OAAQ,IAAM,CACRF,AAAAA,EAAKK,WACPnM,EAAK2K,EAAY5J,QAAQsL,oBAAoBZ,CAAxC,CAAD,CAZV,EAeE,UAAS,EAjBf,CAAA,EAqBG,CAACK,EAAKK,WAAaL,EAAKQ,cArB3B,CAAA,CADF,CAyBD,ECpHKC,GAAO,MAET,MAAA,CACE,SAAA,CAAA1L,EAAA,KAAA,CAAA,SAAA,kCAAA,CAAA,EACAA,EAAA,IAAA,CAAA,SAAA,kGAAA,CAAA,EAFFA,EAAA,KAAA,CAAA,CAAA,EAIGA,EAAA,GAAD,EAAA,EACAA,EALF,KAAA,CAAA,CAAA,EAMEA,EAAC,SACD,KAAA,CAAA,CAAA,IACC,SACD,KAAA,CAAA,CAAA,EACCA,EAAA,GAVH,EAAA,aAYGA,EAAA,GAZH,CAAA,CAAA,aAcEA,EAAC,GAdH,CAAA,CAAA,EAeEA,WACAA,EAAC,GAhBH,CAAA,CAAA,CAAA,CAAA,CADF,EAsBI2L,EAAYC,SAASC,eAAe,MAAxB,EAElB,GAAIF,EAAW,CACPG,KAAAA,GAAOC,GAA0BJ,CAA1B,EACPK,EAAQC,EAAOD,MAAM,CACzBE,WAAY,CAACC,KAAuBC,IAAxB,CAAA,CADA,EAITC,EAAAA,SACFC,qBAAD,CAAA,WACG,GAAD,CAAY,QAAZ,SACEtM,EAAC,GAAD,EAAA,CAAA,CADF,CAFJ,CAAA,CAAA,CAOD"}