{"version":3,"file":"async.1a86d3fb.js","sources":["../../../node_modules/.pnpm/rxjs@7.5.7/node_modules/rxjs/dist/esm5/internal/operators/concatMap.js","../../../node_modules/.pnpm/rxjs@7.5.7/node_modules/rxjs/dist/esm5/internal/operators/exhaustMap.js","../../../packages/remesh/src/modules/async.ts"],"sourcesContent":["import { mergeMap } from './mergeMap';\nimport { isFunction } from '../util/isFunction';\nexport function concatMap(project, resultSelector) {\n    return isFunction(resultSelector) ? mergeMap(project, resultSelector, 1) : mergeMap(project, 1);\n}\n//# sourceMappingURL=concatMap.js.map","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function exhaustMap(project, resultSelector) {\n    if (resultSelector) {\n        return function (source) {\n            return source.pipe(exhaustMap(function (a, i) { return innerFrom(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }));\n        };\n    }\n    return operate(function (source, subscriber) {\n        var index = 0;\n        var innerSub = null;\n        var isComplete = false;\n        source.subscribe(createOperatorSubscriber(subscriber, function (outerValue) {\n            if (!innerSub) {\n                innerSub = createOperatorSubscriber(subscriber, undefined, function () {\n                    innerSub = null;\n                    isComplete && subscriber.complete();\n                });\n                innerFrom(project(outerValue, index++)).subscribe(innerSub);\n            }\n        }, function () {\n            isComplete = true;\n            !innerSub && subscriber.complete();\n        }));\n    });\n}\n//# sourceMappingURL=exhaustMap.js.map","import { Observable } from 'rxjs'\r\nimport { concatMap, exhaustMap, mergeMap, switchMap, takeUntil } from 'rxjs/operators'\r\n\r\nimport {\r\n  DomainConceptName,\r\n  Remesh,\r\n  RemeshAction,\r\n  RemeshDomainContext,\r\n  RemeshEffectContext,\r\n  RemeshQueryContext,\r\n} from '../index'\r\n\r\nexport type DefaultAsyncData = {\r\n  type: 'default'\r\n}\r\n\r\nexport type LoadingAsyncData = {\r\n  type: 'loading'\r\n}\r\n\r\nexport type SuccessAsyncData<T> = {\r\n  type: 'success'\r\n  value: T\r\n}\r\n\r\nexport type FailedAsyncData = {\r\n  type: 'failed'\r\n  error: Error\r\n}\r\n\r\nexport type CanceledAsyncData = {\r\n  type: 'canceled'\r\n}\r\n\r\nexport type AsyncData<T> =\r\n  | DefaultAsyncData\r\n  | LoadingAsyncData\r\n  | SuccessAsyncData<T>\r\n  | FailedAsyncData\r\n  | CanceledAsyncData\r\n\r\nexport const AsyncData = {\r\n  default: (): DefaultAsyncData => {\r\n    return {\r\n      type: 'default',\r\n    }\r\n  },\r\n  loading: (): LoadingAsyncData => {\r\n    return {\r\n      type: 'loading',\r\n    }\r\n  },\r\n  success: <T>(value: T): SuccessAsyncData<T> => {\r\n    return {\r\n      type: 'success',\r\n      value,\r\n    }\r\n  },\r\n  failed: (error: Error): FailedAsyncData => {\r\n    return {\r\n      type: 'failed',\r\n      error,\r\n    }\r\n  },\r\n  canceled: (): CanceledAsyncData => {\r\n    return {\r\n      type: 'canceled',\r\n    }\r\n  },\r\n  isDefault: <T>(data: AsyncData<T>): data is DefaultAsyncData => {\r\n    return data.type === 'default'\r\n  },\r\n  isLoading: <T>(data: AsyncData<T>): data is LoadingAsyncData => {\r\n    return data.type === 'loading'\r\n  },\r\n  isSuccess: <T>(data: AsyncData<T>): data is SuccessAsyncData<T> => {\r\n    return data.type === 'success'\r\n  },\r\n  isFailed: <T>(data: AsyncData<T>): data is FailedAsyncData => {\r\n    return data.type === 'failed'\r\n  },\r\n  isCanceled: <T>(data: AsyncData<T>): data is CanceledAsyncData => {\r\n    return data.type === 'canceled'\r\n  },\r\n  assertDefault: <T>(data: AsyncData<T>): asserts data is DefaultAsyncData => {\r\n    if (data.type !== 'default') {\r\n      throw new Error(`Expected async data in default phase, but got '${data.type}'`)\r\n    }\r\n  },\r\n  assertLoading: <T>(data: AsyncData<T>): asserts data is LoadingAsyncData => {\r\n    if (data.type !== 'loading') {\r\n      throw new Error(`Expected async data in loading phase, but got '${data.type}'`)\r\n    }\r\n  },\r\n  assertSuccess: <T>(data: AsyncData<T>): asserts data is SuccessAsyncData<T> => {\r\n    if (data.type !== 'success') {\r\n      throw new Error(`Expected async data in success phase, but got '${data.type}'`)\r\n    }\r\n  },\r\n  assertFailed: <T>(data: AsyncData<T>): asserts data is FailedAsyncData => {\r\n    if (data.type !== 'failed') {\r\n      throw new Error(`Expected async data in failed phase, but got '${data.type}'`)\r\n    }\r\n  },\r\n  assertCanceled: <T>(data: AsyncData<T>): asserts data is CanceledAsyncData => {\r\n    if (data.type !== 'canceled') {\r\n      throw new Error(`Expected async data in canceled phase, but got '${data.type}'`)\r\n    }\r\n  },\r\n}\r\n\r\nexport type AsyncModuleContext = {\r\n  get: RemeshEffectContext['get']\r\n}\r\n\r\nexport type AsyncModuleOptions<T, U> = {\r\n  name: DomainConceptName<'AsyncModule'>\r\n  load: (context: RemeshQueryContext, arg: T) => Promise<U>\r\n  onLoading?: (context: AsyncModuleContext, arg: T) => RemeshAction\r\n  onSuccess?: (context: AsyncModuleContext, value: U, arg: T) => RemeshAction\r\n  onFailed?: (context: AsyncModuleContext, error: Error, arg: T) => RemeshAction\r\n  onCanceled?: (context: AsyncModuleContext, arg: T) => RemeshAction\r\n  onChanged?: (context: AsyncModuleContext, data: AsyncData<U>, arg: T) => RemeshAction\r\n  default?: AsyncData<U>\r\n  mode?: 'switch' | 'merge' | 'concat' | 'exhaust'\r\n}\r\n\r\nexport const AsyncModule = <T = void, U = void>(domain: RemeshDomainContext, options: AsyncModuleOptions<T, U>) => {\r\n  const defaultValue: AsyncData<U> = 'default' in options && options.default ? options.default : AsyncData.default()\r\n\r\n  const AsyncDataState = domain.state<AsyncData<U>>({\r\n    name: `${options.name}.AsyncDataState`,\r\n    default: defaultValue,\r\n  })\r\n\r\n  const UpdateAsyncDataCommand = domain.command({\r\n    name: `${options.name}.UpdateAsyncDataCommand`,\r\n    impl: ({ get }, [data, arg]: [AsyncData<U>, T]) => {\r\n      return [AsyncDataState().new(data), ChangedEvent(data), options.onChanged?.({ get }, data, arg) ?? null]\r\n    },\r\n  })\r\n\r\n  const AsyncDataQuery = domain.query({\r\n    name: `${options.name}.AsyncDataQuery`,\r\n    impl: ({ get }) => {\r\n      return get(AsyncDataState())\r\n    },\r\n  })\r\n\r\n  const ArgPlaceholder = Symbol('arg')\r\n\r\n  const ArgState = domain.state<T | typeof ArgPlaceholder>({\r\n    name: `${options.name}.ArgState`,\r\n    inspectable: false,\r\n    default: ArgPlaceholder,\r\n  })\r\n\r\n  const LoadingEvent = domain.event<T>({\r\n    name: `${options.name}.LoadingEvent`,\r\n  })\r\n\r\n  const SuccessEvent = domain.event<U>({\r\n    name: `${options.name}.SuccessEvent`,\r\n  })\r\n\r\n  const FailedEvent = domain.event<Error>({\r\n    name: `${options.name}.FailedEvent`,\r\n  })\r\n\r\n  const CanceledEvent = domain.event({\r\n    name: `${options.name}.CanceledEvent`,\r\n  })\r\n\r\n  const ChangedEvent = domain.event<AsyncData<U>>({\r\n    name: `${options.name}.ChangedEvent`,\r\n  })\r\n\r\n  const LoadEvent = domain.event<T>({\r\n    name: `${options.name}.LoadEvent`,\r\n  })\r\n\r\n  const LoadCommand = domain.command({\r\n    name: `${options.name}.LoadCommand`,\r\n    impl: ({ get }, arg: T) => {\r\n      return [\r\n        ArgState().new(arg),\r\n        UpdateAsyncDataCommand([AsyncData.loading(), arg]),\r\n        LoadEvent(arg),\r\n        LoadingEvent(arg),\r\n        options.onLoading?.({ get }, arg) ?? null,\r\n      ]\r\n    },\r\n  })\r\n\r\n  const SuccessCommand = domain.command({\r\n    name: `${options.name}.SuccessCommand`,\r\n    impl: ({ get }, [value, arg]: [U, T]) => {\r\n      const data = AsyncData.success(value)\r\n      return [\r\n        UpdateAsyncDataCommand([data, arg]),\r\n        SuccessEvent(value),\r\n        options.onSuccess?.({ get }, value, arg) ?? null,\r\n      ]\r\n    },\r\n  })\r\n\r\n  const FailedCommand = domain.command({\r\n    name: `${options.name}.FailedCommand`,\r\n    impl: ({ get }, [error, arg]: [Error, T]) => {\r\n      const data = AsyncData.failed(error)\r\n      return [UpdateAsyncDataCommand([data, arg]), FailedEvent(error), options.onFailed?.({ get }, error, arg) ?? null]\r\n    },\r\n  })\r\n\r\n  const CancelCommand = domain.command({\r\n    name: `${options.name}.CancelCommand`,\r\n    impl: ({ get }) => {\r\n      const currentData = get(AsyncDataQuery())\r\n\r\n      if (!AsyncData.isLoading(currentData)) {\r\n        return null\r\n      }\r\n\r\n      const arg = get(ArgState())\r\n\r\n      if (arg === ArgPlaceholder) {\r\n        return null\r\n      }\r\n\r\n      const data = AsyncData.canceled()\r\n      return [UpdateAsyncDataCommand([data, arg]), CanceledEvent(), options.onCanceled?.({ get }, arg) ?? null]\r\n    },\r\n  })\r\n\r\n  const ReloadCommand = domain.command({\r\n    name: `${options.name}.ReloadCommand`,\r\n    impl: ({ get }) => {\r\n      const arg = get(ArgState())\r\n\r\n      if (arg === ArgPlaceholder) {\r\n        return null\r\n      }\r\n\r\n      return [CancelCommand(), LoadCommand(arg)]\r\n    },\r\n  })\r\n\r\n  domain.effect({\r\n    name: `${options.name}.LoadEffect`,\r\n    impl: ({ get, fromEvent }) => {\r\n      const ctx: AsyncModuleContext = { get }\r\n\r\n      const handleArg = (arg: T) => {\r\n        return new Observable<RemeshAction>((subscriber) => {\r\n          let isUnsubscribed = false\r\n\r\n          const handleSuccess = (value: U) => {\r\n            if (!isUnsubscribed) {\r\n              subscriber.next(SuccessCommand([value, arg]))\r\n              subscriber.complete()\r\n            }\r\n          }\r\n\r\n          const handleFailed = (error: unknown) => {\r\n            if (!isUnsubscribed) {\r\n              subscriber.next(FailedCommand([error instanceof Error ? error : new Error(`${error}`), arg]))\r\n              subscriber.complete()\r\n            }\r\n          }\r\n\r\n          try {\r\n            options.load(ctx, arg).then(handleSuccess, handleFailed)\r\n          } catch (error) {\r\n            handleFailed(error)\r\n          }\r\n\r\n          return () => {\r\n            isUnsubscribed = true\r\n          }\r\n        }).pipe(takeUntil(fromEvent(CanceledEvent)))\r\n      }\r\n\r\n      if (!options.mode || options.mode === 'switch') {\r\n        return fromEvent(LoadEvent).pipe(switchMap((arg) => handleArg(arg)))\r\n      }\r\n\r\n      if (options.mode === 'concat') {\r\n        return fromEvent(LoadEvent).pipe(concatMap((arg) => handleArg(arg)))\r\n      }\r\n\r\n      if (options.mode === 'merge') {\r\n        return fromEvent(LoadEvent).pipe(mergeMap((arg) => handleArg(arg)))\r\n      }\r\n\r\n      if (options.mode === 'exhaust') {\r\n        return fromEvent(LoadEvent).pipe(exhaustMap((arg) => handleArg(arg)))\r\n      }\r\n\r\n      throw new Error(`RemeshAsyncModule: invalid mode: ${options.mode}`)\r\n    },\r\n  })\r\n\r\n  return Remesh.module({\r\n    query: {\r\n      AsyncDataQuery,\r\n    },\r\n    command: {\r\n      LoadCommand,\r\n      CancelCommand,\r\n      ReloadCommand,\r\n    },\r\n    event: {\r\n      CanceledEvent,\r\n      LoadingEvent,\r\n      SuccessEvent,\r\n      FailedEvent,\r\n      ChangedEvent,\r\n    },\r\n  })\r\n}\r\n"],"names":["concatMap","project","resultSelector","isFunction","mergeMap","exhaustMap","source","a","i","innerFrom","map","b","ii","operate","subscriber","index","innerSub","isComplete","createOperatorSubscriber","outerValue","AsyncData","value","error","data","AsyncModule","domain","options","defaultValue","AsyncDataState","UpdateAsyncDataCommand","get","arg","ChangedEvent","_b","_a","AsyncDataQuery","ArgPlaceholder","ArgState","LoadingEvent","SuccessEvent","FailedEvent","CanceledEvent","LoadEvent","LoadCommand","SuccessCommand","FailedCommand","CancelCommand","currentData","ReloadCommand","fromEvent","ctx","handleArg","Observable","isUnsubscribed","handleSuccess","handleFailed","takeUntil","switchMap","Remesh"],"mappings":"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"}