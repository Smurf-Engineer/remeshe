{"version":3,"file":"index.150de077.js","sources":["../../../node_modules/.pnpm/rxjs@7.5.7/node_modules/rxjs/dist/esm5/internal/observable/interval.js","../../../projects/react-demos/src/steps/FakeDomain.ts","../../../projects/react-demos/src/steps/types.ts","../../../projects/react-demos/src/steps/FakeStepA.tsx","../../../projects/react-demos/src/steps/FakeStepB.tsx","../../../projects/react-demos/src/steps/FakeStepC.tsx","../../../projects/react-demos/src/steps/FakeStepsContainer.tsx","../../../projects/react-demos/src/steps/FakeModal.tsx","../../../projects/react-demos/src/steps/App.tsx","../../../projects/react-demos/src/steps/index.tsx"],"sourcesContent":["import { asyncScheduler } from '../scheduler/async';\nimport { timer } from './timer';\nexport function interval(period, scheduler) {\n    if (period === void 0) { period = 0; }\n    if (scheduler === void 0) { scheduler = asyncScheduler; }\n    if (period < 0) {\n        period = 0;\n    }\n    return timer(period, period, scheduler);\n}\n//# sourceMappingURL=interval.js.map","import { RemeshDomain } from 'remesh'\nimport { interval } from 'rxjs'\nimport { take, map } from 'rxjs/operators'\n\nexport const FakeDomain = RemeshDomain({\n  name: 'FakeDomain',\n  impl(domain) {\n    const AState = domain.state<number[]>({\n      name: 'AState',\n      default: [],\n    })\n\n    const AQuery = domain.query({\n      name: 'AQuery',\n      impl({ get }) {\n        return get(AState())\n      },\n    })\n\n    const ACommand = domain.command({\n      name: 'ACommand',\n      impl({ get }, value: number) {\n        return [AState().new(get(AQuery()).concat(value))]\n      },\n    })\n\n    const BState = domain.state<number[]>({\n      name: 'BState',\n      default: [],\n    })\n\n    const BQuery = domain.query({\n      name: 'BQuery',\n      impl({ get }) {\n        return get(BState())\n      },\n    })\n\n    const SummaryQuery = domain.query({\n      name: 'SummaryQuery',\n      impl({ get }) {\n        return get(BQuery()).reduce((res, cur) => (res += cur), 0)\n      },\n    })\n\n    const BCommand = domain.command({\n      name: 'BCommand',\n      impl({ get }, value: number) {\n        return [BState().new(get(BQuery()).concat(value))]\n      },\n    })\n\n    domain.effect({\n      name: 'FakeEffect',\n      impl() {\n        return interval(200).pipe(\n          take(10),\n          map((value) => [ACommand(value), BCommand(value * 1000)]),\n        )\n      },\n    })\n\n    return {\n      query: { AQuery, BQuery, SummaryQuery },\n    }\n  },\n})\n","export enum Steps {\n  A = 'A',\n  B = 'B',\n  C = 'C',\n}\n\nexport type stepsAction = { type: Steps.A } | { type: Steps.B } | { type: Steps.C }\n\nexport type StepsState = {\n  currentStep: Steps\n}\n\nexport type StepsReducer = React.Reducer<StepsState, stepsAction>\n","import * as React from 'react'\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\nimport { FakeDomain } from './FakeDomain'\nimport { Steps, stepsAction } from './types'\n\nexport const FakeStepA = (props: { dispatch: React.Dispatch<stepsAction> }) => {\n  const domain = useRemeshDomain(FakeDomain())\n\n  const a = useRemeshQuery(domain.query.AQuery())\n  const summary = useRemeshQuery(domain.query.SummaryQuery())\n\n  return (\n    <div>\n      <div>\n        <button\n          onClick={() => {\n            props.dispatch({ type: Steps.B })\n          }}\n        >\n          Next Step\n        </button>\n      </div>\n      <div>A</div>\n      <div>{a}</div>\n      <div>summary: {summary}</div>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport { Steps, stepsAction } from './types'\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\nimport { FakeDomain } from './FakeDomain'\n\nexport const FakeStepB = (props: { dispatch: React.Dispatch<stepsAction> }) => {\n  const domain = useRemeshDomain(FakeDomain())\n\n  const b = useRemeshQuery(domain.query.BQuery())\n\n  return (\n    <div>\n      <div>\n        <button\n          onClick={() => {\n            props.dispatch({ type: Steps.C })\n          }}\n        >\n          Next Step\n        </button>\n        <button\n          onClick={() => {\n            props.dispatch({ type: Steps.A })\n          }}\n        >\n          Previous Step\n        </button>\n      </div>\n      <div>B</div>\n      <div>{b.join(' | ')}</div>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport { Steps, stepsAction } from './types'\n\nexport const FakeStepC = (props: { dispatch: React.Dispatch<stepsAction> }) => {\n  return (\n    <div>\n      <div>\n        <button\n          onClick={() => {\n            props.dispatch({ type: Steps.A })\n          }}\n        >\n          To First Step\n        </button>\n        <button\n          onClick={() => {\n            props.dispatch({ type: Steps.B })\n          }}\n        >\n          Previous Step\n        </button>\n      </div>\n      <div>C</div>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport { FakeStepA } from './FakeStepA'\nimport { FakeStepB } from './FakeStepB'\nimport { FakeStepC } from './FakeStepC'\nimport { Steps, StepsReducer } from './types'\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\nimport { FakeDomain } from './FakeDomain'\n\nconst initState = {\n  currentStep: Steps.A,\n}\n\nconst stepComponentMap = {\n  [Steps.A]: FakeStepA,\n  [Steps.B]: FakeStepB,\n  [Steps.C]: FakeStepC,\n}\n\nexport const FakeStepsContainer = () => {\n  const [state, dispatch] = React.useReducer<StepsReducer>((state, action) => {\n    switch (action.type) {\n      case Steps.A:\n        return { currentStep: Steps.A }\n      case Steps.B:\n        return { currentStep: Steps.B }\n      case Steps.C:\n        return { currentStep: Steps.C }\n    }\n  }, initState)\n\n  const CurrentStep = stepComponentMap[state.currentStep]\n\n  return (\n    <div>\n      <CurrentStep dispatch={dispatch} />\n    </div>\n  )\n}\n","import { RemeshScope } from 'remesh-react'\nimport { FakeDomain } from './FakeDomain'\n\nimport { FakeStepsContainer } from './FakeStepsContainer'\n\nexport const FakeModal = () => {\n  return (\n    <div style={{ border: '1px solid #eaeaea', margin: '0 auto', width: 300, padding: 10 }}>\n      <RemeshScope domains={[FakeDomain()]}>\n        <FakeStepsContainer />\n      </RemeshScope>\n    </div>\n  )\n}\n","import * as React from 'react'\nimport './style.css'\nimport { FakeModal } from './FakeModal'\n\nexport default function App() {\n  const [visible, setVisible] = React.useState(false)\n  return (\n    <div>\n      <h1>Steps</h1>\n      <button onClick={() => setVisible(!visible)}>{!visible ? 'Open Modal' : 'Close Modal'}</button>\n      {visible && <FakeModal />}\n    </div>\n  )\n}\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\n\nimport { Remesh } from 'remesh'\nimport { RemeshRoot } from 'remesh-react'\n\nimport { RemeshReduxDevtools } from 'remesh-redux-devtools'\nimport { RemeshLogger } from 'remesh-logger'\n\nimport App from './App'\n\nconst rootElement = document.getElementById('root')\nconst root = createRoot(rootElement!)\n\nconst store = Remesh.store({\n  inspectors: [RemeshReduxDevtools(), RemeshLogger()],\n})\n\nroot.render(\n  <StrictMode>\n    <RemeshRoot store={store}>\n      <App />\n    </RemeshRoot>\n  </StrictMode>,\n)\n"],"names":["interval","period","scheduler","asyncScheduler","timer","FakeDomain","RemeshDomain","domain","AState","AQuery","get","ACommand","value","BState","BQuery","SummaryQuery","res","cur","BCommand","take","map","Steps","FakeStepA","props","useRemeshDomain","a","useRemeshQuery","query","summary","_jsx","dispatch","type","B","_jsxs","FakeStepB","b","C","A","join","FakeStepC","initState","currentStep","stepComponentMap","FakeStepsContainer","state","React","action","CurrentStep","FakeModal","border","margin","width","padding","RemeshScope","App","visible","setVisible","rootElement","document","getElementById","root","createRoot","store","Remesh","inspectors","RemeshReduxDevtools","RemeshLogger","render","StrictMode","RemeshRoot"],"mappings":"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"}