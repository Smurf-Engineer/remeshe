var T=Object.defineProperty,W=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var A=(e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,S=(e,t)=>{for(var s in t||(t={}))B.call(t,s)&&A(e,s,t[s]);if(F)for(var s of F(t))G.call(t,s)&&A(e,s,t[s]);return e},D=(e,t)=>W(e,Y(t));import{k as H,o as J,c as P,h as R,m as K,R as q,O as Z,b as Q,d as $,u as ee}from"./remesh-logger.3c4497cd.js";import{s as te,t as se}from"./takeUntil.e57e0a9c.js";import{m as z}from"./mergeMap.e508a938.js";import{j as C,a as g,F as re}from"./jsx-runtime.a8396eb8.js";function ae(e,t){return H(t)?z(e,t,1):z(e,1)}function X(e,t){return t?function(s){return s.pipe(X(function(o,l){return R(e(o,l)).pipe(K(function(p,m){return t(o,p,l,m)}))}))}:J(function(s,o){var l=0,p=null,m=!1;s.subscribe(P(o,function(b){p||(p=P(o,void 0,function(){p=null,m&&o.complete()}),R(e(b,l++)).subscribe(p))},function(){m=!0,!p&&o.complete()}))})}const y={default:()=>({type:"default"}),loading:()=>({type:"loading"}),success:e=>({type:"success",value:e}),failed:e=>({type:"failed",error:e}),canceled:()=>({type:"canceled"}),isDefault:e=>e.type==="default",isLoading:e=>e.type==="loading",isSuccess:e=>e.type==="success",isFailed:e=>e.type==="failed",isCanceled:e=>e.type==="canceled",assertDefault:e=>{if(e.type!=="default")throw new Error(`Expected async data in default phase, but got '${e.type}'`)},assertLoading:e=>{if(e.type!=="loading")throw new Error(`Expected async data in loading phase, but got '${e.type}'`)},assertSuccess:e=>{if(e.type!=="success")throw new Error(`Expected async data in success phase, but got '${e.type}'`)},assertFailed:e=>{if(e.type!=="failed")throw new Error(`Expected async data in failed phase, but got '${e.type}'`)},assertCanceled:e=>{if(e.type!=="canceled")throw new Error(`Expected async data in canceled phase, but got '${e.type}'`)}},ie=(e,t)=>{const s="default"in t&&t.default?t.default:y.default(),o=e.state({name:`${t.name}.AsyncDataState`,default:s}),l=e.command({name:`${t.name}.UpdateAsyncDataCommand`,impl:({get:c},r)=>{var h,i;return[o().new(r),n(r),(i=(h=t.onChanged)==null?void 0:h.call(t,{get:c},r))!=null?i:null]}}),p=e.query({name:`${t.name}.AsyncDataQuery`,impl:({get:c})=>c(o())}),m=Symbol("arg"),b=e.state({name:`${t.name}.ArgState`,inspectable:!1,default:m}),f=e.event({name:`${t.name}.LoadingEvent`}),d=e.event({name:`${t.name}.SuccessEvent`}),w=e.event({name:`${t.name}.FailedEvent`}),L=e.event({name:`${t.name}.CanceledEvent`}),n=e.event({name:`${t.name}.ChangedEvent`}),a=e.command({name:`${t.name}.LoadCommand`,impl:({get:c},r)=>{var h,i;return[b().new(r),l(y.loading()),f(),(i=(h=t.onLoading)==null?void 0:h.call(t,{get:c}))!=null?i:null]}}),v=e.command({name:`${t.name}.SuccessCommand`,impl:({get:c},r)=>{var i,u;const h=y.success(r);return[l(h),d(r),(u=(i=t.onSuccess)==null?void 0:i.call(t,{get:c},r))!=null?u:null]}}),E=e.command({name:`${t.name}.FailedCommand`,impl:({get:c},r)=>{var i,u;const h=y.failed(r);return[l(h),w(r),(u=(i=t.onFailed)==null?void 0:i.call(t,{get:c},r))!=null?u:null]}}),U=e.command({name:`${t.name}.CancelCommand`,impl:({get:c})=>{var i,u;const r=c(p());if(!y.isLoading(r))return null;const h=y.canceled();return[l(h),L(),(u=(i=t.onCanceled)==null?void 0:i.call(t,{get:c}))!=null?u:null]}}),O=e.command({name:`${t.name}.ReloadCommand`,impl:({get:c})=>{const r=c(b());return r===m?null:[U(),a(r)]}});return e.effect({name:`${t.name}.LoadEffect`,impl:({get:c,fromCommand:r})=>{const h={get:c},i=u=>new Z(j=>{let x=!1;const I=_=>{x||(j.next(v(_)),j.complete())},k=_=>{x||(j.next(E(_ instanceof Error?_:new Error(`${_}`))),j.complete())};try{t.load(h,u).then(I,k)}catch(_){k(_)}return()=>{x=!0}}).pipe(se(r(U)));if(!t.mode||t.mode==="switch")return r(a).pipe(te(u=>i(u)));if(t.mode==="concat")return r(a).pipe(ae(u=>i(u)));if(t.mode==="merge")return r(a).pipe(z(u=>i(u)));if(t.mode==="exhaust")return r(a).pipe(X(u=>i(u)));throw new Error(`RemeshAsyncModule: invalid mode: ${t.mode}`)}}),q.module({query:{AsyncDataQuery:p},command:{LoadCommand:a,CancelCommand:U,ReloadCommand:O},event:{CanceledEvent:L.toSubscribeOnlyEvent(),LoadingEvent:f.toSubscribeOnlyEvent(),SuccessEvent:d.toSubscribeOnlyEvent(),FailedEvent:w.toSubscribeOnlyEvent(),ChangedEvent:n.toSubscribeOnlyEvent()}})},ne=e=>new Promise(t=>setTimeout(t,e)),ue=[{login:"mojombo",id:1,node_id:"MDQ6VXNlcjE=",avatar_url:"https://avatars.githubusercontent.com/u/1?v=4",gravatar_id:"",url:"https://api.github.com/users/mojombo",html_url:"https://github.com/mojombo",followers_url:"https://api.github.com/users/mojombo/followers",following_url:"https://api.github.com/users/mojombo/following{/other_user}",gists_url:"https://api.github.com/users/mojombo/gists{/gist_id}",starred_url:"https://api.github.com/users/mojombo/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/mojombo/subscriptions",organizations_url:"https://api.github.com/users/mojombo/orgs",repos_url:"https://api.github.com/users/mojombo/repos",events_url:"https://api.github.com/users/mojombo/events{/privacy}",received_events_url:"https://api.github.com/users/mojombo/received_events",type:"User",site_admin:!1},{login:"defunkt",id:2,node_id:"MDQ6VXNlcjI=",avatar_url:"https://avatars.githubusercontent.com/u/2?v=4",gravatar_id:"",url:"https://api.github.com/users/defunkt",html_url:"https://github.com/defunkt",followers_url:"https://api.github.com/users/defunkt/followers",following_url:"https://api.github.com/users/defunkt/following{/other_user}",gists_url:"https://api.github.com/users/defunkt/gists{/gist_id}",starred_url:"https://api.github.com/users/defunkt/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/defunkt/subscriptions",organizations_url:"https://api.github.com/users/defunkt/orgs",repos_url:"https://api.github.com/users/defunkt/repos",events_url:"https://api.github.com/users/defunkt/events{/privacy}",received_events_url:"https://api.github.com/users/defunkt/received_events",type:"User",site_admin:!1},{login:"pjhyett",id:3,node_id:"MDQ6VXNlcjM=",avatar_url:"https://avatars.githubusercontent.com/u/3?v=4",gravatar_id:"",url:"https://api.github.com/users/pjhyett",html_url:"https://github.com/pjhyett",followers_url:"https://api.github.com/users/pjhyett/followers",following_url:"https://api.github.com/users/pjhyett/following{/other_user}",gists_url:"https://api.github.com/users/pjhyett/gists{/gist_id}",starred_url:"https://api.github.com/users/pjhyett/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/pjhyett/subscriptions",organizations_url:"https://api.github.com/users/pjhyett/orgs",repos_url:"https://api.github.com/users/pjhyett/repos",events_url:"https://api.github.com/users/pjhyett/events{/privacy}",received_events_url:"https://api.github.com/users/pjhyett/received_events",type:"User",site_admin:!1},{login:"wycats",id:4,node_id:"MDQ6VXNlcjQ=",avatar_url:"https://avatars.githubusercontent.com/u/4?v=4",gravatar_id:"",url:"https://api.github.com/users/wycats",html_url:"https://github.com/wycats",followers_url:"https://api.github.com/users/wycats/followers",following_url:"https://api.github.com/users/wycats/following{/other_user}",gists_url:"https://api.github.com/users/wycats/gists{/gist_id}",starred_url:"https://api.github.com/users/wycats/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/wycats/subscriptions",organizations_url:"https://api.github.com/users/wycats/orgs",repos_url:"https://api.github.com/users/wycats/repos",events_url:"https://api.github.com/users/wycats/events{/privacy}",received_events_url:"https://api.github.com/users/wycats/received_events",type:"User",site_admin:!1},{login:"ezmobius",id:5,node_id:"MDQ6VXNlcjU=",avatar_url:"https://avatars.githubusercontent.com/u/5?v=4",gravatar_id:"",url:"https://api.github.com/users/ezmobius",html_url:"https://github.com/ezmobius",followers_url:"https://api.github.com/users/ezmobius/followers",following_url:"https://api.github.com/users/ezmobius/following{/other_user}",gists_url:"https://api.github.com/users/ezmobius/gists{/gist_id}",starred_url:"https://api.github.com/users/ezmobius/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/ezmobius/subscriptions",organizations_url:"https://api.github.com/users/ezmobius/orgs",repos_url:"https://api.github.com/users/ezmobius/repos",events_url:"https://api.github.com/users/ezmobius/events{/privacy}",received_events_url:"https://api.github.com/users/ezmobius/received_events",type:"User",site_admin:!1},{login:"ivey",id:6,node_id:"MDQ6VXNlcjY=",avatar_url:"https://avatars.githubusercontent.com/u/6?v=4",gravatar_id:"",url:"https://api.github.com/users/ivey",html_url:"https://github.com/ivey",followers_url:"https://api.github.com/users/ivey/followers",following_url:"https://api.github.com/users/ivey/following{/other_user}",gists_url:"https://api.github.com/users/ivey/gists{/gist_id}",starred_url:"https://api.github.com/users/ivey/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/ivey/subscriptions",organizations_url:"https://api.github.com/users/ivey/orgs",repos_url:"https://api.github.com/users/ivey/repos",events_url:"https://api.github.com/users/ivey/events{/privacy}",received_events_url:"https://api.github.com/users/ivey/received_events",type:"User",site_admin:!1},{login:"evanphx",id:7,node_id:"MDQ6VXNlcjc=",avatar_url:"https://avatars.githubusercontent.com/u/7?v=4",gravatar_id:"",url:"https://api.github.com/users/evanphx",html_url:"https://github.com/evanphx",followers_url:"https://api.github.com/users/evanphx/followers",following_url:"https://api.github.com/users/evanphx/following{/other_user}",gists_url:"https://api.github.com/users/evanphx/gists{/gist_id}",starred_url:"https://api.github.com/users/evanphx/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/evanphx/subscriptions",organizations_url:"https://api.github.com/users/evanphx/orgs",repos_url:"https://api.github.com/users/evanphx/repos",events_url:"https://api.github.com/users/evanphx/events{/privacy}",received_events_url:"https://api.github.com/users/evanphx/received_events",type:"User",site_admin:!1},{login:"vanpelt",id:17,node_id:"MDQ6VXNlcjE3",avatar_url:"https://avatars.githubusercontent.com/u/17?v=4",gravatar_id:"",url:"https://api.github.com/users/vanpelt",html_url:"https://github.com/vanpelt",followers_url:"https://api.github.com/users/vanpelt/followers",following_url:"https://api.github.com/users/vanpelt/following{/other_user}",gists_url:"https://api.github.com/users/vanpelt/gists{/gist_id}",starred_url:"https://api.github.com/users/vanpelt/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/vanpelt/subscriptions",organizations_url:"https://api.github.com/users/vanpelt/orgs",repos_url:"https://api.github.com/users/vanpelt/repos",events_url:"https://api.github.com/users/vanpelt/events{/privacy}",received_events_url:"https://api.github.com/users/vanpelt/received_events",type:"User",site_admin:!1},{login:"wayneeseguin",id:18,node_id:"MDQ6VXNlcjE4",avatar_url:"https://avatars.githubusercontent.com/u/18?v=4",gravatar_id:"",url:"https://api.github.com/users/wayneeseguin",html_url:"https://github.com/wayneeseguin",followers_url:"https://api.github.com/users/wayneeseguin/followers",following_url:"https://api.github.com/users/wayneeseguin/following{/other_user}",gists_url:"https://api.github.com/users/wayneeseguin/gists{/gist_id}",starred_url:"https://api.github.com/users/wayneeseguin/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/wayneeseguin/subscriptions",organizations_url:"https://api.github.com/users/wayneeseguin/orgs",repos_url:"https://api.github.com/users/wayneeseguin/repos",events_url:"https://api.github.com/users/wayneeseguin/events{/privacy}",received_events_url:"https://api.github.com/users/wayneeseguin/received_events",type:"User",site_admin:!1},{login:"brynary",id:19,node_id:"MDQ6VXNlcjE5",avatar_url:"https://avatars.githubusercontent.com/u/19?v=4",gravatar_id:"",url:"https://api.github.com/users/brynary",html_url:"https://github.com/brynary",followers_url:"https://api.github.com/users/brynary/followers",following_url:"https://api.github.com/users/brynary/following{/other_user}",gists_url:"https://api.github.com/users/brynary/gists{/gist_id}",starred_url:"https://api.github.com/users/brynary/starred{/owner}{/repo}",subscriptions_url:"https://api.github.com/users/brynary/subscriptions",organizations_url:"https://api.github.com/users/brynary/orgs",repos_url:"https://api.github.com/users/brynary/repos",events_url:"https://api.github.com/users/brynary/events{/privacy}",received_events_url:"https://api.github.com/users/brynary/received_events",type:"User",site_admin:!1}];let oe=1e6;const N=async e=>(await ne(500),ue.map(t=>D(S({},t),{id:oe++})));let V=!1;const ce=async e=>{if(V)return N();try{const t=await fetch(`https://api.github.com/users?since=${e.offset}&per_page=${e.pageSize}`);if(!t.ok)throw new Error(t.statusText);return await t.json()}catch{return V=!0,N()}},M=q.domain({name:"PaginationDomain",impl:e=>{const t={offset:0,pageSize:10},s=e.state({name:"PaginationState",default:t}),o=e.state({name:"UserListState",default:[]}),l=e.query({name:"UserListQuery",impl:({get:n})=>n(o())}),p=e.query({name:"IsEmptyUserListQuery",impl:({get:n})=>n(l()).length===0}),m=e.query({name:"NextPaginationQuery",impl:({get:n})=>{const a=n(s()),v=n(l());if(v.length===0)return a;const E=v[v.length-1];return D(S({},a),{offset:E.id+1})}}),b=e.command({name:"SetPaginationCommand",impl:({get:n},a)=>s().new(a)}),f=e.command({name:"SetUserListCommand",impl:({get:n},a)=>o().new(a)}),d=ie(e,{name:"UserFetcher",load:async({},n)=>await ce(n),onSuccess:({get:n},a)=>{const v=n(m()),E=n(o());return[b(v),f([...E,...a])]}});e.effect({name:"UserFetcherEffect",impl:({})=>[d.command.LoadCommand(t)]});const w=e.command({name:"LoadMoreCommand",impl:({get:n})=>{const a=n(m());return d.command.LoadCommand(a)}}),L=e.command({name:"ResetCommand",impl:({})=>[b(t),f([]),w()]});return{query:{UserListQuery:l,IsEmptyUserListQuery:p,AsyncDataQuery:d.query.AsyncDataQuery},command:{LoadMoreCommand:w,ResetCommand:L},event:{LoadingUsersEvent:d.event.LoadingEvent,SuccessToLoadUsersEvent:d.event.SuccessEvent,FailedToLoadUsersEvent:d.event.FailedEvent}}}});var ve=()=>{const e=Q(M()),t=$(e.query.IsEmptyUserListQuery());return C("div",{children:[g("h2",{children:"Pagination"}),t?"loading...":g(le,{})]})};const le=()=>{const e=ee(),t=Q(M()),s=$(t.query.AsyncDataQuery()),o=y.isLoading(s);return C(re,{children:[g("div",{children:g("button",{onClick:()=>{e(t.command.ResetCommand())},children:"reset"})}),g(pe,{}),C("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[!o&&g("button",{onClick:()=>{e(t.command.LoadMoreCommand())},children:"load more"}),o&&"loading..."]})]})},pe=()=>{const e=Q(M()),t=$(e.query.UserListQuery());return g("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.map(s=>C("div",{style:{width:100,margin:10},children:[g("img",{style:{width:100,height:100},src:s.avatar_url,loading:"lazy"}),g("p",{children:g("a",{href:s.html_url,children:s.login})})]},s.id))})};export{ve as default};
//# sourceMappingURL=pagination.593fcf23.js.map
