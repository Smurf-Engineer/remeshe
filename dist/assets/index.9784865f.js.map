{"version":3,"file":"index.9784865f.js","sources":["../../projects/remesh-example/vite/preload-helper","../../projects/remesh-example/src/others/index.tsx"],"sourcesContent":["const scriptRel = 'modulepreload';const seen = {};const base = '/remesh/dist/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', () => rej(new Error(`Unable to preload CSS for ${dep}`)));\n            });\n        }\n    })).then(() => baseModule());\n}","import React, { StrictMode, useState, useEffect, Suspense } from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\n\r\nimport { Remesh } from 'remesh'\r\n\r\nimport { RemeshRoot } from 'remesh-react'\r\nimport { RemeshReduxDevtools } from 'remesh-redux-devtools'\r\nimport { RemeshLogger } from 'remesh-logger'\r\n\r\nconst useHash = () => {\r\n  const [hash, setHash] = useState(window.location.hash.substring(1))\r\n\r\n  useEffect(() => {\r\n    const onHashChange = () => {\r\n      setHash(window.location.hash.substring(1))\r\n    }\r\n    window.addEventListener('hashchange', onHashChange)\r\n    return () => {\r\n      window.removeEventListener('hashchange', onHashChange)\r\n    }\r\n  })\r\n\r\n  return hash\r\n}\r\n\r\nconst CounterApp = React.lazy(() => import('./counter'))\r\nconst PaginationApp = React.lazy(() => import('./pagination'))\r\n\r\nconst ComponentMap = {\r\n  counter: CounterApp,\r\n  pagination: PaginationApp,\r\n}\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <ul>\r\n      <li>\r\n        <a href={import.meta.env.BASE_URL}>Home</a>\r\n      </li>\r\n      <li>\r\n        <a href=\"#counter\">Counter</a>\r\n      </li>\r\n      <li>\r\n        <a href=\"#pagination\">Pagination</a>\r\n      </li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const hash = useHash()\r\n  const Component = ComponentMap[hash || 'pagination']\r\n\r\n  return (\r\n    <div>\r\n      <Menu />\r\n      <Suspense fallback=\"loading...\">{!!Component ? <Component /> : 'Not Found'}</Suspense>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst storeOptions = {\r\n  inspectors: [\r\n    RemeshReduxDevtools(),\r\n    RemeshLogger({\r\n      include: ['command', 'query', 'event', 'domain', 'command$', 'state'],\r\n    }),\r\n  ],\r\n}\r\n\r\nconst rootElem = document.getElementById('root')\r\n\r\nif (rootElem) {\r\n  const root = createRoot(rootElem)\r\n\r\n  root.render(\r\n    <StrictMode>\r\n      <RemeshRoot options={storeOptions}>\r\n        <App />\r\n      </RemeshRoot>\r\n    </StrictMode>,\r\n  )\r\n}\r\n"],"names":["useState","useEffect","Suspense","StrictMode"],"mappings":"kKAAA,KAAM,GAAY,gBAAsB,EAAO,CAAE,EAAO,EAAO,gBAA6B,EAAgB,SAAiB,EAAY,EAAM,CAE3I,MAAI,AAAuB,CAAC,GAAQ,EAAK,SAAW,EACzC,EAAU,EAEd,QAAQ,IAAI,EAAK,IAAI,AAAC,GAAQ,CAIjC,GAFA,EAAM,GAAG,IAAO,IAEZ,IAAO,GACP,OAEJ,EAAK,GAAO,GACZ,KAAM,GAAQ,EAAI,SAAS,MAAM,EAC3B,EAAc,EAAQ,qBAAuB,GAEnD,GAAI,SAAS,cAAc,cAAc,MAAQ,GAAa,EAC1D,OAGJ,KAAM,GAAO,SAAS,cAAc,MAAM,EAU1C,GARA,EAAK,IAAM,EAAQ,aAAe,EAC7B,GACD,GAAK,GAAK,SACV,EAAK,YAAc,IAEvB,EAAK,KAAO,EAEZ,SAAS,KAAK,YAAY,CAAI,EAC1B,EACA,MAAO,IAAI,SAAQ,CAAC,EAAK,IAAQ,CAC7B,EAAK,iBAAiB,OAAQ,CAAG,EACjC,EAAK,iBAAiB,QAAS,IAAM,EAAI,GAAI,OAAM,6BAA6B,GAAK,CAAC,CAAC,CACvG,CAAa,CAER,CAAA,CAAC,EAAE,KAAK,IAAM,EAAY,CAAA,CAC/B,EC5BM,EAAU,IAAM,CACd,KAAA,CAAC,EAAM,GAAWA,mBAAS,OAAO,SAAS,KAAK,UAAU,CAAC,CAAC,EAElEC,SAAAA,QAAAA,UAAU,IAAM,CACd,KAAM,GAAe,IAAM,CACzB,EAAQ,OAAO,SAAS,KAAK,UAAU,CAAC,CAAC,CAAA,EAEpC,cAAA,iBAAiB,aAAc,CAAY,EAC3C,IAAM,CACJ,OAAA,oBAAoB,aAAc,CAAY,CAAA,CACvD,CACD,EAEM,CACT,EAEM,EAAa,EAAM,KAAK,IAAM,EAAA,IAAA,OAAA,yBAAA,kBAAA,CAAmB,EACjD,EAAgB,EAAM,KAAK,IAAM,EAAA,IAAA,OAAA,4BAAA,kBAAA,CAAsB,EAEvD,EAAe,CACnB,QAAS,EACT,WAAY,CACd,EAEM,EAAO,IAER,EAAA,cAAA,KAAA,KACE,EAAA,cAAA,KAAA,KACE,EAAA,cAAA,IAAA,CAAE,KAAM,eAAgB,EAAU,MAAI,CACzC,EACA,EAAA,cAAC,UACE,EAAA,cAAA,IAAA,CAAE,KAAK,UAAA,EAAW,SAAO,CAC5B,EACA,EAAA,cAAC,UACE,EAAA,cAAA,IAAA,CAAE,KAAK,aAAA,EAAc,YAAU,CAClC,CACF,EAIE,EAAM,IAAM,CAChB,KAAM,GAAO,IACP,EAAY,EAAa,GAAQ,cAEvC,MACG,GAAA,cAAA,MAAA,KACE,EAAA,cAAA,EAAA,IAAK,EACL,EAAA,cAAAC,EAAAA,QAAAA,SAAA,CAAS,SAAS,YAAA,EAAc,AAAE,kBAAa,EAAU,IAAA,EAAK,WAAY,CAC7E,CAEJ,EAEM,EAAe,CACnB,WAAY,CACV,EAAoB,EACpB,EAAa,CACX,QAAS,CAAC,UAAW,QAAS,QAAS,SAAU,WAAY,OAAO,CAAA,CACrE,CACH,CACF,EAEM,EAAW,SAAS,eAAe,MAAM,EAE/C,AAAI,GAGG,AAFQ,EAAW,CAAQ,EAE3B,OACF,EAAA,cAAAC,EAAA,QAAA,WAAA,KACE,EAAA,cAAA,EAAA,CAAW,QAAS,CAAA,EAClB,EAAA,cAAA,EAAA,IAAI,CACP,CACF,CACF"}