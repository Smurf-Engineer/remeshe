{"version":3,"file":"index.29979677.js","sources":["../../projects/remesh-example/src/todo-mvc-with-multiple-domains/domain-externs/storage.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/domain-externs-impl/storage.ts","../../packages/remesh/src/modules/text.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/domain-modules/sync-storage.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/domains/TodoInput.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/utils/uuid.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/domains/TodoList.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/hooks/useKeyPressHandler.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/components/TodoHeader.tsx","../../packages/remesh/src/modules/switch.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/domains/TodoFilter.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/domains/TodoApp.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/hooks/useInputHandler.ts","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/components/TodoItem.tsx","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/components/TodoList.tsx","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/components/TodoFooter.tsx","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/components/TodoApp.tsx","../../projects/remesh-example/src/todo-mvc-with-multiple-domains/index.tsx"],"sourcesContent":["import { Remesh } from 'remesh'\r\n\r\nexport type Storage = {\r\n  get: <T>(key: string) => Promise<T | null>\r\n  set: <T>(key: string, value: T) => Promise<void>\r\n  clear: (key: string) => Promise<void>\r\n}\r\n\r\nexport const Storage = Remesh.extern<Storage>({\r\n  name: 'Storage',\r\n  default: {\r\n    get: () => {\r\n      throw new Error('Not implemented')\r\n    },\r\n    set: () => {\r\n      throw new Error('Not implemented')\r\n    },\r\n    clear: () => {\r\n      throw new Error('Not implemented')\r\n    },\r\n  },\r\n})\r\n","import localforage from 'localforage'\r\nimport { Storage } from '../domain-externs/storage'\r\n\r\nexport const StorageImpl = Storage({\r\n  get: (key) => {\r\n    return localforage.getItem(key)\r\n  },\r\n  set: async (key, value) => {\r\n    await localforage.setItem(key, value)\r\n  },\r\n  clear: (key) => {\r\n    return localforage.removeItem(key)\r\n  },\r\n})\r\n","import { RemeshDomainContext } from '../index'\r\n\r\nexport type TextModuleOptions = {\r\n  name: string\r\n  default?: string\r\n}\r\n\r\nexport type TextChangedEventData = {\r\n  previous: string\r\n  current: string\r\n}\r\n\r\nexport type TextClearedEventData = {\r\n  previous: string\r\n}\r\n\r\nexport const TextModule = (domain: RemeshDomainContext, options: TextModuleOptions) => {\r\n  const TextState = domain.state({\r\n    name: `${options.name}.TextState`,\r\n    default: options.default ?? '',\r\n  })\r\n\r\n  const TextQuery = domain.query({\r\n    name: `${options.name}.InputQuery`,\r\n    impl: ({ get }) => get(TextState()),\r\n  })\r\n\r\n  const TextChangedEvent = domain.event<TextChangedEventData>({\r\n    name: `${options.name}.TextChangedEvent`,\r\n  })\r\n\r\n  const setText = domain.command({\r\n    name: `${options.name}.setText`,\r\n    impl: ({ get }, current: string) => {\r\n      const previous = get(TextState())\r\n\r\n      const result = [TextState().new(current), TextChangedEvent({ previous, current })]\r\n\r\n      if (current === '') {\r\n        return [...result, TextClearedEvent({ previous })]\r\n      }\r\n\r\n      return result\r\n    },\r\n  })\r\n\r\n  const TextClearedEvent = domain.event<TextClearedEventData>({\r\n    name: `${options.name}.InputClearedEvent`,\r\n  })\r\n\r\n  const clearText = domain.command({\r\n    name: `${options.name}.clearText`,\r\n    impl: () => {\r\n      return setText('')\r\n    },\r\n  })\r\n\r\n  return {\r\n    query: {\r\n      TextQuery,\r\n    },\r\n    command: {\r\n      setText,\r\n      clearText,\r\n    },\r\n    event: {\r\n      TextChangedEvent,\r\n      TextClearedEvent,\r\n    },\r\n  }\r\n}\r\n","import { RemeshDomainContext, RemeshCommandOutput, RemeshEvent } from 'remesh'\r\n\r\nimport { from } from 'rxjs'\r\nimport { filter, map, tap } from 'rxjs/operators'\r\n\r\nimport { Storage } from '../domain-externs/storage'\r\n\r\nexport type SyncStorageOptions<T, U = T> = {\r\n  storageKey: string\r\n  TriggerEvent: RemeshEvent<any, T>\r\n  saveData: (event: T) => U\r\n  readData: (value: U) => RemeshCommandOutput\r\n}\r\n\r\nconst createOptions = <R>(storageKey: string, callback: <T, U>(options: SyncStorageOptions<T, U>) => R) => {\r\n  return {\r\n    listenTo: <T>(TriggerEvent: RemeshEvent<any, T>) => {\r\n      return {\r\n        saveData: <U>(saveData: (event: T) => U) => {\r\n          return {\r\n            readData: (readData: (value: U) => RemeshCommandOutput) => {\r\n              return callback({\r\n                storageKey,\r\n                TriggerEvent,\r\n                saveData: saveData,\r\n                readData: readData,\r\n              })\r\n            },\r\n          }\r\n        },\r\n        readData: (readData: (value: T) => RemeshCommandOutput) => {\r\n          return callback({\r\n            storageKey,\r\n            TriggerEvent,\r\n            saveData: (event: T) => event,\r\n            readData: readData,\r\n          })\r\n        },\r\n      }\r\n    },\r\n  }\r\n}\r\n\r\nconst createSyncStorage = <T, U = T>(domain: RemeshDomainContext, options: SyncStorageOptions<T, U>) => {\r\n  const storage = domain.getExtern(Storage)\r\n\r\n  domain.command$({\r\n    name: 'readStorage',\r\n    impl: () => {\r\n      return from(storage.get<U>(options.storageKey)).pipe(\r\n        filter((value): value is U => !!value),\r\n        map((value) => options.readData(value)),\r\n      )\r\n    },\r\n  })\r\n\r\n  domain.command$({\r\n    name: 'writeStorage',\r\n    impl: ({ fromEvent }) => {\r\n      return fromEvent(options.TriggerEvent).pipe(\r\n        tap((value) => storage.set(options.storageKey, options.saveData(value))),\r\n        map(() => null),\r\n      )\r\n    },\r\n  })\r\n}\r\n\r\nexport const syncStorage = (domain: RemeshDomainContext, storageKey: string) => {\r\n  return createOptions(storageKey, (options) => createSyncStorage(domain, options))\r\n}\r\n","import { Remesh } from 'remesh'\r\nimport { TextModule } from 'remesh/modules/text'\r\n\r\nimport { syncStorage } from '../domain-modules/sync-storage'\r\n\r\nexport const TODO_INPUT_STORAGE_KEY = 'remesh-example/todo-input'\r\n\r\nexport const TodoInputDomain = Remesh.domain({\r\n  name: 'TodoInput',\r\n  impl: (domain) => {\r\n    const todoInputModule = TextModule(domain, {\r\n      name: 'TodoInput',\r\n    })\r\n\r\n    const TodoInputQuery = todoInputModule.query.TextQuery\r\n\r\n    const TodoInputChangedEvent = todoInputModule.event.TextChangedEvent\r\n\r\n    const TodoInputClearedEvent = todoInputModule.event.TextClearedEvent\r\n\r\n    const setTodoInput = todoInputModule.command.setText\r\n\r\n    const clearTodoInput = todoInputModule.command.clearText\r\n\r\n    syncStorage(domain, TODO_INPUT_STORAGE_KEY)\r\n      .listenTo(TodoInputChangedEvent)\r\n      .saveData((event) => event.current)\r\n      .readData((value) => setTodoInput(value))\r\n\r\n    return {\r\n      query: {\r\n        TodoInputQuery,\r\n      },\r\n      command: {\r\n        setTodoInput,\r\n        clearTodoInput,\r\n      },\r\n      event: {\r\n        TodoInputChangedEvent,\r\n        TodoInputClearedEvent,\r\n      },\r\n    }\r\n  },\r\n})\r\n","export const uuid = () =>\r\n  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n    var r = (Math.random() * 16) | 0,\r\n      v = c == 'x' ? r : (r & 0x3) | 0x8\r\n    return v.toString(16)\r\n  })\r\n","import { Remesh } from 'remesh'\r\nimport { ListModule } from 'remesh/modules/list'\r\n\r\nimport { uuid } from '../utils/uuid'\r\nimport { syncStorage } from '../domain-modules/sync-storage'\r\n\r\nexport const TODO_LIST_STORAGE_KEY = 'remesh-example/todo-list'\r\n\r\nexport type Todo = {\r\n  id: string\r\n  title: string\r\n  completed: boolean\r\n}\r\n\r\nexport type Todos = Todo[]\r\n\r\nexport const getTodoId = (todo: Todo) => todo.id\r\n\r\nexport const TodoListDomain = Remesh.domain({\r\n  name: 'TodoList',\r\n  impl: (domain) => {\r\n    const todoListModule = ListModule<Todo>(domain, {\r\n      name: 'TodoList',\r\n      key: getTodoId,\r\n    })\r\n\r\n    const TodoListQuery = todoListModule.query.ItemListQuery\r\n\r\n    const TodoQuery = todoListModule.query.ItemQuery\r\n\r\n    const TodoKeyListQuery = todoListModule.query.KeyListQuery\r\n\r\n    const TodoListChangedEvent = todoListModule.event.ListChangedEvent\r\n\r\n    const TodoItemAddedEvent = todoListModule.event.ItemAddedEvent\r\n\r\n    const TodoItemUpdatedEvent = todoListModule.event.ItemUpdatedEvent\r\n\r\n    const TodoItemDeletedEvent = todoListModule.event.ItemDeletedEvent\r\n\r\n    const FailedToAddTodoEvent = todoListModule.event.FailedToAddItemEvent\r\n\r\n    const FailedToUpdateTodoEvent = todoListModule.event.FailedToUpdateItemEvent\r\n\r\n    const setTodoList = todoListModule.command.setList\r\n\r\n    const addTodo = domain.command({\r\n      name: 'TodoList.addTodo',\r\n      impl: (_, title: string) => {\r\n        if (title === '') {\r\n          return FailedToAddTodoEvent({\r\n            reason: 'Title cannot be empty',\r\n          })\r\n        }\r\n\r\n        const todo: Todo = {\r\n          id: uuid(),\r\n          title: title,\r\n          completed: false,\r\n        }\r\n\r\n        return todoListModule.command.addItem(todo)\r\n      },\r\n    })\r\n\r\n    const updateTodo = domain.command({\r\n      name: 'TodoList.updateTodo',\r\n      impl: (_, todo: Todo) => {\r\n        if (todo.title === '') {\r\n          return deleteTodo(todo.id)\r\n        }\r\n        return todoListModule.command.updateItem(todo)\r\n      }\r\n    })\r\n\r\n    const deleteTodo = todoListModule.command.deleteItem\r\n\r\n    const ActiveTodoListQuery = domain.query({\r\n      name: 'ActiveTodoListQuery',\r\n      impl: ({ get }) => {\r\n        const todos = get(TodoListQuery())\r\n        return todos.filter((todo) => !todo.completed)\r\n      },\r\n    })\r\n\r\n    const CompletedTodoListQuery = domain.query({\r\n      name: 'CompletedTodoListQuery',\r\n      impl: ({ get }) => {\r\n        const todos = get(TodoListQuery())\r\n        return todos.filter((todo) => todo.completed)\r\n      },\r\n    })\r\n\r\n    const ActiveTodoCountQuery = domain.query({\r\n      name: 'ActiveTodoCountQuery',\r\n      impl: ({ get }) => {\r\n        const todos = get(ActiveTodoListQuery())\r\n        return todos.length\r\n      },\r\n    })\r\n\r\n    const CompletedTodoCountQuery = domain.query({\r\n      name: 'CompletedTodoCountQuery',\r\n      impl: ({ get }) => {\r\n        const todos = get(CompletedTodoListQuery())\r\n        return todos.length\r\n      },\r\n    })\r\n\r\n    const IsAllCompletedQuery = domain.query({\r\n      name: 'IsAllCompletedQuery',\r\n      impl: ({ get }) => {\r\n        const todos = get(TodoListQuery())\r\n\r\n        if (todos.length === 0) {\r\n          return false\r\n        }\r\n\r\n        const completedTodoCount = get(CompletedTodoCountQuery())\r\n\r\n        return completedTodoCount === todos.length\r\n      },\r\n    })\r\n\r\n    const toggleTodo = domain.command({\r\n      name: 'toggleTodo',\r\n      impl: ({ get }, id: Todo['id']) => {\r\n        const todo = get(TodoQuery(id))\r\n        const newTodo: Todo = {\r\n          ...todo,\r\n          completed: !todo.completed,\r\n        }\r\n\r\n        return todoListModule.command.updateItem(newTodo)\r\n      },\r\n    })\r\n\r\n    const toggleAllTodos = domain.command({\r\n      name: 'toggleAllTodos',\r\n      impl: ({ get }) => {\r\n        const todoList = get(TodoListQuery())\r\n\r\n        if (todoList.length === 0) {\r\n          return null\r\n        }\r\n\r\n        const activeCount = get(ActiveTodoCountQuery())\r\n        const completed = activeCount > 0\r\n        const newTodoList = todoList.map((todo) => ({\r\n          ...todo,\r\n          completed,\r\n        }))\r\n\r\n        return setTodoList(newTodoList)\r\n      },\r\n    })\r\n\r\n    const clearAllCompletedTodos = domain.command({\r\n      name: 'clearAllCompletedTodos',\r\n      impl: ({ get }) => {\r\n        const todoList = get(TodoListQuery())\r\n\r\n        if (todoList.length === 0) {\r\n          return null\r\n        }\r\n\r\n        const newTodoList = todoList.filter((todo) => !todo.completed)\r\n\r\n        return setTodoList(newTodoList)\r\n      },\r\n    })\r\n\r\n    syncStorage(domain, TODO_LIST_STORAGE_KEY)\r\n      .listenTo(TodoListChangedEvent)\r\n      .saveData((event) => event.current)\r\n      .readData((todos) => setTodoList(todos))\r\n\r\n    return {\r\n      query: {\r\n        TodoQuery,\r\n        TodoKeyListQuery,\r\n        TodoListQuery,\r\n        ActiveTodoListQuery,\r\n        CompletedTodoListQuery,\r\n        ActiveTodoCountQuery,\r\n        CompletedTodoCountQuery,\r\n        IsAllCompletedQuery\r\n      },\r\n      command: {\r\n        setTodoList,\r\n        addTodo,\r\n        updateTodo,\r\n        deleteTodo,\r\n        toggleTodo,\r\n        toggleAllTodos,\r\n        clearAllCompletedTodos,\r\n      },\r\n      event: {\r\n        TodoItemAddedEvent,\r\n        TodoItemUpdatedEvent,\r\n        TodoItemDeletedEvent,\r\n        FailedToAddTodoEvent,\r\n        FailedToUpdateTodoEvent,\r\n        TodoListChangedEvent,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import React from 'react'\r\n\r\nexport function useKeyPressHandler(\r\n  keys: string | string[],\r\n  callback: (event: React.KeyboardEvent<HTMLInputElement>, key: string) => void,\r\n) {\r\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    const keyList = Array.isArray(keys) ? keys : [keys]\r\n    for (const key of keyList) {\r\n      if (event.key.toLowerCase() === key.toLowerCase()) {\r\n        event.preventDefault()\r\n        callback(event, key)\r\n      }\r\n    }\r\n  }\r\n\r\n  return handleKeyPress\r\n}\r\n","import React from 'react'\r\n\r\nimport { useRemeshDomain, useRemeshEvent, useRemeshQuery } from 'remesh-react'\r\n\r\nimport { TodoInputDomain } from '../domains/TodoInput'\r\nimport { TodoListDomain } from '../domains/TodoList'\r\n\r\nimport { useKeyPressHandler } from '../hooks/useKeyPressHandler'\r\n\r\nexport const TodoHeader = () => {\r\n  const todoInputDomain = useRemeshDomain(TodoInputDomain())\r\n  const todoListDomain = useRemeshDomain(TodoListDomain())\r\n\r\n  const todoInput = useRemeshQuery(todoInputDomain.query.TodoInputQuery())\r\n\r\n  const handleTodoInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    todoInputDomain.command.setTodoInput(event.target.value)\r\n  }\r\n\r\n  const handlePressEnter = useKeyPressHandler('Enter', () => {\r\n    todoListDomain.command.addTodo(todoInput)\r\n  })\r\n\r\n  useRemeshEvent(todoListDomain.event.FailedToAddTodoEvent, (event) => {\r\n    alert(event.reason)\r\n  })\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <h1>todos</h1>\r\n      <input\r\n        className=\"new-todo\"\r\n        placeholder=\"What needs to be done?\"\r\n        value={todoInput}\r\n        onChange={handleTodoInputChange}\r\n        onKeyDown={handlePressEnter}\r\n      />\r\n    </header>\r\n  )\r\n}\r\n","import { RemeshDomainContext } from '../index'\r\n\r\nexport type SwitchModuleOptions<T> = {\r\n  name: string\r\n  default: T\r\n}\r\n\r\nexport type SwitchedEventData<T> = {\r\n  previous: T\r\n  current: T\r\n}\r\n\r\nexport const SwitchModule = <T>(domain: RemeshDomainContext, options: SwitchModuleOptions<T>) => {\r\n  const SwitchState = domain.state({\r\n    name: `${options.name}.SwitchState`,\r\n    default: options.default,\r\n  })\r\n\r\n  const SwitchQuery = domain.query({\r\n    name: `${options.name}.SwitchQuery`,\r\n    impl: ({ get }) => get(SwitchState()),\r\n  })\r\n\r\n  const SwitchedEvent = domain.event<SwitchedEventData<T>>({\r\n    name: `${options.name}.SwitchedEvent`,\r\n  })\r\n\r\n  const switchTo = domain.command({\r\n    name: `${options.name}.switchTo`,\r\n    impl: ({ get }, current: T) => {\r\n      const previous = get(SwitchState())\r\n\r\n      const result = [SwitchState().new(current), SwitchedEvent({ previous, current })]\r\n\r\n      return result\r\n    },\r\n  })\r\n\r\n  return {\r\n    query: {\r\n      SwitchQuery,\r\n    },\r\n    command: {\r\n      switchTo,\r\n    },\r\n    event: {\r\n      SwitchedEvent,\r\n    },\r\n  }\r\n}\r\n","import { Remesh } from 'remesh'\r\nimport { SwitchModule } from 'remesh/modules/switch'\r\n\r\nimport { syncStorage } from '../domain-modules/sync-storage'\r\n\r\nexport const TODO_FILTER_STORAGE_KEY = 'remesh-example/todo-filter'\r\n\r\nexport type TodoFilter = 'all' | 'active' | 'completed'\r\n\r\nexport const getValidTodoFilter = (input: string | undefined): TodoFilter => {\r\n  if (input === undefined) {\r\n    return 'all'\r\n  }\r\n\r\n  switch (input) {\r\n    case 'all':\r\n    case 'active':\r\n    case 'completed':\r\n      return input\r\n    default:\r\n      return 'all'\r\n  }\r\n}\r\n\r\nexport const TodoFilterDomain = Remesh.domain({\r\n  name: 'TodoFilter',\r\n  impl: (domain) => {\r\n    const todoFilterModule = SwitchModule<TodoFilter>(domain, {\r\n      name: 'TodoFilter',\r\n      default: 'all',\r\n    })\r\n\r\n    const TodoFilterQuery = todoFilterModule.query.SwitchQuery\r\n\r\n    const TodoFilterChangedEvent = todoFilterModule.event.SwitchedEvent\r\n    \r\n    const switchFilter = todoFilterModule.command.switchTo\r\n\r\n    const setFilter = domain.command({\r\n      name: 'TodoFilter.setFilter',\r\n      impl: (_, input: string) => {\r\n        const filter = getValidTodoFilter(input)\r\n        return switchFilter(filter)\r\n      },\r\n    })\r\n\r\n\r\n    syncStorage(domain, TODO_FILTER_STORAGE_KEY)\r\n      .listenTo(TodoFilterChangedEvent)\r\n      .saveData((event) => event.current)\r\n      .readData((value) => setFilter(value))\r\n\r\n    return {\r\n      query: {\r\n        TodoFilterQuery,\r\n      },\r\n      command: {\r\n        setFilter,\r\n        switchFilter\r\n      },\r\n      event: {\r\n        TodoFilterChangedEvent,\r\n      },\r\n    }\r\n  },\r\n})\r\n","import { Remesh } from 'remesh'\r\n\r\nimport { filter, map } from 'rxjs/operators'\r\n\r\nimport { TodoInputDomain } from './TodoInput'\r\nimport { TodoListDomain, getTodoId } from './TodoList'\r\nimport { TodoFilterDomain } from './TodoFilter'\r\n\r\nexport const TodoAppDomain = Remesh.domain({\r\n  name: 'TodoApp',\r\n  impl: (domain) => {\r\n    const todoHeader = domain.getDomain(TodoInputDomain())\r\n    const todoList = domain.getDomain(TodoListDomain())\r\n    const todoFooter = domain.getDomain(TodoFilterDomain())\r\n\r\n    const FilteredTodoKeyListQuery = domain.query({\r\n      name: 'FilteredTodoList',\r\n      impl: ({ get }) => {\r\n        const filter = get(todoFooter.query.TodoFilterQuery())\r\n\r\n        if (filter === 'all') {\r\n          return get(todoList.query.TodoListQuery()).map(getTodoId)\r\n        }\r\n\r\n        if (filter === 'active') {\r\n          return get(todoList.query.ActiveTodoListQuery()).map(getTodoId)\r\n        }\r\n\r\n        if (filter === 'completed') {\r\n          return get(todoList.query.CompletedTodoListQuery()).map(getTodoId)\r\n        }\r\n\r\n        throw new Error(`Unknown filter: ${filter}`)\r\n      },\r\n    })\r\n\r\n    domain.command$({\r\n      name: 'clearTodoInputWhenSubmit',\r\n      impl: ({ fromEvent, get }) => {\r\n        return fromEvent(todoList.event.TodoItemAddedEvent).pipe(\r\n          filter((event) => {\r\n            const todoInput = get(todoHeader.query.TodoInputQuery())\r\n            return todoInput === event.item.title\r\n          }),\r\n          map(() => todoHeader.command.clearTodoInput()),\r\n        )\r\n      },\r\n    })\r\n\r\n    return {\r\n      query: {\r\n        FilteredTodoKeyListQuery,\r\n      },\r\n      command: {},\r\n      event: {},\r\n    }\r\n  },\r\n})\r\n","import React, { useCallback, useState } from 'react'\r\n\r\nexport function useInputHandler(defaultValue: string) {\r\n  const [value, setValue] = useState(defaultValue)\r\n\r\n  const onChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(event.target.value)\r\n  }, [])\r\n\r\n  return [value, onChange, setValue] as const\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\r\n\r\nimport { Todo, TodoListDomain } from '../domains/TodoList'\r\n\r\nimport { useKeyPressHandler } from '../hooks/useKeyPressHandler'\r\nimport { useInputHandler } from '../hooks/useInputHandler'\r\n\r\nexport type TodoItemProps = {\r\n  id: Todo['id']\r\n}\r\n\r\nexport function TodoItem(props: TodoItemProps) {\r\n  const todoListDomain = useRemeshDomain(TodoListDomain())\r\n\r\n  const todo = useRemeshQuery(todoListDomain.query.TodoQuery(props.id))\r\n\r\n  const [editing, setEditing] = useState(false)\r\n\r\n  const [title, handleTitleChange] = useInputHandler(todo.title)\r\n\r\n  const save = () => {\r\n    todoListDomain.command.updateTodo({ ...todo, title })\r\n    setEditing(false)\r\n  }\r\n\r\n  const handlePress = useKeyPressHandler(['Enter', 'Escape'], () => {\r\n    save()\r\n  })\r\n\r\n  const handleEnableEdit = () => {\r\n    setEditing(true)\r\n  }\r\n\r\n  const handleSave = () => {\r\n    todoListDomain.command.toggleTodo(todo.id)\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    todoListDomain.command.deleteTodo(todo.id)\r\n  }\r\n\r\n  const handleBlur = () => {\r\n    save()\r\n  }\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (editing) {\r\n      inputRef.current?.focus()\r\n    }\r\n  }, [editing])\r\n\r\n  return (\r\n    <li className={`${editing && 'editing'} ${todo.completed && 'completed'}`}>\r\n      <div className=\"view\">\r\n        <input type=\"checkbox\" className=\"toggle\" checked={todo.completed} onChange={handleSave} />\r\n        <label onDoubleClick={handleEnableEdit}>{todo.title}</label>\r\n        <button className=\"destroy\" onClick={handleDelete} />\r\n      </div>\r\n      {editing && (\r\n        <input\r\n          ref={inputRef}\r\n          className=\"edit\"\r\n          value={title}\r\n          onChange={handleTitleChange}\r\n          onKeyDown={handlePress}\r\n          onBlur={handleBlur}\r\n        />\r\n      )}\r\n    </li>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\r\n\r\nimport { TodoAppDomain } from '../domains/TodoApp'\r\nimport { TodoListDomain } from '../domains/TodoList'\r\n\r\nimport { TodoItem } from './TodoItem'\r\n\r\nexport const TodoList = () => {\r\n  const todoAppDomain = useRemeshDomain(TodoAppDomain())\r\n  const filteredTodoKeyList = useRemeshQuery(todoAppDomain.query.FilteredTodoKeyListQuery())\r\n\r\n  console.log('render list')\r\n\r\n  return (\r\n    <section className=\"main\">\r\n      <ToggleAllInput />\r\n      <ul className=\"todo-list\">\r\n        {filteredTodoKeyList.map((todoId) => (\r\n          <TodoItem key={todoId} id={todoId} />\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst ToggleAllInput = () => {\r\n  const todoListDomain = useRemeshDomain(TodoListDomain())\r\n  const isAllCompleted = useRemeshQuery(todoListDomain.query.IsAllCompletedQuery())\r\n\r\n  const handleToggleAll = () => {\r\n    todoListDomain.command.toggleAllTodos()\r\n  }\r\n  return (\r\n    <>\r\n      <input\r\n        id=\"toggle-all\"\r\n        type=\"checkbox\"\r\n        className=\"toggle-all\"\r\n        checked={isAllCompleted}\r\n        onChange={handleToggleAll}\r\n      />\r\n      <label htmlFor=\"toggle-all\" />\r\n    </>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { NavLink, useParams } from 'react-router-dom'\r\n\r\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\r\n\r\nimport { TodoListDomain } from '../domains/TodoList'\r\nimport { TodoFilterDomain } from '../domains/TodoFilter'\r\n\r\nexport const TodoFooter = () => {\r\n  const todoListDomain = useRemeshDomain(TodoListDomain())\r\n  const todoFilterDomain = useRemeshDomain(TodoFilterDomain())\r\n\r\n  const todoFilter = useRemeshQuery(todoFilterDomain.query.TodoFilterQuery())\r\n  const activeTodoCount = useRemeshQuery(todoListDomain.query.ActiveTodoCountQuery())\r\n  const completedTodoCount = useRemeshQuery(todoListDomain.query.CompletedTodoCountQuery())\r\n\r\n  const hasCompleted = completedTodoCount > 0\r\n\r\n  const handleClearCompleted = () => {\r\n    todoListDomain.command.clearAllCompletedTodos()\r\n  }\r\n\r\n  const getClassName = (navData: { isActive: boolean }) => {\r\n    return navData.isActive ? 'selected' : ''\r\n  }\r\n\r\n  const params = useParams<{ filter: string }>()\r\n\r\n  useEffect(() => {\r\n    const filter = params.filter ?? 'all'\r\n    if (filter !== todoFilter) {\r\n      todoFilterDomain.command.setFilter(filter)\r\n    }\r\n  }, [params, todoFilter])\r\n\r\n  return (\r\n    <footer className=\"footer\">\r\n      <span className=\"todo-count\">\r\n        <strong>{activeTodoCount}</strong> item{activeTodoCount !== 1 && 's'} left\r\n      </span>\r\n      <ul className=\"filters\">\r\n        <li>\r\n          <NavLink to=\"/\" className={getClassName}>\r\n            All\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to=\"/active\" className={getClassName}>\r\n            Active\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink to=\"/completed\" className={getClassName}>\r\n            Completed\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n      {hasCompleted && (\r\n        <button className=\"clear-completed\" onClick={handleClearCompleted}>\r\n          Clear completed\r\n        </button>\r\n      )}\r\n    </footer>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport { TodoHeader } from './TodoHeader'\r\nimport { TodoList } from './TodoList'\r\nimport { TodoFooter } from './TodoFooter'\r\n\r\nexport const TodoApp = () => {\r\n  return (\r\n    <div className=\"todoapp\">\r\n      <TodoHeader />\r\n      <TodoList />\r\n      <TodoFooter />\r\n    </div>\r\n  )\r\n}\r\n","import React, { StrictMode } from 'react'\r\nimport * as ReactDOMClient from 'react-dom/client'\r\n\r\nimport { HashRouter, Routes, Route } from 'react-router-dom'\r\n\r\nimport { Remesh } from 'remesh'\r\nimport { RemeshRoot } from 'remesh-react'\r\nimport { RemeshReduxDevtools } from 'remesh-redux-devtools'\r\nimport { RemeshLogger } from 'remesh-logger'\r\n\r\nimport { StorageImpl } from './domain-externs-impl/storage'\r\nimport { TodoApp } from './components/TodoApp'\r\n\r\nconst container = document.getElementById('root')\r\n\r\nif (container) {\r\n  const root = ReactDOMClient.createRoot(container)\r\n  const store = Remesh.store({\r\n    externs: [StorageImpl],\r\n    inspectors: [RemeshReduxDevtools(), RemeshLogger()],\r\n  })\r\n\r\n  root.render(\r\n    <StrictMode>\r\n      <RemeshRoot store={store}>\r\n        <HashRouter basename=\"/\">\r\n          <Routes>\r\n            <Route path=\"/\" element={<TodoApp />} />\r\n            <Route path=\"/:filter\" element={<TodoApp />} />\r\n          </Routes>\r\n        </HashRouter>\r\n      </RemeshRoot>\r\n    </StrictMode>,\r\n  )\r\n}\r\n"],"names":["useState","useCallback","useRef","useEffect","ReactDOMClient.createRoot","StrictMode"],"mappings":"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"}