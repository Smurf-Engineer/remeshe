{"version":3,"file":"pagination.123fae97.js","sources":["../../packages/remesh/src/modules/async.ts","../../projects/remesh-example/src/others/github-users.ts","../../projects/remesh-example/src/others/pagination.tsx"],"sourcesContent":["import { of, concat } from 'rxjs'\nimport { map, switchMap } from 'rxjs/operators'\n\nimport { RemeshDomainContext, RemeshCommandContext, RemeshCommandOutput, RemeshQueryContext } from '../remesh'\n\nexport type PendingPromiseData<T> = {\n  type: 'pending'\n  promise?: Promise<T>\n  previous?: T\n}\n\nexport type ResolvedPromiseData<T> = {\n  type: 'resolved'\n  promise: Promise<T>\n  value: T\n}\n\nexport type RejectedPromiseData<T> = {\n  type: 'rejected'\n  promise: Promise<T>\n  error: Error\n}\n\nexport type PromiseData<T> = PendingPromiseData<T> | ResolvedPromiseData<T> | RejectedPromiseData<T>\n\nexport type AsyncModuleOptions<T, U> = {\n  name: string\n  query: (context: RemeshQueryContext, arg: T) => Promise<U>\n  command?: (context: RemeshCommandContext, arg: PromiseData<U>) => RemeshCommandOutput\n  initialArg?: T\n  default?: U\n}\n\nexport const AsyncModule = <T, U>(domain: RemeshDomainContext, options: AsyncModuleOptions<T, U>) => {\n  const AsyncState = domain.state<PromiseData<U>>({\n    name: `${options.name}.AsyncState`,\n    default:\n      'default' in options && options.default\n        ? {\n            type: 'resolved',\n            promise: Promise.resolve(options.default),\n            value: options.default,\n          }\n        : {\n            type: 'pending',\n          },\n  })\n\n  const PendingEvent = domain.event<U | undefined>({\n    name: `${options.name}.PendingEvent`,\n  })\n\n  const ResolvedEvent = domain.event<U>({\n    name: `${options.name}.ResolvedEvent`,\n  })\n\n  const RejectedEvent = domain.event<Error>({\n    name: `${options.name}.RejectedEvent`,\n  })\n\n  const load = domain.command$<T>({\n    name: `${options.name}.load`,\n    impl: ({ get, unwrap, peek, hasNoValue }, arg$) => {\n      const ctx = { get, unwrap, peek, hasNoValue }\n      return arg$.pipe(\n        switchMap((arg) => {\n          const promise = options.query(ctx, arg)\n          return concat(\n            of({ type: 'pending', promise } as PromiseData<U>),\n            promise.then(\n              (value): PromiseData<U> => {\n                return {\n                  type: 'resolved',\n                  promise,\n                  value,\n                }\n              },\n              (error): PromiseData<U> => {\n                return {\n                  type: 'rejected',\n                  promise,\n                  error: error instanceof Error ? error : new Error(`${error}`),\n                }\n              },\n            ),\n          )\n        }),\n        map((data) => {\n          if (data.type === 'pending') {\n            const currentData = get(AsyncState())\n            if (currentData.type === 'resolved') {\n              data = {\n                type: 'pending',\n                promise: data.promise,\n                previous: currentData.value,\n              }\n            } else if (currentData.type === 'pending') {\n              data = {\n                type: 'pending',\n                promise: data.promise,\n                previous: currentData.previous,\n              }\n            }\n            return [AsyncState().new(data), options.command?.(ctx, data), PendingEvent(data.previous)]\n          }\n\n          if (data.type === 'resolved') {\n            return [AsyncState().new(data), options.command?.(ctx, data), ResolvedEvent(data.value)]\n          }\n\n          if (data.type === 'rejected') {\n            return [AsyncState().new(data), options.command?.(ctx, data), RejectedEvent(data.error)]\n          }\n\n          throw new Error(`Unknown promise data: ${data}`)\n        }),\n      )\n    },\n  })\n\n  if (options.initialArg) {\n    const initialArg = options.initialArg\n    domain.command$({\n      name: `${options.name}.initialize`,\n      impl: () => {\n        return of(load(initialArg))\n      },\n    })\n  }\n\n  return {\n    query: {\n      AsyncQuery: AsyncState.Query,\n    },\n    command: {\n      load,\n    },\n    event: {\n      PendingEvent,\n      ResolvedEvent,\n      RejectedEvent,\n    },\n  }\n}\n","const delay = (ms: number) => new Promise<void>((resolve) => setTimeout(resolve, ms))\n\nconst fakeData = [\n  {\n    login: 'mojombo',\n    id: 1,\n    node_id: 'MDQ6VXNlcjE=',\n    avatar_url: 'https://avatars.githubusercontent.com/u/1?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/mojombo',\n    html_url: 'https://github.com/mojombo',\n    followers_url: 'https://api.github.com/users/mojombo/followers',\n    following_url: 'https://api.github.com/users/mojombo/following{/other_user}',\n    gists_url: 'https://api.github.com/users/mojombo/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/mojombo/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/mojombo/subscriptions',\n    organizations_url: 'https://api.github.com/users/mojombo/orgs',\n    repos_url: 'https://api.github.com/users/mojombo/repos',\n    events_url: 'https://api.github.com/users/mojombo/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/mojombo/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'defunkt',\n    id: 2,\n    node_id: 'MDQ6VXNlcjI=',\n    avatar_url: 'https://avatars.githubusercontent.com/u/2?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/defunkt',\n    html_url: 'https://github.com/defunkt',\n    followers_url: 'https://api.github.com/users/defunkt/followers',\n    following_url: 'https://api.github.com/users/defunkt/following{/other_user}',\n    gists_url: 'https://api.github.com/users/defunkt/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/defunkt/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/defunkt/subscriptions',\n    organizations_url: 'https://api.github.com/users/defunkt/orgs',\n    repos_url: 'https://api.github.com/users/defunkt/repos',\n    events_url: 'https://api.github.com/users/defunkt/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/defunkt/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'pjhyett',\n    id: 3,\n    node_id: 'MDQ6VXNlcjM=',\n    avatar_url: 'https://avatars.githubusercontent.com/u/3?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/pjhyett',\n    html_url: 'https://github.com/pjhyett',\n    followers_url: 'https://api.github.com/users/pjhyett/followers',\n    following_url: 'https://api.github.com/users/pjhyett/following{/other_user}',\n    gists_url: 'https://api.github.com/users/pjhyett/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/pjhyett/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/pjhyett/subscriptions',\n    organizations_url: 'https://api.github.com/users/pjhyett/orgs',\n    repos_url: 'https://api.github.com/users/pjhyett/repos',\n    events_url: 'https://api.github.com/users/pjhyett/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/pjhyett/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'wycats',\n    id: 4,\n    node_id: 'MDQ6VXNlcjQ=',\n    avatar_url: 'https://avatars.githubusercontent.com/u/4?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/wycats',\n    html_url: 'https://github.com/wycats',\n    followers_url: 'https://api.github.com/users/wycats/followers',\n    following_url: 'https://api.github.com/users/wycats/following{/other_user}',\n    gists_url: 'https://api.github.com/users/wycats/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/wycats/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/wycats/subscriptions',\n    organizations_url: 'https://api.github.com/users/wycats/orgs',\n    repos_url: 'https://api.github.com/users/wycats/repos',\n    events_url: 'https://api.github.com/users/wycats/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/wycats/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'ezmobius',\n    id: 5,\n    node_id: 'MDQ6VXNlcjU=',\n    avatar_url: 'https://avatars.githubusercontent.com/u/5?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/ezmobius',\n    html_url: 'https://github.com/ezmobius',\n    followers_url: 'https://api.github.com/users/ezmobius/followers',\n    following_url: 'https://api.github.com/users/ezmobius/following{/other_user}',\n    gists_url: 'https://api.github.com/users/ezmobius/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/ezmobius/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/ezmobius/subscriptions',\n    organizations_url: 'https://api.github.com/users/ezmobius/orgs',\n    repos_url: 'https://api.github.com/users/ezmobius/repos',\n    events_url: 'https://api.github.com/users/ezmobius/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/ezmobius/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'ivey',\n    id: 6,\n    node_id: 'MDQ6VXNlcjY=',\n    avatar_url: 'https://avatars.githubusercontent.com/u/6?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/ivey',\n    html_url: 'https://github.com/ivey',\n    followers_url: 'https://api.github.com/users/ivey/followers',\n    following_url: 'https://api.github.com/users/ivey/following{/other_user}',\n    gists_url: 'https://api.github.com/users/ivey/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/ivey/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/ivey/subscriptions',\n    organizations_url: 'https://api.github.com/users/ivey/orgs',\n    repos_url: 'https://api.github.com/users/ivey/repos',\n    events_url: 'https://api.github.com/users/ivey/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/ivey/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'evanphx',\n    id: 7,\n    node_id: 'MDQ6VXNlcjc=',\n    avatar_url: 'https://avatars.githubusercontent.com/u/7?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/evanphx',\n    html_url: 'https://github.com/evanphx',\n    followers_url: 'https://api.github.com/users/evanphx/followers',\n    following_url: 'https://api.github.com/users/evanphx/following{/other_user}',\n    gists_url: 'https://api.github.com/users/evanphx/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/evanphx/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/evanphx/subscriptions',\n    organizations_url: 'https://api.github.com/users/evanphx/orgs',\n    repos_url: 'https://api.github.com/users/evanphx/repos',\n    events_url: 'https://api.github.com/users/evanphx/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/evanphx/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'vanpelt',\n    id: 17,\n    node_id: 'MDQ6VXNlcjE3',\n    avatar_url: 'https://avatars.githubusercontent.com/u/17?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/vanpelt',\n    html_url: 'https://github.com/vanpelt',\n    followers_url: 'https://api.github.com/users/vanpelt/followers',\n    following_url: 'https://api.github.com/users/vanpelt/following{/other_user}',\n    gists_url: 'https://api.github.com/users/vanpelt/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/vanpelt/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/vanpelt/subscriptions',\n    organizations_url: 'https://api.github.com/users/vanpelt/orgs',\n    repos_url: 'https://api.github.com/users/vanpelt/repos',\n    events_url: 'https://api.github.com/users/vanpelt/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/vanpelt/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'wayneeseguin',\n    id: 18,\n    node_id: 'MDQ6VXNlcjE4',\n    avatar_url: 'https://avatars.githubusercontent.com/u/18?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/wayneeseguin',\n    html_url: 'https://github.com/wayneeseguin',\n    followers_url: 'https://api.github.com/users/wayneeseguin/followers',\n    following_url: 'https://api.github.com/users/wayneeseguin/following{/other_user}',\n    gists_url: 'https://api.github.com/users/wayneeseguin/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/wayneeseguin/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/wayneeseguin/subscriptions',\n    organizations_url: 'https://api.github.com/users/wayneeseguin/orgs',\n    repos_url: 'https://api.github.com/users/wayneeseguin/repos',\n    events_url: 'https://api.github.com/users/wayneeseguin/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/wayneeseguin/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n  {\n    login: 'brynary',\n    id: 19,\n    node_id: 'MDQ6VXNlcjE5',\n    avatar_url: 'https://avatars.githubusercontent.com/u/19?v=4',\n    gravatar_id: '',\n    url: 'https://api.github.com/users/brynary',\n    html_url: 'https://github.com/brynary',\n    followers_url: 'https://api.github.com/users/brynary/followers',\n    following_url: 'https://api.github.com/users/brynary/following{/other_user}',\n    gists_url: 'https://api.github.com/users/brynary/gists{/gist_id}',\n    starred_url: 'https://api.github.com/users/brynary/starred{/owner}{/repo}',\n    subscriptions_url: 'https://api.github.com/users/brynary/subscriptions',\n    organizations_url: 'https://api.github.com/users/brynary/orgs',\n    repos_url: 'https://api.github.com/users/brynary/repos',\n    events_url: 'https://api.github.com/users/brynary/events{/privacy}',\n    received_events_url: 'https://api.github.com/users/brynary/received_events',\n    type: 'User',\n    site_admin: false,\n  },\n]\n\nexport type User = typeof fakeData[number]\n\nexport type UserList = User[]\n\nlet fakeUid = 1000000\n\nexport type Pagination = {\n  offset: number\n  pageSize: number\n}\n\nexport const getFakeUserList = async (_pagination: Pagination): Promise<UserList> => {\n  await delay(500)\n  return fakeData.map((data) => {\n    return {\n      ...data,\n      id: fakeUid++,\n    }\n  })\n}\n\nlet hasError = false\nexport const getUserList = async (pagination: Pagination): Promise<UserList> => {\n  if (hasError) {\n    return getFakeUserList(pagination)\n  }\n\n  try {\n    const response = await fetch(\n      `https://api.github.com/users?since=${pagination.offset}&per_page=${pagination.pageSize}`,\n    )\n    if (!response.ok) {\n      throw new Error(response.statusText)\n    }\n    const json = await response.json()\n    return json\n  } catch (e) {\n    hasError = true\n    return getFakeUserList(pagination)\n  }\n}\n","import React from 'react'\nimport { Remesh } from 'remesh'\n\nimport { AsyncModule } from 'remesh/modules/async'\nimport { useRemeshDomain, useRemeshQuery } from 'remesh-react'\nimport { Pagination, UserList, getUserList } from './github-users'\n\nconst PaginationDomain = Remesh.domain({\n  name: 'pagination',\n  impl: (domain) => {\n    const defaultPagination: Pagination = {\n      offset: 0,\n      pageSize: 10,\n    }\n\n    const PaginationState = domain.state({\n      name: 'Pagination',\n      default: defaultPagination,\n    })\n\n    const UserListState = domain.state<UserList>({\n      name: 'UserListState',\n      default: [],\n    })\n\n    const IsEmptyUserListQuery = domain.query({\n      name: 'IsEmptyUserListQuery',\n      impl: ({ get }) => {\n        const userList = get(UserListState())\n        return userList.length === 0\n      },\n    })\n\n    const NextPaginationQuery = domain.query({\n      name: 'NextPaginationQuery',\n      impl: ({ get }) => {\n        const pagination = get(PaginationState())\n        const userList = get(UserListState())\n\n        if (userList.length === 0) {\n          return pagination\n        }\n\n        const lastUser = userList[userList.length - 1]\n\n        const nextPagination = {\n          ...pagination,\n          offset: lastUser.id + 1,\n        }\n\n        return nextPagination\n      },\n    })\n\n    const userFetcher = AsyncModule<Pagination, UserList>(domain, {\n      name: 'userFetcher',\n      query: async ({}, pagination) => {\n        const newUserList = await getUserList(pagination)\n        return newUserList\n      },\n      command: ({ get }, result) => {\n        if (result.type !== 'resolved') {\n          return null\n        }\n        const currentUserList = get(UserListState())\n        return UserListState().new(currentUserList.concat(result.value))\n      },\n      initialArg: defaultPagination,\n    })\n\n    const IsFetchingUserListQuery = domain.query({\n      name: 'IsFetchingUserListQuery',\n      impl: ({ get }) => {\n        const asyncState = get(userFetcher.query.AsyncQuery())\n        return asyncState.type === 'pending'\n      },\n    })\n\n    const loadMore = domain.command({\n      name: 'loadMore',\n      impl: ({ get }) => {\n        const nextPagination = get(NextPaginationQuery())\n        return [PaginationState().new(nextPagination), userFetcher.command.load(nextPagination)]\n      },\n    })\n\n    const reset = domain.command({\n      name: 'reset',\n      impl: ({}) => {\n        return [PaginationState().new(defaultPagination), UserListState().new([]), loadMore()]\n      },\n    })\n\n    return {\n      query: {\n        UserListQuery: UserListState.Query,\n        IsEmptyUserListQuery,\n        IsFetchingUserListQuery,\n      },\n      command: {\n        loadMore,\n        reset,\n      },\n      event: {\n        UserFetchingEvent: userFetcher.event.PendingEvent,\n        UserFetchedSuccessEvent: userFetcher.event.ResolvedEvent,\n        UserFetchFailedEvent: userFetcher.event.RejectedEvent,\n      },\n    }\n  },\n})\n\nexport default () => {\n  const paginationDomain = useRemeshDomain(PaginationDomain())\n  const isEmptyUserList = useRemeshQuery(paginationDomain.query.IsEmptyUserListQuery())\n\n  return (\n    <div>\n      <h2>Pagination</h2>\n      {isEmptyUserList ? 'loading...' : <UserList />}\n    </div>\n  )\n}\n\nconst UserList = () => {\n  const paginationDomain = useRemeshDomain(PaginationDomain())\n\n  const userList = useRemeshQuery(paginationDomain.query.UserListQuery())\n  const isFetchingUserList = useRemeshQuery(paginationDomain.query.IsFetchingUserListQuery())\n\n  return (\n    <>\n      <div>\n        <button onClick={() => paginationDomain.command.reset()}>reset</button>\n      </div>\n      <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-around' }}>\n        {userList.map((user) => {\n          return (\n            <div style={{ width: 100, margin: 10 }} key={user.id}>\n              <img style={{ width: 100, height: 100 }} src={user.avatar_url} loading=\"lazy\" />\n              <p>\n                <a href={user.html_url}>{user.login}</a>\n              </p>\n            </div>\n          )\n        })}\n      </div>\n      <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'space-around' }}>\n        {!isFetchingUserList && <button onClick={() => paginationDomain.command.loadMore()}>load more</button>}\n        {isFetchingUserList && 'loading...'}\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}