var et=Object.defineProperty,tt=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var De=(n,o,r)=>o in n?et(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,w=(n,o)=>{for(var r in o||(o={}))$e.call(o,r)&&De(n,r,o[r]);if(q)for(var r of q(o))Ce.call(o,r)&&De(n,r,o[r]);return n},E=(n,o)=>tt(n,nt(o));var Qe=(n,o)=>{var r={};for(var c in n)$e.call(n,c)&&o.indexOf(c)<0&&(r[c]=n[c]);if(n!=null&&q)for(var c of q(n))o.indexOf(c)<0&&Ce.call(n,c)&&(r[c]=n[c]);return r};import{s as rt,f as ot,g as st,h as at,i as ct,S as mt,j as z,O as Ne,r as $,R as it,k as ut}from"./vendor.c9d1239b.js";let dt=0;function pt(n){var c;const o=dt++,r=u=>({type:"RemeshEventPayload",arg:u,Event:r});return r.type="RemeshEvent",r.eventId=o,r.eventName=n.name,r.owner=W(),r.inspectable="inspectable"in n&&(c=n.inspectable)!=null?c:!0,"impl"in n&&(r.impl=n.impl),r}const lt=n=>F({name:n.name,impl:()=>n.default,inspectable:n.inspectable,compare:n.compare}),ft=n=>F({name:n.name,defer:!0,impl:o=>{throw new Error(`RemeshDeferState: ${n.name} is not resolved`)},inspectable:n.inspectable,compare:n.compare});let gt=0;const xe=(n,o)=>ct(n,o),F=n=>{var u,f,S;const o=gt++;let r=null;const c=y=>{if(y===void 0&&r)return r;const v={type:"RemeshStateItem",arg:y,State:c,new:p=>({type:"RemeshStateSetterPayload",stateItem:v,newState:p})};return y===void 0&&(r=v),v};return c.type="RemeshState",c.stateId=o,c.stateName=n.name,c.impl=n.impl,c.compare=(u=n.compare)!=null?u:xe,c.owner=W(),c.inspectable=(f=n.inspectable)!=null?f:!0,c.defer=(S=n.defer)!=null?S:!1,c.Query=B({name:`${n.name}.Query`,inspectable:!1,impl:({get:y},v)=>y(c(v))}),c};let St=0;const B=n=>{var u,f;const o=St++;let r=null;const c=S=>{if(S===void 0&&r)return r;const y={type:"RemeshQueryPayload",Query:c,arg:S};return S===void 0&&(r=y),y};return c.type="RemeshQuery",c.queryId=o,c.queryName=n.name,c.impl=n.impl,c.compare=(u=n.compare)!=null?u:xe,c.owner=W(),c.inspectable=(f=n.inspectable)!=null?f:!0,c};let yt=0;const Me=n=>{var c;const o=yt++,r=u=>({type:"RemeshCommandPayload",arg:u,Command:r});return r.type="RemeshCommand",r.commandId=o,r.commandName=n.name,r.impl=n.impl,r.owner=W(),r.inspectable=(c=n.inspectable)!=null?c:!0,r};let vt=0;const Y=n=>{var c;const o=vt++,r=u=>({type:"RemeshCommand$Payload",arg:u,Command$:r});return r.type="RemeshCommand$",r.command$Id=o,r.command$Name=n.name,r.impl=n.impl,r.owner=W(),r.inspectable=(c=n.inspectable)!=null?c:!0,r},ke=n=>Y({name:n.name,inspectable:n.inspectable,impl:(r,c)=>{if(!n.mode||n.mode==="switch")return c.pipe(rt(u=>n.impl(r,u)));if(n.mode==="merge")return c.pipe(ot(u=>n.impl(r,u)));if(n.mode==="concat")return c.pipe(st(u=>n.impl(r,u)));if(n.mode==="exhaust")return c.pipe(at(u=>n.impl(r,u)));throw new Error(`RemeshCommandAsync: invalid mode: ${n.mode}`)}});let bt=0;const ht=n=>{const o=r=>({type:"RemeshExternPayload",Extern:o,value:r});return o.externId=bt++,o.externName=n.name,o.default=n.default,o};let wt=0;const G=n=>{var c;let o=null;const r=u=>{if(u===void 0&&o)return o;const f={type:"RemeshDomainPayload",Domain:r,arg:u};return u===void 0&&(o=f),f};return r.type="RemeshDomain",r.domainId=wt++,r.domainName=n.name,r.impl=n.impl,r.inspectable=(c=n.inspectable)!=null?c:!0,r},W=G({name:"DefaultDomain",impl:()=>({})}),Q={DomainCreated:"Domain::Created",DomainDestroyed:"Domain::Destroyed",DomainRestored:"Domain::Restored",StateCreated:"State::Created",StateUpdated:"State::Updated",StateDestroyed:"State::Destroyed",StateRestored:"State::Restored",QueryCreated:"Query::Created",QueryUpdated:"Query::Updated",QueryDestroyed:"Query::Destroyed",QueryRestored:"Query::Restored",EventEmitted:"Event::Emitted",CommandReceived:"Command::Received",Command$Received:"Command$::Received"},k=G({name:"RemeshInspector",impl:n=>{const o=n.event({name:"RemeshDomainStorageEvent"}),r=n.event({name:"RemeshStateStorageEvent"}),c=n.event({name:"RemeshQueryStorageEvent"}),u=n.event({name:"RemeshEventEmitted"}),f=n.event({name:"RemeshCommandReceived"}),S=n.event({name:"RemeshCommand$Received"});return{event:{RemeshDomainStorageEvent:o,RemeshStateStorageEvent:r,RemeshQueryStorageEvent:c,RemeshEventEmittedEvent:u,RemeshCommandReceivedEvent:f,RemeshCommand$ReceivedEvent:S}}}}),U=n=>n.owner?n.owner.Domain.inspectable&&n.inspectable:n.inspectable,Rt=n=>{var o;return((o=n.inspectors)!=null?o:[]).filter(r=>!!r).map(r=>{const f=n,{inspectors:c}=f,u=Qe(f,["inspectors"]);return r(u)})},Et=n=>{let o=null;const r=()=>(o||(o=Rt(n)),o);return{destroyInspectors:()=>{if(o){for(const a of o)a.destroy();o=null}},inspectDomainStorage:(a,s)=>{if(U(s.Domain))for(const l of r()){const N=l.getDomain(k()).event.RemeshDomainStorageEvent({type:a,storage:s});l.emitEvent(N)}},inspectStateStorage:(a,s)=>{if(U(s.State))for(const l of r()){const N=l.getDomain(k()).event.RemeshStateStorageEvent({type:a,storage:s});l.emitEvent(N)}},inspectQueryStorage:(a,s)=>{if(U(s.Query))for(const l of r()){const N=l.getDomain(k()).event.RemeshQueryStorageEvent({type:a,storage:s});l.emitEvent(N)}},inspectEventEmitted:(a,s)=>{if(U(s.Event))for(const l of r()){const N=l.getDomain(k()).event.RemeshEventEmittedEvent({type:a,payload:s});l.emitEvent(N)}},inspectCommandReceived:(a,s)=>{if(U(s.Command))for(const l of r()){const N=l.getDomain(k()).event.RemeshCommandReceivedEvent({type:a,payload:s});l.emitEvent(N)}},inspectCommand$Received:(a,s)=>{if(U(s.Command$))for(const l of r()){const N=l.getDomain(k()).event.RemeshCommand$ReceivedEvent({type:a,payload:s});l.emitEvent(N)}}}},X=Symbol("StateValuePlaceholder");let V=0;const Dt=n=>{const o=Et(n),r=new Set,c=new Map,u=new Set,f=new WeakMap,S=e=>{var t;for(const m of(t=n.externs)!=null?t:[])if(m.Extern===e)return m.value;return e.default},y=e=>{const t=f.get(e);if(t)return t;const m=S(e),i={id:V++,type:"RemeshExternStorage",Extern:e,currentValue:m};return f.set(e,i),i},v=e=>y(e).currentValue,p=new WeakMap,a=e=>{var g;const t=p.get(e);if(t)return t;const m=e.State.stateName,i=(g=JSON.stringify(e.arg))!=null?g:"",d=`State/${e.State.stateId}/${m}:${i}`;return p.set(e,d),d},s=e=>{var g;const t=p.get(e);if(t)return t;const m=e.Query.queryName,i=(g=JSON.stringify(e.arg))!=null?g:"",d=`Query/${e.Query.queryId}/${m}:${i}`;return p.set(e,d),d},l=e=>{var g;const t=p.get(e);if(t)return t;const m=e.Domain.domainName,i=(g=JSON.stringify(e.arg))!=null?g:"",d=`Domain/${e.Domain.domainId}/${m}:${i}`;return p.set(e,d),d},A=e=>e.type==="RemeshStateItem"?a(e):e.type==="RemeshQueryPayload"?s(e):l(e),N=e=>{if(e.currentState===X)throw new Error(`State ${e.key} is not found`);return e.currentState},O=new WeakMap,Ve=e=>{const t=R(e.State.owner),m=a(e),i=e.State.defer?X:e.State.impl(e.arg),d={id:V++,type:"RemeshStateStorage",State:e.State,arg:e.arg,key:m,currentState:i,downstreamSet:new Set};return t.stateMap.set(m,d),O.set(e,d),o.inspectStateStorage(Q.StateCreated,d),d},P=e=>{const t=R(e.State.owner);t.stateMap.has(e.key)||(t.stateMap.set(e.key,e),o.inspectStateStorage(Q.StateRestored,e))},K=e=>{const t=R(e.State.owner),m=a(e),i=t.stateMap.get(m);if(i)return i;const d=O.get(e);return d?(P(d),d):Ve(e)},ee=new WeakMap,We=e=>{const t=R(e.owner),m=new z,i=new Ne(x=>{const D=m.subscribe(x);return g.refCount+=1,()=>{D.unsubscribe(),g.refCount-=1,u.add(g),_()}}),d=ee.get(e),g=Object.assign(d!=null?d:{},{type:"RemeshEventStorage",Event:e,subject:m,observable:i,refCount:0});return t.eventMap.set(e,g),ee.set(e,g),g},L=e=>{const m=R(e.owner).eventMap.get(e);return m||We(e)},te=new WeakMap,ne=e=>{const t=new z,m=new Ne(i=>{const d=t.subscribe(i),g=e();return g.refCount+=1,()=>{d.unsubscribe(),g.refCount-=1,u.add(g),_()}});return{subject:t,observable:m}},Ke=e=>{const t=R(e.Query.owner),m=s(e),{subject:i,observable:d}=ne(()=>C),g=new Set,x=new Set,{Query:D}=e,h={get:M=>{if(M.type==="RemeshStateItem"){const H=K(M);return g.add(H),I.get(M)}if(M.type==="RemeshQueryPayload"){const H=j(M);return g.add(H),I.get(M)}return I.get(M)}},b=D.impl(h,e.arg),C={id:V++,type:"RemeshQueryStorage",Query:e.Query,arg:e.arg,currentValue:b,key:m,upstreamSet:g,downstreamSet:x,subject:i,observable:d,refCount:0};for(const M of g)M.downstreamSet.add(C);return t.queryMap.set(m,C),te.set(e,C),o.inspectQueryStorage(Q.QueryCreated,C),C},re=e=>{const t=R(e.Query.owner);if(t.queryMap.has(e.key))return;const{subject:m,observable:i}=ne(()=>e);e.subject=m,e.observable=i,t.queryMap.set(e.key,e);for(const d of e.upstreamSet)if(d.downstreamSet.add(e),d.type==="RemeshQueryStorage")re(d);else if(d.type==="RemeshStateStorage")P(d);else throw new Error(`Unknown upstream: ${d}`);o.inspectQueryStorage(Q.QueryRestored,e),T(e)},j=e=>{const t=R(e.Query.owner),m=s(e),i=t.queryMap.get(m);if(i)return i;const d=te.get(e);return d?(re(d),d):Ke(e)},oe=new WeakMap,_e=e=>{const t=R(e.owner),m=new z,i=m.asObservable(),d={id:V++,type:"RemeshCommand$Storage",Command$:e,subject:m,observable:i};return t.command$Map.set(e,d),oe.set(e,d),d},se=e=>{const t=R(e.owner),m=t.command$Map.get(e);if(m)return m;const i=oe.get(e);if(i){const d=new z,g=d.asObservable();return i.subject=d,i.observable=g,i.subscription=void 0,t.command$Map.set(e,i),i}return _e(e)},ae=new WeakMap,qe=e=>{const t=l(e);let m=!1;const i=new Set,d=new Set,g={state:h=>{if(m)throw new Error("Unexpected calling domain.state(..) asynchronously");if("default"in h){const C=lt(h);return C.owner=e,C.Query.owner=e,C}if(!("impl"in h)){const C=ft(h);return C.owner=e,C.Query.owner=e,C}const b=F(h);return b.owner=e,b.Query.owner=e,b},query:h=>{if(m)throw new Error("Unexpected calling domain.query(..) asynchronously");const b=B(h);return b.owner=e,b},event:h=>{if(m)throw new Error("Unexpected calling domain.event(..) asynchronously");const b=pt(h);return b.owner=e,b},command:h=>{if(m)throw new Error("Unexpected calling domain.command(..) asynchronously");const b=Me(h);return b.owner=e,b},command$:h=>{if(m)throw new Error("Unexpected calling domain.command$(..) asynchronously");const b=Y(h);return b.owner=e,d.add(b),b},commandAsync:h=>{if(m)throw new Error("Unexpected calling domain.command$(..) asynchronously");const b=ke(h);return b.owner=e,d.add(b),b},getDomain:h=>{const b=R(h);return i.add(b),b.domain},getExtern:h=>v(h)},x=e.Domain.impl(g,e.arg);m=!0;const D={id:V++,type:"RemeshDomainStorage",Domain:e.Domain,arg:e.arg,domain:x,domainPayload:e,key:t,command$Set:d,upstreamSet:i,downstreamSet:new Set,upstreamSubscriptionSet:new Set,domainSubscriptionSet:new Set,stateMap:new Map,queryMap:new Map,eventMap:new Map,command$Map:new Map,refCount:0,running:!1};c.set(t,D),ae.set(e,D),o.inspectDomainStorage(Q.DomainCreated,D);for(const h of i)h.downstreamSet.add(D);return D},R=e=>{const t=l(e),m=c.get(t);if(m)return m;const i=ae.get(e);if(i){i.running=!1,c.set(i.key,i);for(const d of i.upstreamSet)d.downstreamSet.add(i);return o.inspectDomainStorage(Q.DomainRestored,i),i}return qe(e)},ce=e=>{const t=R(e.Query.owner);if(!!t.queryMap.has(e.key)){t.queryMap.delete(e.key),o.inspectQueryStorage(Q.QueryDestroyed,e);for(const m of e.upstreamSet)if(m.downstreamSet.delete(e),m.type==="RemeshQueryStorage")me(m);else if(m.type==="RemeshStateStorage")ue(m);else throw new Error(`Unknown upstream in clearQueryStorageIfNeeded(..): ${m}`);e.subject.complete()}},me=e=>{e.refCount===0&&e.downstreamSet.size===0&&ce(e)},ie=e=>{const t=R(e.State.owner);!t.stateMap.has(e.key)||(o.inspectStateStorage(Q.StateDestroyed,e),t.stateMap.delete(e.key),e.downstreamSet.clear())},ue=e=>{e.downstreamSet.size===0&&ie(e)},de=e=>{const t=R(e.Event.owner);e.subject.complete(),t.eventMap.delete(e.Event)},ze=e=>{e.refCount===0&&de(e)},Fe=e=>{var m;const t=R(e.Command$.owner);e.subject.complete(),(m=e.subscription)==null||m.unsubscribe(),e.subscription=void 0,t.command$Map.delete(e.Command$)},pe=e=>{o.inspectDomainStorage(Q.DomainDestroyed,e),Ie(e.domainSubscriptionSet),Ie(e.upstreamSubscriptionSet);for(const t of e.eventMap.values())de(t);for(const t of e.queryMap.values())ce(t);for(const t of e.stateMap.values())ie(t);for(const t of e.command$Map.values())Fe(t);e.upstreamSubscriptionSet.clear(),e.domainSubscriptionSet.clear(),e.downstreamSet.clear(),e.stateMap.clear(),e.queryMap.clear(),e.eventMap.clear(),e.running=!1,c.delete(e.key);for(const t of e.upstreamSet)t.downstreamSet.delete(e),le(t)},le=e=>{e.refCount===0&&e.downstreamSet.size===0&&e.domainSubscriptionSet.size===0&&pe(e)},Le=e=>{const t=K(e);return N(t)},fe=e=>j(e).currentValue,I={get:e=>{if(e.type==="RemeshStateItem")return Le(e);if(e.type==="RemeshQueryPayload")return fe(e);throw new Error(`Unexpected input in ctx.get(..): ${e}`)},fromEvent:e=>L(e).observable,fromQuery:e=>j(e).observable},T=e=>{const{Query:t}=e;for(const g of e.upstreamSet)g.downstreamSet.delete(e),g.downstreamSet.size===0&&u.add(g);e.upstreamSet.clear();const m={get:g=>{if(g.type==="RemeshStateItem"){const x=g,D=K(x);return e.upstreamSet.add(D),D.downstreamSet.add(e),I.get(x)}if(g.type==="RemeshQueryPayload"){const x=g,D=j(x);return e.upstreamSet.add(D),D.downstreamSet.add(e),I.get(x)}return I.get(g)}},i=t.impl(m,e.arg);if(!t.compare(e.currentValue,i)){e.currentValue=i,r.add(e),o.inspectQueryStorage(Q.QueryUpdated,e);for(const g of[...e.downstreamSet])T(g)}},_=()=>{if(u.size===0)return;const e=[...u];u.clear();for(const t of e)t.type==="RemeshDomainStorage"?le(t):t.type==="RemeshEventStorage"?ze(t):t.type==="RemeshQueryStorage"?me(t):t.type==="RemeshStateStorage"&&ue(t);_()},ge=()=>{if(r.size===0)return;const e=[...r];r.clear();for(const t of e)r.has(t)||t.subject.next(t.currentValue);ge()},Se=()=>{ge()},Te=e=>{const t=K(e.stateItem);if(!(t.currentState!==X&&e.stateItem.State.compare(t.currentState,e.newState))){t.currentState=e.newState,o.inspectStateStorage(Q.StateUpdated,t);for(const m of[...t.downstreamSet])T(m)}},ye=e=>{const{Event:t,arg:m}=e,i=L(t);if(o.inspectEventEmitted(Q.EventEmitted,e),t.impl){const d={get:I.get},g=t.impl(d,m);i.subject.next(g)}else i.subject.next(m)},ve=e=>{o.inspectCommandReceived(Q.CommandReceived,e);const{Command:t,arg:m}=e,i={get:I.get},d=t.impl(i,m);J(d)},be=(e,t)=>{e.add(t),t.add(()=>{e.delete(t)})},he=e=>{const t=se(e);if(t.subscription)return;const m={get:I.get,fromEvent:I.fromEvent,fromQuery:I.fromQuery},d=e.impl(m,t.observable).subscribe(g=>{J(g),Se()});t.subscription=d},J=e=>{if(e!==null){if(Array.isArray(e)){for(const t of e)J(t);return}if(e.type==="RemeshCommandPayload"){ve(e);return}else if(e.type==="RemeshEventPayload"){ye(e);return}else if(e.type==="RemeshStateSetterPayload"){Te(e);return}else if(e.type==="RemeshCommand$Payload"){we(e);return}throw new Error(`Unknown command output of ${e}`)}},we=e=>{o.inspectCommand$Received(Q.Command$Received,e);const{Command$:t,arg:m}=e,i=se(t);he(t),i.subject.next(m)},Je=(e,t)=>{be(e.domainSubscriptionSet,t),t.add(()=>{u.add(e),_()})},He=(e,t)=>{const m=j(e);return m.observable.subscribe(t)},Xe=(e,t)=>L(e).observable.subscribe(t),Be=e=>{const t={};for(const m in e.command){const i=e.command[m];t[m]=d=>Ee(i(d))}return t},Ye=e=>{const t=R(e);if(t.domainOutput)return t.domainOutput;const m=t.domain,i=Be(m),d=E(w({},m),{command:i});return t.domainOutput=d,d},Ge=e=>{for(const t of e)he(t)},Ze=e=>{if(!e.running){e.running=!0;for(const t of e.upstreamSet){const m=Re(t.domainPayload);be(e.upstreamSubscriptionSet,m)}Ge(e.command$Set)}},Re=e=>{const t=R(e),m=new mt;return Je(t,m),Ze(t),m},Oe=()=>{o.destroyInspectors();for(const e of c.values())pe(e);c.clear(),r.clear()},Pe=e=>{ye(e)},Ee=e=>{e.type==="RemeshCommandPayload"?(ve(e),Se()):e.type==="RemeshCommand$Payload"&&we(e)};return{name:n.name,getDomain:Ye,query:fe,emitEvent:Pe,sendCommand:Ee,destroy:Oe,subscribeQuery:He,subscribeEvent:Xe,subscribeDomain:Re,getKey:A}},Ie=n=>{for(const o of n)o.unsubscribe()},Ae={domain:G,extern:ht,store:Dt,state:F,query:B,command:Me,command$:Y,commandAsync:ke},Ue=$.exports.createContext(null),$t=()=>{const n=$.exports.useContext(Ue);if(n===null)throw new Error("You may forgot to add <RemeshRoot />");return n},Z=()=>$t().remeshStore,Mt=n=>{const o=$.exports.useMemo(()=>({remeshStore:n.store}),[n.store]);return it.createElement(Ue.Provider,{value:o},n.children)},kt=function(n){const o=Z(),r=$.exports.useRef(null),c=$.exports.useCallback(v=>(r.current=v,()=>{r.current=null}),[]),u=$.exports.useCallback(()=>o.query(n),[o,n]),f=ut.exports.useSyncExternalStore(c,u),S=$.exports.useRef(null),y=o.getKey(n);return $.exports.useEffect(()=>()=>{var v;(v=S.current)==null||v.unsubscribe(),S.current=null},[o,y]),$.exports.useEffect(()=>{S.current===null&&(S.current=o.subscribeQuery(n,()=>{var v;(v=r.current)==null||v.call(r)}))},[o,n]),f},At=function(n,o){const r=Z(),c=$.exports.useRef(o);$.exports.useEffect(()=>{c.current=o}),$.exports.useEffect(()=>{const u=r.subscribeEvent(n,f=>{c.current(f)});return()=>{u.unsubscribe()}},[n,r])},Ut=function(n){const o=Z(),r=$.exports.useRef(null),c=o.getDomain(n),u=o.getKey(n);return $.exports.useEffect(()=>()=>{var f;(f=r.current)==null||f.unsubscribe(),r.current=null},[o,u]),$.exports.useEffect(()=>{r.current===null&&(r.current=o.subscribeDomain(n))},[o,n]),c},Ct=n=>{const o=n.getHours().toString().padStart(2,"0"),r=n.getMinutes().toString().padStart(2,"0"),c=n.getSeconds().toString().padStart(2,"0"),u=n.getMilliseconds().toString().padStart(3,"0");return`${o}:${r}:${c}.${u}`},Qt=()=>{const n=new Date;return Ct(n)},je=n=>{const o=w({include:["state","domain","event","command","command$"]},n);return{onActive:(c,u)=>{var f;(f=o.exclude)!=null&&f.includes(c)||(o.include?o.include.includes(c)&&u():u())}}},Nt=()=>{if(typeof window!="undefined")return window.__REDUX_DEVTOOLS_EXTENSION__},jt=n=>{const o=Nt();if(!!o)return r=>{var p;const c=je(n),u=o.connect({name:r==null?void 0:r.name,features:{pause:!1,lock:!1,persist:!1,export:!1,import:!1,jump:!1,skip:!1,reorder:!1,dispatch:!1,test:!1}}),f=(a,s)=>{u.send(s,null)},S=Ae.store({name:`RemeshReduxDevtools(${(p=r==null?void 0:r.name)!=null?p:""})`}),y=S.getDomain(k()),v=a=>{const s={domainId:a.Domain.domainId,domainName:a.Domain.domainName};return a.arg!==void 0?E(w({},s),{domainArg:a.arg}):s};return c.onActive("domain",()=>{S.subscribeEvent(y.event.RemeshDomainStorageEvent,a=>{const s=a.storage.Domain,l={type:`${a.type}::${s.domainName}`,domainId:s.domainId,domainName:s.domainName};a.storage.arg!==void 0?f(l.type,E(w({},l),{domainArg:a.storage.arg})):f(l.type,l)})}),c.onActive("state",()=>{S.subscribeEvent(y.event.RemeshStateStorageEvent,a=>{const s=a.storage.State,l={type:`${a.type}::${s.stateName}`,owner:v(s.owner),stateId:s.stateId,stateName:s.stateName,stateValue:a.storage.currentState};a.storage.arg!==void 0?f(l.type,E(w({},l),{stateArg:a.storage.arg})):f(l.type,l)})}),c.onActive("query",()=>{S.subscribeEvent(y.event.RemeshQueryStorageEvent,a=>{const s=a.storage.Query,l={type:`${a.type}::${s.queryName}`,owner:v(s.owner),queryId:s.queryId,queryName:s.queryName};a.storage.arg!==void 0?f(l.type,E(w({},l),{queryArg:a.storage.arg})):f(l.type,l)})}),c.onActive("command",()=>{S.subscribeEvent(y.event.RemeshCommandReceivedEvent,a=>{const s=a.payload.Command,l={type:`${a.type}::${s.commandName}`,owner:v(s.owner),commandId:s.commandId,commandName:s.commandName};a.payload.arg!==void 0?f(l.type,E(w({},l),{commandArg:a.payload.arg})):f(l.type,l)})}),c.onActive("command$",()=>{S.subscribeEvent(y.event.RemeshCommand$ReceivedEvent,a=>{const s=a.payload.Command$,l={type:`${a.type}::${s.command$Name}`,owner:v(s.owner),command$Id:s.command$Id,command$Name:s.command$Name};a.payload.arg!==void 0?f(l.type,E(w({},l),{command$Arg:a.payload.arg})):f(l.type,l)})}),c.onActive("event",()=>{S.subscribeEvent(y.event.RemeshEventEmittedEvent,a=>{const s=a.payload.Event,l={type:`${a.type}::${s.eventName}`,owner:v(s.owner),eventId:s.eventId,eventName:s.eventName};a.payload.arg!==void 0?f(l.type,E(w({},l),{eventArg:a.payload.arg})):f(l.type,l)})}),S}},Vt=n=>o=>{var v;const r=w({collapsed:!0},n),c=je(r),u=(p,a)=>{if(r.collapsed){const s=p.split("::");console.groupCollapsed(`%c${s[0]}%c::%c${s[1]}%c::%c${s[2]}%c @ ${Qt()}`,"color:#03A9F4; font-weight: bold","color:#9E9E9E; font-weight: bold","color:#4CAF50; font-weight: bold","color:#9E9E9E; font-weight: bold","color:#AA07DE; font-weight: bold","color:#9E9E9E; font-weight: lighter")}console.log(a),r.collapsed&&console.groupEnd()},f=Ae.store(E(w({},o),{name:`RemeshLogger(${(v=o==null?void 0:o.name)!=null?v:""})`})),S=f.getDomain(k()),y=p=>{const a={domainId:p.Domain.domainId,domainName:p.Domain.domainName};return p.arg!==void 0?E(w({},a),{domainArg:p.arg}):a};return c.onActive("domain",()=>{f.subscribeEvent(S.event.RemeshDomainStorageEvent,p=>{const a=p.storage.Domain,s={type:`${p.type}::${a.domainName}`,domainId:a.domainId,domainName:a.domainName};p.storage.arg!==void 0?u(s.type,E(w({},s),{domainArg:p.storage.arg})):u(s.type,s)})}),c.onActive("state",()=>{f.subscribeEvent(S.event.RemeshStateStorageEvent,p=>{const a=p.storage.State,s={type:`${p.type}::${a.stateName}`,owner:y(a.owner),stateId:a.stateId,stateName:a.stateName,stateValue:p.storage.currentState};p.storage.arg!==void 0?u(s.type,E(w({},s),{stateArg:p.storage.arg})):u(s.type,s)})}),c.onActive("query",()=>{f.subscribeEvent(S.event.RemeshQueryStorageEvent,p=>{const a=p.storage.Query,s={type:`${p.type}::${a.queryName}`,owner:y(a.owner),queryId:a.queryId,queryName:a.queryName,queryValue:p.storage.currentValue};p.storage.arg!==void 0?u(s.type,E(w({},s),{queryArg:p.storage.arg})):u(s.type,s)})}),c.onActive("command",()=>{f.subscribeEvent(S.event.RemeshCommandReceivedEvent,p=>{const a=p.payload.Command,s={type:`${p.type}::${a.commandName}`,owner:y(a.owner),commandId:a.commandId,commandName:a.commandName};p.payload.arg!==void 0?u(s.type,E(w({},s),{commandArg:p.payload.arg})):u(s.type,s)})}),c.onActive("command$",()=>{f.subscribeEvent(S.event.RemeshCommand$ReceivedEvent,p=>{const a=p.payload.Command$,s={type:`${p.type}::${a.command$Name}`,owner:y(a.owner),command$Id:a.command$Id,command$Name:a.command$Name};p.payload.arg!==void 0?u(s.type,E(w({},s),{command$Arg:p.payload.arg})):u(s.type,s)})}),c.onActive("event",()=>{f.subscribeEvent(S.event.RemeshEventEmittedEvent,p=>{const a=p.payload.Event,s={type:`${p.type}::${a.eventName}`,owner:y(a.owner),eventId:a.eventId,eventName:a.eventName};p.payload.arg!==void 0?u(s.type,E(w({},s),{eventArg:p.payload.arg})):u(s.type,s)})}),f};export{Ae as R,kt as a,jt as b,Vt as c,Mt as d,At as e,Ut as u};
//# sourceMappingURL=remesh-logger.0a0f746f.js.map
